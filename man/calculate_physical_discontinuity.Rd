% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/spadl_conversion.R
\name{calculate_physical_discontinuity}
\alias{calculate_physical_discontinuity}
\title{Calculate Physical Discontinuity}
\usage{
calculate_physical_discontinuity(spadl_dt)
}
\arguments{
\item{spadl_dt}{Data.table or data.frame in SPADL format from
\code{convert_opta_to_spadl()}. Must have columns: match_id, team_id,
start_x, start_y, end_x, end_y.}
}
\value{
Data.table with additional columns:
\itemize{
\item phys_disc: Physical discontinuity (Euclidean distance between
action end and next action start in unified frame)
\item phys_end_x, phys_end_y: End coordinates in physical frame
\item phys_next_x, phys_next_y: Next action start in physical frame
}
}
\description{
Calculates spatial discontinuity between consecutive actions using a unified
pitch coordinate frame. This converts team-relative Opta coordinates to a
common physical frame, allowing measurement of actual ball movement rather
than perspective changes.
}
\details{
Opta uses team-relative coordinates where each team sees x=100 as their
attacking goal. When possession changes, coordinates appear to "jump" due to
perspective change, not ball movement. This function removes that artifact
by converting all coordinates to a single reference frame.

For validation purposes, physical discontinuity should be low for most
action types (median < 10-15 units). High values indicate data quality
issues or unusual game situations (e.g., set pieces).

Expected median physical discontinuity by action type:
\itemize{
\item pass: ~3 (pass lands where receiver starts)
\item aerial: ~3 (winner catches at their position)
\item tackle: ~6 (tackler wins ball nearby)
\item shot: ~10 (shot to goal, next action at keeper/goal)
}
}
\examples{
\dontrun{
events <- load_opta_match_events("ENG", "2024-2025")
spadl <- convert_opta_to_spadl(events)
spadl_with_disc <- calculate_physical_discontinuity(spadl)

# Check median discontinuity by action type
spadl_with_disc[, .(median_disc = median(phys_disc, na.rm = TRUE)),
                by = action_type]
}
}
\keyword{internal}
