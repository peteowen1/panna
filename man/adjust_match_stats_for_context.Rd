% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/estimated_skills.R
\name{adjust_match_stats_for_context}
\alias{adjust_match_stats_for_context}
\title{Adjust match stats for opponent quality, venue, and league level}
\usage{
adjust_match_stats_for_context(
  match_stats,
  elo_ratings = NULL,
  adjust_opponent = TRUE,
  adjust_venue = TRUE,
  adjust_league = TRUE,
  big5_leagues = c("EPL", "La_Liga", "Bundesliga", "Serie_A", "Ligue_1", "ENG", "ESP",
    "GER", "ITA", "FRA")
)
}
\arguments{
\item{match_stats}{A data.table from \code{compute_match_level_opta_stats()}
with columns: match_id, player_id, team_name, opponent_team, is_home,
competition, total_minutes, and stat columns.}

\item{elo_ratings}{Optional named numeric vector of team Elo ratings.
If NULL, opponent adjustment is skipped.}

\item{adjust_opponent}{Logical, apply opponent strength adjustment (default TRUE).}

\item{adjust_venue}{Logical, apply home/away adjustment (default TRUE).}

\item{adjust_league}{Logical, apply cross-league adjustment (default TRUE).}

\item{big5_leagues}{Character vector of Big 5 league codes for reference level.}
}
\value{
A copy of the input data.table with stat columns adjusted.
}
\description{
Normalizes raw match-level stats to account for contextual factors before
they enter the skill estimation pipeline. Applying these adjustments before
decay-weighting produces cleaner skill estimates.
}
\details{
Three adjustments are applied multiplicatively:
\enumerate{
\item \strong{Opponent strength}: Offensive stats scaled by
\code{league_avg_elo / opponent_elo}. Harder opponents inflate your stats;
easier opponents deflate them.
\item \strong{Home/away}: Per-stat home/away differential computed from
the full dataset. Away stats multiplied up to home-equivalent.
\item \strong{League quality}: Cross-league normalization using Big 5
average as reference level.
}
}
