% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rapm_model.R
\name{fit_rapm_with_prior}
\alias{fit_rapm_with_prior}
\title{Fit RAPM with SPM prior (xRAPM)}
\usage{
fit_rapm_with_prior(
  rapm_data,
  offense_prior,
  defense_prior,
  alpha = 0,
  nfolds = 10,
  use_weights = TRUE,
  penalize_covariates = FALSE
)
}
\arguments{
\item{rapm_data}{List from prepare_rapm_data}

\item{offense_prior}{Named vector of offensive SPM predictions (by player_id)}

\item{defense_prior}{Named vector of defensive SPM predictions (by player_id)}

\item{alpha}{Elastic net mixing parameter (0 = ridge)}

\item{nfolds}{Number of CV folds}

\item{use_weights}{Whether to use splint duration weights}

\item{penalize_covariates}{Whether to penalize covariate coefficients}
}
\value{
Fitted model with prior adjustment metadata
}
\description{
Fits RAPM model shrinking toward SPM predictions instead of zero.
This helps separate players who always appear together by using
box score statistics as a Bayesian prior.
}
\details{
For the O/D design matrix:
\itemize{
\item offense_prior: SPM-predicted offensive contribution
\item defense_prior: SPM-predicted defensive contribution
}
}
\examples{
\dontrun{
offense_prior <- build_prior_vector(spm_data, "offense_spm", rapm_data$player_mapping)
defense_prior <- build_prior_vector(spm_data, "defense_spm", rapm_data$player_mapping)
xrapm_model <- fit_rapm_with_prior(rapm_data, offense_prior, defense_prior)
}

}
