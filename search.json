[{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":null,"dir":"","previous_headings":"","what":"Panna Data Dictionary","title":"Panna Data Dictionary","text":"document describes data structures used panna pipeline.","code":""},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"pipeline-overview","dir":"","previous_headings":"","what":"Pipeline Overview","title":"Panna Data Dictionary","text":"","code":"01_data_collection.R  ->  01_raw_data.rds 02_data_processing.R  ->  02_processed_data.rds 03_splint_creation.R  ->  03_splints.rds 04_rapm.R             ->  04_rapm.rds 05_spm.R              ->  05_spm.rds 06_xrapm.R            ->  06_xrapm.rds 07_panna_ratings.R    ->  07_panna.rds"},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"id_01_raw_datards","dir":"","previous_headings":"","what":"01_raw_data.rds","title":"Panna Data Dictionary","text":"Raw data pannadata repository. columns snake_case clean_column_names().","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"stats_summary-stats_passing-stats_defense-stats_possession","dir":"","previous_headings":"01_raw_data.rds","what":"stats_summary, stats_passing, stats_defense, stats_possession","title":"Panna Data Dictionary","text":"Advanced player stats per match. See pannadata/DATA_DICTIONARY.md full column definitions.","code":""},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"id_02_processed_datards","dir":"","previous_headings":"","what":"02_processed_data.rds","title":"Panna Data Dictionary","text":"Cleaned standardized data.","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"id_03_splintsrds","dir":"","previous_headings":"","what":"03_splints.rds","title":"Panna Data Dictionary","text":"Time segments RAPM analysis.","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"id_05_spmrds","dir":"","previous_headings":"","what":"05_spm.rds","title":"Panna Data Dictionary","text":"Statistical Plus-Minus model predicting RAPM box scores.","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"id_06_xrapmrds","dir":"","previous_headings":"","what":"06_xrapm.rds","title":"Panna Data Dictionary","text":"RAPM SPM prior (xRAPM).","code":""},{"path":[]},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"id_07_pannards","dir":"","previous_headings":"","what":"07_panna.rds","title":"Panna Data Dictionary","text":"Final unified ratings.","code":""},{"path":[]},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"opta-data-schemas","dir":"","previous_headings":"","what":"Opta Data Schemas","title":"Panna Data Dictionary","text":"Alternative data source TheAnalyst/Opta API. Use load_opta_*() functions.","code":""},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"opta-player-stats-load_opta_stats","dir":"","previous_headings":"Opta Data Schemas","what":"Opta Player Stats (load_opta_stats())","title":"Panna Data Dictionary","text":"263 columns per player per match. Key columns:","code":""},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"opta-events-load_opta_events","dir":"","previous_headings":"Opta Data Schemas","what":"Opta Events (load_opta_events())","title":"Panna Data Dictionary","text":"Match events timing splint boundaries.","code":""},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"opta-shot-events-load_opta_shot_events","dir":"","previous_headings":"Opta Data Schemas","what":"Opta Shot Events (load_opta_shot_events())","title":"Panna Data Dictionary","text":"Individual shots x/y coordinates. Note: Opta API include xG values. Use prepare_opta_shots_for_splints(use_goals_as_xg = TRUE) basic proxy, calculate xG x/y coordinates external model.","code":""},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"opta-lineups-load_opta_lineups","dir":"","previous_headings":"Opta Data Schemas","what":"Opta Lineups (load_opta_lineups())","title":"Panna Data Dictionary","text":"Player lineup data timing.","code":""},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"using-opta-data-for-splints","dir":"","previous_headings":"Opta Data Schemas","what":"Using Opta Data for Splints","title":"Panna Data Dictionary","text":"","code":"# Load Opta data lineups <- load_opta_lineups(\"ENG\", \"2024-2025\") events <- load_opta_events(\"ENG\", \"2024-2025\") shots <- load_opta_shot_events(\"ENG\", \"2024-2025\")  # Create processed data structure processed <- create_opta_processed_data(   opta_lineups = lineups,   opta_events = events,   opta_shot_events = shots,   use_goals_as_xg = TRUE  # Use goals as xG proxy )  # Create splints splints <- create_all_splints(processed)"},{"path":[]},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"offense-coefficient","dir":"","previous_headings":"Rating Interpretation","what":"Offense Coefficient","title":"Panna Data Dictionary","text":"Positive = Player helps team create xG attacking (GOOD) Units: xG per 90 minutes average","code":""},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"defense-coefficient","dir":"","previous_headings":"Rating Interpretation","what":"Defense Coefficient","title":"Panna Data Dictionary","text":"Positive = Player allows xG defending (BAD) Negative = Player allows LESS xG defending (GOOD) Units: xG per 90 minutes relative average","code":""},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"final-rating","dir":"","previous_headings":"Rating Interpretation","what":"Final Rating","title":"Panna Data Dictionary","text":"Higher = better overall impact","code":"panna = offense - defense"},{"path":"https://peteowen1.github.io/panna/DATA_DICTIONARY.html","id":"example","dir":"","previous_headings":"Rating Interpretation","what":"Example","title":"Panna Data Dictionary","text":"Helps team create +0.15 xG/90 offense Allows +0.02 xG/90 defense (slightly average defender) panna = 0.15 - 0.02 = +0.13 Creates -0.02 xG/90 offense (average) Allows -0.10 xG/90 defense (excellent defender) panna = -0.02 - (-0.10) = +0.08","code":""},{"path":"https://peteowen1.github.io/panna/DATA_ISSUES.html","id":null,"dir":"","previous_headings":"","what":"Panna Data Issues","title":"Panna Data Issues","text":"Tracking known data quality issues status.","code":""},{"path":[]},{"path":"https://peteowen1.github.io/panna/DATA_ISSUES.html","id":"id_1-2025-2026-season---incomplete-data","dir":"","previous_headings":"Active Issues","what":"1. 2025-2026 Season - Incomplete Data","title":"Panna Data Issues","text":"Status: EXPECTED Severity: Low Updated: 2026-01-03 Problem: 2025-2026 season currently progress. Partial data available: Impact: - Partial season data may skew player ratings included - Current season players fewer observations Recommendation: Exclude season == \"2025-2026\" RAPM analysis season completes.","code":""},{"path":"https://peteowen1.github.io/panna/DATA_ISSUES.html","id":"id_2-ligue-1-2020---covid-season-gap","dir":"","previous_headings":"Active Issues","what":"2. Ligue 1 2020 - COVID Season Gap","title":"Panna Data Issues","text":"Status: Minor Severity: Low Discovered: 2024-12-30 Problem: Ligue 1 2019-20 season 279 matches (vs 380 expected). COVID-shortened season league cancelled matchday 28. Impact: - ~100 fewer matches normal season - May slightly underweight Ligue 1 2020 players Recommendation: Keep -. Ridge regression handles reduced sample size appropriately.","code":""},{"path":[]},{"path":"https://peteowen1.github.io/panna/DATA_ISSUES.html","id":"la-liga---no-xgshooting-data","dir":"","previous_headings":"Resolved Issues","what":"La Liga - No xG/Shooting Data","title":"Panna Data Issues","text":"Status: RESOLVED Resolved: 2026-01-03 Original Issue: La Liga 0% shooting/xG data across seasons. Resolution: pannadata now contains complete La Liga shooting data 2017-2018 onwards. seasons 2017-2025 full match coverage (380 matches per season).","code":""},{"path":"https://peteowen1.github.io/panna/DATA_ISSUES.html","id":"id_2024-2025-season---incomplete-data","dir":"","previous_headings":"Resolved Issues","what":"2024-2025 Season - Incomplete Data","title":"Panna Data Issues","text":"Status: RESOLVED Resolved: 2026-01-03 Original Issue: Season incomplete 25-42% missing xG data. Resolution: 2024-2025 season now complete full data leagues: - Premier League: 380 matches - La Liga: 380 matches - Serie : 380 matches - Bundesliga: 306 matches - Ligue 1: 306 matches","code":""},{"path":[]},{"path":"https://peteowen1.github.io/panna/DATA_ISSUES.html","id":"recommended-data-filter","dir":"","previous_headings":"","what":"Recommended Data Filter","title":"Panna Data Issues","text":"RAPM analysis, exclude: - season == \"2025-2026\" (incomplete current season) leaves 5 leagues x 8 seasons = 40 league-seasons clean data (minor Ligue 1 2020 caveat).","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":null,"dir":"","previous_headings":"","what":"EPV Enhancement Ideas","title":"EPV Enhancement Ideas","text":"file tracks potential improvements EPV (Expected Possession Value) model require research significant implementation effort.","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"opta-team-relative-coordinates-resolved","dir":"","previous_headings":"","what":"Opta Team-Relative Coordinates (RESOLVED)","title":"EPV Enhancement Ideas","text":"Status: Fixed convert_opta_to_spadl() - default normalize_direction = FALSE Priority: Critical (breaking coordinate continuity) Resolved: 2026-02","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"problem","dir":"","previous_headings":"Opta Team-Relative Coordinates (RESOLVED)","what":"Problem","title":"EPV Enhancement Ideas","text":"Investigation revealed Opta uses team-relative coordinates: - team’s events perspective - x=0 team’s goal (defensive end) - x=100 opponent’s goal (attacking end) - Y coordinates also team-relative (y=0 one touchline team’s view) means shot (88, 30) Team save (10.9, 70.6) Team B physical location opposite perspectives (88+10.9≈100, 30+70.6≈100). original normalization logic tried flip coordinates based mean_x per team, doesn’t work team-relative data since teams naturally see attacking toward x=100.","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"solution","dir":"","previous_headings":"Opta Team-Relative Coordinates (RESOLVED)","what":"Solution","title":"EPV Enhancement Ideas","text":"Changed normalize_direction = FALSE default convert_opta_to_spadl(). correct EPV: - EPV models evaluate action ball-carrier’s perspective - ball-carrier always attacks toward x=100 native coordinates - possession changes, coordinate frame naturally changes (different perspective) - discontinuity possession changes expected correctly reflects game state change Validation results fix: - Shots correctly x=84 (mean) near attacking goal ✓ - Saves correctly x=9 (mean) near defending goal ✓ - -team pass discontinuity: median 2.28 (low, expected) ✓ - Different-team discontinuity: higher (expected, perspective change) ✓","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"opta-end_xend_y-data-issue-resolved","dir":"","previous_headings":"","what":"Opta end_x/end_y Data Issue (RESOLVED)","title":"EPV Enhancement Ideas","text":"Status: Fixed convert_opta_to_spadl() Priority: Critical (breaking EPV chain continuity) Resolved: 2026-02","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"problem-1","dir":"","previous_headings":"Opta end_x/end_y Data Issue (RESOLVED)","what":"Problem","title":"EPV Enhancement Ideas","text":"Analysis revealed Opta action types end_x=0, end_y=0 - passes clearances proper end coordinates. breaks EPV chain continuity end_x action N match start_x action N+1. Findings debug/analyze_spadl_continuity.R:","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"solution-implemented","dir":"","previous_headings":"Opta end_x/end_y Data Issue (RESOLVED)","what":"Solution Implemented","title":"EPV Enhancement Ideas","text":"convert_opta_to_spadl(): tackle, interception, ball_recovery, ball_touch, take_on, foul, dispossessed keeper_save, keeper_pick_up, keeper_claim, keeper_punch aerial (added stationary list - duel winner keeps ball position) clearance (fallback rare data quality issues) merge_duel_rows() combines , keeping winner’s row Adds opponent info (opponent_player_id, opponent_player_name) avoids double-counting duel events pass (type_id=1) clearance (type_id=12) - usually end coords ensures EPV chain continuity preserving meaningful actions including aerial duels.","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"aerial-duels-credit-assignment","dir":"","previous_headings":"","what":"Aerial Duels Credit Assignment","title":"EPV Enhancement Ideas","text":"Status: Included (aerials treated stationary actions duel merging) Priority: Low (basic handling works) Complexity: Medium (advanced credit assignment)","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"current-implementation","dir":"","previous_headings":"Aerial Duels Credit Assignment","what":"Current Implementation","title":"EPV Enhancement Ideas","text":"Aerials now handled like stationary actions: 1. end_x = 0 issue fixed setting end = start (winner keeps ball position) 2. Duel rows merged via merge_duel_rows() - keeps winner’s row, removes loser’s 3. Winner gets EPV credit happens next; loser’s row merged reasonable approximation aerial winner gets credit proportional value create subsequent action.","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"potential-enhancement","dir":"","previous_headings":"Aerial Duels Credit Assignment","what":"Potential Enhancement","title":"EPV Enhancement Ideas","text":"Aerials represent unique opportunity proper zero-sum credit assignment: 1. participants recorded (winner loser identified) 2. calculate “contested baseline EPV” location 3. Winner credit: (outcome_value - contested_baseline) 4. Loser debit: -(outcome_value - contested_baseline) one cases properly assign negative credit losing player. Currently loser gets credit (row merged ) rather negative credit.","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"research-needed-for-enhancement","dir":"","previous_headings":"Aerial Duels Credit Assignment","what":"Research Needed for Enhancement","title":"EPV Enhancement Ideas","text":"Build model “contested aerial baseline EPV” different pitch locations Validate winner/loser credit sums zero (zero-sum game) Test whether explicit loser debit improves player ratings","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"related-files","dir":"","previous_headings":"Aerial Duels Credit Assignment","what":"Related Files","title":"EPV Enhancement Ideas","text":"R/spadl_conversion.R: Handles aerials stationary actions, merges duel rows","code":""},{"path":[]},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"set-piece-valuation","dir":"","previous_headings":"Additional Enhancement Ideas","what":"Set Piece Valuation","title":"EPV Enhancement Ideas","text":"Set pieces (corners, free kicks) different EPV dynamics open play. Consider: - Separate models set piece situations - Credit assignment set piece taker vs finisher","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"pressingcounterpressing-value","dir":"","previous_headings":"Additional Enhancement Ideas","what":"Pressing/Counterpressing Value","title":"EPV Enhancement Ideas","text":"Currently defensive actions get flat 1.5x boost. model: - Time since possession loss (counterpress window) - Position-dependent defensive value - Chain defensive actions (pressure sequences)","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"xg-integration-in-epv","dir":"","previous_headings":"Additional Enhancement Ideas","what":"xG Integration in EPV","title":"EPV Enhancement Ideas","text":"EPV model uses multinomial goal prediction. integrate: - Shot-level xG terminal values (partially done failed shots) - xG-based features pre-shot actions","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"code-organization-large-file-splits","dir":"","previous_headings":"","what":"Code Organization: Large File Splits","title":"EPV Enhancement Ideas","text":"Status: Recommended v0.2.0 Priority: Medium (maintainability) Complexity: Medium (requires careful testing)","code":""},{"path":[]},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"proposed-split-scrape_fbref_directr--4-files","dir":"","previous_headings":"Code Organization: Large File Splits","what":"Proposed Split: scrape_fbref_direct.R → 4 files","title":"EPV Enhancement Ideas","text":"1. scrape_fbref_http.R (~150 lines) - get_fbref_headers() - Browser headers - add_delay_jitter() - Request timing - get_fbref_session() - Session management - reset_fbref_session() - Session reset - check_fbref_status() - Connection check - .fbref_env environment 2. scrape_fbref_pages.R (~500 lines) - fetch_fbref_page() - Core page fetching - fetch_with_retry() - Retry logic - parse_match_tables() - Table extraction - extract_match_events() - Event parsing - get_cached_path() - Cache path utilities - list_cached_matches() - Cache listing 3. scrape_fbref_batch.R (~600 lines) - scrape_fixtures() - Fixture scraping - scrape_fbref_matches() - Main batch scraper - aggregate_cached_matches() - RDS aggregation - rescrape_matches() - Force rescrape 4. scrape_fbref_parquet.R (~450 lines) - build_parquet() - Single parquet build - build_consolidated_parquet() - Multi-league consolidation - get_parquet_path() - Path utilities - migrate_metadata_tables_available() - Migration utilities Keep data_loaders.R (already exists): - load_summary(), load_passing(), etc. moved - Currently uses DuckDB remote parquet loading","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"proposed-split-spm_modelr--2-files","dir":"","previous_headings":"Code Organization: Large File Splits","what":"Proposed Split: spm_model.R → 2 files","title":"EPV Enhancement Ideas","text":"1. spm_model.R (~700 lines) - FBref SPM - Internal helpers: .aggregate_stat_table(), .get_*_col_mapping() - aggregate_player_stats() - FBref aggregation - fit_spm_model() - Model fitting - calculate_spm_ratings() - Rating extraction - extract_spm_ratings(), compare_spm_features() 2. spm_opta.R (~500 lines) - Opta SPM - aggregate_opta_stats() - Opta aggregation (263 columns) - fit_spm_opta() - Opta-specific model - compare_spm_features() - Feature comparison - Opta-specific column mappings helpers","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"implementation-notes","dir":"","previous_headings":"Code Organization: Large File Splits","what":"Implementation Notes","title":"EPV Enhancement Ideas","text":"Source order matters: R loads files alphabetically, @importFrom handles dependencies Internal functions: Use @keywords internal helpers stay file Namespace: Run devtools::document() split regenerate NAMESPACE Testing: Run devtools::check() full test suite split Git history: Consider git mv better history tracking","code":""},{"path":"https://peteowen1.github.io/panna/ENHANCEMENTS.html","id":"benefits","dir":"","previous_headings":"Code Organization: Large File Splits","what":"Benefits","title":"EPV Enhancement Ideas","text":"Faster code navigation (smaller files) Clearer responsibility boundaries Easier testing individual modules Better parallelization code review","code":""},{"path":"https://peteowen1.github.io/panna/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2024 Pete Owen Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://peteowen1.github.io/panna/OPTA_REFERENCE.html","id":null,"dir":"","previous_headings":"","what":"Opta Event Reference","title":"Opta Event Reference","text":"Reference Opta F24 event data type IDs qualifier IDs used panna EPV pipeline.","code":""},{"path":"https://peteowen1.github.io/panna/OPTA_REFERENCE.html","id":"event-type-ids-type_id","dir":"","previous_headings":"","what":"Event Type IDs (type_id)","title":"Opta Event Reference","text":"Events classified type_id. outcome field indicates success (1) failure (0).","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":"https://peteowen1.github.io/panna/OPTA_REFERENCE.html","id":"qualifier-ids","dir":"","previous_headings":"","what":"Qualifier IDs","title":"Opta Event Reference","text":"Qualifiers provide additional context events. JSON format : keys qualifier IDs (strings) values qualifier values (null).","code":"{\"qualifierId\": value, \"qualifierId2\": value2, ...}"},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"https://peteowen1.github.io/panna/OPTA_REFERENCE.html","id":"outcome-field","dir":"","previous_headings":"","what":"Outcome Field","title":"Opta Event Reference","text":"Note: shots (type_id 13-16), type_id indicates outcome: - 16 = Goal (success) - 13, 14, 15 = goal (fail)","code":""},{"path":"https://peteowen1.github.io/panna/OPTA_REFERENCE.html","id":"spadl-mapping","dir":"","previous_headings":"","what":"SPADL Mapping","title":"Opta Event Reference","text":"convert_opta_to_spadl() function maps Opta events standardized SPADL actions:","code":""},{"path":"https://peteowen1.github.io/panna/OPTA_REFERENCE.html","id":"duel-events-type_id-44-7","dir":"","previous_headings":"","what":"Duel Events (type_id 44, 7)","title":"Opta Event Reference","text":"Opta records participants duel separate consecutive events: - Row N: Player (Team 1) - outcome indicates won - Row N+1: Player B (Team 2) - outcome indicates won merge_duel_rows() function combines single rows: - Keeps winner’s row (outcome = 1) - Adds opponent_player_id opponent_player_name loser’s row","code":""},{"path":"https://peteowen1.github.io/panna/OPTA_REFERENCE.html","id":"own-goals","dir":"","previous_headings":"","what":"Own Goals","title":"Opta Event Reference","text":"goals identified qualifier 28 goal events (type_id = 16): - is_own_goal = TRUE qualifier 28 present - Player listed one scored team - EPV delta = -1 - prev_epv (opponent achieved maximum value)","code":""},{"path":"https://peteowen1.github.io/panna/OPTA_REFERENCE.html","id":"coordinate-system","dir":"","previous_headings":"","what":"Coordinate System","title":"Opta Event Reference","text":"Opta uses 0-100 scale X Y: - X: 0 = goal line, 100 = opponent goal line - Y: 0 = right touchline (attacking perspective), 100 = left touchline - Center: (50, 50) - Goal center: (100, 50) - Penalty spot: approximately (88, 50) - 6-yard box: X > 94, Y ~37-63 - 18-yard box: X > 83, Y ~21-79 normalize_spadl_coordinates() function ensures teams always attack toward X = 100.","code":""},{"path":"https://peteowen1.github.io/panna/OPTA_REFERENCE.html","id":"references","dir":"","previous_headings":"","what":"References","title":"Opta Event Reference","text":"Opta F24 Feed Documentation (proprietary) SPADL Paper: https://arxiv.org/abs/1802.07127 socceraction library: https://github.com/ML-KULeuven/socceraction","code":""},{"path":[]},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"opta-primary-source","dir":"Articles","previous_headings":"","what":"Opta (Primary Source)","title":"Data Sources Guide","text":"Opta primary data source panna rating system, powering full RAPM/SPM pipeline, EPV, xMetrics, estimated skills, match predictions across 15 leagues.","code":""},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"strengths","dir":"Articles","previous_headings":"Opta (Primary Source)","what":"Strengths","title":"Data Sources Guide","text":"15 leagues: Big 5 + NED/POR/TUR/ENG2/SCO + UCL/UEL/UECL + WC/EURO 263 columns: detailed per-match player statistics Event-level data: Full match events x/y coordinates EPV SPADL xG model: SPADL + XGBoost pre-trained model (dependency external xG) Progressive metrics: Carries, passes, receptions penalty area Set pieces: Detailed breakdown set piece involvement xMetrics: Pre-computed xG/xA/xPass leagues","code":""},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"league-codes","dir":"Articles","previous_headings":"Opta (Primary Source)","what":"League Codes","title":"Data Sources Guide","text":"","code":"# Big 5 leagues \"EPL\"        # Premier League \"La_Liga\"    # La Liga \"Bundesliga\" # Bundesliga \"Serie_A\"    # Serie A \"Ligue_1\"    # Ligue 1  # Additional domestic leagues \"NED\"   # Eredivisie \"POR\"   # Primeira Liga \"TUR\"   # Super Lig \"ENG2\"  # Championship \"SCO\"   # Scottish Premiership  # European competitions \"UCL\"   # Champions League \"UEL\"   # Europa League \"UECL\"  # Conference League  # International tournaments \"WC\"    # World Cup (e.g., \"2018 Russia\") \"EURO\"  # European Championship (e.g., \"2024 Germany\")"},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"loading-opta-data","dir":"Articles","previous_headings":"Opta (Primary Source)","what":"Loading Opta Data","title":"Data Sources Guide","text":"","code":"library(panna)  # Download (first time) pb_download_source(\"opta\")  # Player match stats (263 columns) stats <- load_opta_stats(\"EPL\", \"2024-2025\")  # Shot data shots <- load_opta_shots(\"EPL\", \"2024-2025\")  # All Big 5 leagues at once big5 <- load_opta_big5(\"2024-2025\")  # Event-level data (for EPV/SPADL) match_events <- load_opta_match_events(\"EPL\", \"2024-2025\")  # Lineups and fixtures lineups <- load_opta_lineups(\"EPL\", \"2024-2025\") fixtures <- load_opta_fixtures(\"EPL\")  # Pre-computed xG/xA/xPass metrics xmetrics <- load_opta_xmetrics(\"EPL\", \"2024-2025\")  # Aggregated player stats players <- player_opta_summary(   leagues = \"EPL\",   seasons = \"2024-2025\",   min_minutes = 900 )"},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"when-to-use-opta","dir":"Articles","previous_headings":"Opta (Primary Source)","what":"When to Use Opta","title":"Data Sources Guide","text":"Running full RAPM/SPM/Panna rating pipeline EPV (Expected Possession Value) analysis Estimated skills match predictions Research requiring progressive carries set pieces Analysis across 15 leagues (beyond Big 5) Historical analysis (2013+)","code":""},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"understat","dir":"Articles","previous_headings":"","what":"Understat","title":"Data Sources Guide","text":"Understat provides unique metrics like xGChain xGBuildup.","code":""},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"strengths-1","dir":"Articles","previous_headings":"Understat","what":"Strengths","title":"Data Sources Guide","text":"xGChain: xG attributed players involved attacking sequence xGBuildup: xG buildup players (excluding shooter assister) Free accessible: scraping restrictions Russian Premier League: source covering Russia","code":""},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"unique-statistics","dir":"Articles","previous_headings":"Understat","what":"Unique Statistics","title":"Data Sources Guide","text":"metrics help identify players contribute attacks without always getting final touch.","code":"xGChain   = Sum of xG for all sequences a player was involved in xGBuildup = xGChain minus xG and xA (contribution beyond final actions)"},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"league-codes-1","dir":"Articles","previous_headings":"Understat","what":"League Codes","title":"Data Sources Guide","text":"","code":"# Understat leagues \"EPL\"         # Premier League \"La_Liga\"     # La Liga \"Bundesliga\"  # Bundesliga \"Serie_A\"     # Serie A \"Ligue_1\"     # Ligue 1 \"RFPL\"        # Russian Premier League"},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"season-format","dir":"Articles","previous_headings":"Understat","what":"Season Format","title":"Data Sources Guide","text":"Understat uses single-year seasons:","code":"# Understat: \"2024\" means 2024-25 season roster <- load_understat_roster(\"EPL\", \"2024\")  # vs Opta/FBref: \"2024-2025\" stats <- load_opta_stats(\"EPL\", \"2024-2025\")"},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"loading-understat-data","dir":"Articles","previous_headings":"Understat","what":"Loading Understat Data","title":"Data Sources Guide","text":"","code":"# Download pb_download_source(\"understat\")  # Load player roster with xGChain, xGBuildup roster <- load_understat_roster(\"EPL\", \"2024\")  # Load shot-level data shots <- load_understat_shots(\"EPL\", \"2024\")  # Match metadata metadata <- load_understat_metadata(\"EPL\", \"2024\")  # Aggregated stats players <- player_understat_summary(   leagues = \"EPL\",   seasons = \"2024\",   min_minutes = 900 )"},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"when-to-use-understat","dir":"Articles","previous_headings":"Understat","what":"When to Use Understat","title":"Data Sources Guide","text":"Analyzing buildup contribution (xGChain, xGBuildup) Russian Premier League coverage StatsBomb xG isn’t required","code":""},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"fbref","dir":"Articles","previous_headings":"","what":"FBref","title":"Data Sources Guide","text":"FBref provides comprehensive passing statistics StatsBomb xG values.","code":""},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"strengths-2","dir":"Articles","previous_headings":"FBref","what":"Strengths","title":"Data Sources Guide","text":"StatsBomb xG: Industry-leading expected goals model Comprehensive passing: Short/medium/long breakdowns, progressive distance Multiple tables: Summary, passing, defense, possession, keeper, misc, shots Competition coverage: Big 5 leagues, European cups, domestic cups, international","code":""},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"league-codes-2","dir":"Articles","previous_headings":"FBref","what":"League Codes","title":"Data Sources Guide","text":"","code":"# Big 5 leagues \"ENG\"  # Premier League \"ESP\"  # La Liga \"GER\"  # Bundesliga \"ITA\"  # Serie A \"FRA\"  # Ligue 1  # European competitions \"UCL\"  # Champions League \"UEL\"  # Europa League  # Domestic cups \"FA_CUP\", \"EFL_CUP\"      # England \"COPA_DEL_REY\"           # Spain \"DFB_POKAL\"              # Germany \"COPPA_ITALIA\"           # Italy \"COUPE_DE_FRANCE\"        # France  # International \"WC\", \"EURO\", \"COPA_AMERICA\", \"AFCON\", \"NATIONS_LEAGUE\""},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"loading-fbref-data","dir":"Articles","previous_headings":"FBref","what":"Loading FBref Data","title":"Data Sources Guide","text":"","code":"library(panna)  # Download (first time) pb_download_source(\"fbref\")  # Load by table type summary <- load_summary(\"ENG\", \"2024-2025\") passing <- load_passing(\"ENG\", \"2024-2025\") defense <- load_defense(\"ENG\", \"2024-2025\") possession <- load_possession(\"ENG\", \"2024-2025\") keeper <- load_keeper(\"ENG\", \"2024-2025\") shots <- load_shots()  # All leagues/seasons  # Aggregated player stats players <- player_fbref_summary(   leagues = \"ENG\",   seasons = \"2024-2025\",   min_minutes = 900 )"},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"when-to-use-fbref","dir":"Articles","previous_headings":"FBref","what":"When to Use FBref","title":"Data Sources Guide","text":"Analyzing passing patterns (short/medium/long breakdowns) Comparing across competitions (league + cup) Working StatsBomb xG specifically Cup international match analysis","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"use-opta-when","dir":"Articles","previous_headings":"Choosing a Data Source","what":"Use Opta when:","title":"Data Sources Guide","text":"Running RAPM/SPM/Panna rating pipeline (recommended) Using EPV, xMetrics, estimated skills, match predictions need 263 columns granularity Analysis across 15 leagues (beyond Big 5) Progressive carry set piece analysis Historical analysis (2013+)","code":""},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"use-understat-when","dir":"Articles","previous_headings":"Choosing a Data Source","what":"Use Understat when:","title":"Data Sources Guide","text":"Analyzing buildup contribution (xGChain, xGBuildup) Covering Russian Premier League Quick analysis without specific xG model preference","code":""},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"use-fbref-when","dir":"Articles","previous_headings":"Choosing a Data Source","what":"Use FBref when:","title":"Data Sources Guide","text":"Detailed passing analysis (short/medium/long breakdowns) Cup international match analysis specifically need StatsBomb xG","code":""},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"combining-sources","dir":"Articles","previous_headings":"","what":"Combining Sources","title":"Data Sources Guide","text":"can use multiple sources analysis: Note: Player name matching across sources requires care due different naming conventions.","code":"# Get Opta stats for RAPM opta_summary <- player_opta_summary(\"EPL\", \"2024-2025\")  # Get Understat for xGChain understat_summary <- player_understat_summary(\"EPL\", \"2024\")  # Merge by player name (careful with name matching) combined <- merge(   opta_summary,   understat_summary[, c(\"player_name\", \"xg_chain\", \"xg_buildup\")],   by = \"player_name\",   all.x = TRUE )"},{"path":"https://peteowen1.github.io/panna/articles/data-sources.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next Steps","title":"Data Sources Guide","text":"Getting Started - Installation basic usage Player Ratings - RAPM SPM methodology Data Dictionary - Complete column definitions","code":""},{"path":"https://peteowen1.github.io/panna/articles/getting-started.html","id":"installation","dir":"Articles","previous_headings":"","what":"Installation","title":"Getting Started with panna","text":"Install panna GitHub:","code":"# Install devtools if needed install.packages(\"devtools\")  # Install panna devtools::install_github(\"peteowen1/panna\")"},{"path":"https://peteowen1.github.io/panna/articles/getting-started.html","id":"downloading-data","dir":"Articles","previous_headings":"","what":"Downloading Data","title":"Getting Started with panna","text":"Data stored GitHub Releases. load_*() functions default source = \"remote\", can start using data immediately. faster repeated access, download data locally first: Data cached locally download, need (updating get new matches).","code":"library(panna)  # Download Opta data (primary source, recommended) pb_download_source(\"opta\")  # Download Understat data pb_download_source(\"understat\")  # Download FBref data pb_download_source(\"fbref\")  # Or download everything pb_download_source(\"all\")"},{"path":[]},{"path":"https://peteowen1.github.io/panna/articles/getting-started.html","id":"opta-data","dir":"Articles","previous_headings":"Loading Data","what":"Opta Data","title":"Getting Started with panna","text":"Opta primary data source 263 columns per player across 15 leagues. powers full RAPM/SPM pipeline, EPV, xMetrics, estimated skills, match predictions.","code":"# Load Opta player stats opta_stats <- load_opta_stats(\"EPL\", \"2024-2025\")  # Load Opta shots opta_shots <- load_opta_shots(\"EPL\", \"2024-2025\")  # Load all Big 5 leagues at once big5 <- load_opta_big5(\"2024-2025\")  # Additional Opta data types match_events <- load_opta_match_events(\"EPL\", \"2024-2025\")  # All events with x/y lineups <- load_opta_lineups(\"EPL\", \"2024-2025\")             # Lineup data fixtures <- load_opta_fixtures(\"EPL\")                        # Fixtures/results xmetrics <- load_opta_xmetrics(\"EPL\", \"2024-2025\")           # Pre-computed xG/xA/xPass"},{"path":"https://peteowen1.github.io/panna/articles/getting-started.html","id":"understat-data","dir":"Articles","previous_headings":"Loading Data","what":"Understat Data","title":"Getting Started with panna","text":"Understat includes xGChain xGBuildup metrics available elsewhere. Note: Understat uses single-year seasons (e.g., “2024” 2024-25).","code":"# Load player roster with xGChain, xGBuildup roster <- load_understat_roster(\"EPL\", \"2024\")  # Load shot-level data shots <- load_understat_shots(\"EPL\", \"2024\")"},{"path":"https://peteowen1.github.io/panna/articles/getting-started.html","id":"fbref-data","dir":"Articles","previous_headings":"Loading Data","what":"FBref Data","title":"Getting Started with panna","text":"FBref provides comprehensive statistics StatsBomb xG values.","code":"# Load summary stats for a league/season summary <- load_summary(\"ENG\", \"2024-2025\")  # Other table types passing <- load_passing(\"ENG\", \"2024-2025\") defense <- load_defense(\"ENG\", \"2024-2025\") possession <- load_possession(\"ENG\", \"2024-2025\") shots <- load_shots()  # All leagues/seasons metadata <- load_metadata(\"ENG\", \"2024-2025\")"},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"https://peteowen1.github.io/panna/articles/getting-started.html","id":"aggregated-player-statistics","dir":"Articles","previous_headings":"","what":"Aggregated Player Statistics","title":"Getting Started with panna","text":"package provides convenience functions aggregated player statistics:","code":"# Opta aggregated stats opta_players <- player_opta_summary(   leagues = \"EPL\",   seasons = \"2024-2025\",   min_minutes = 900 )  # Understat aggregated stats understat_players <- player_understat_summary(   leagues = \"EPL\",   seasons = \"2024\",   min_minutes = 900 )  # FBref aggregated stats players_summary <- player_fbref_summary(   leagues = \"ENG\",   seasons = \"2024-2025\",   min_minutes = 900  # Filter for players with 900+ minutes )  players_passing <- player_fbref_passing(   leagues = c(\"ENG\", \"ESP\"),  # Multiple leagues seasons = c(\"2023-2024\", \"2024-2025\"),  # Multiple seasons   min_minutes = 1800 )"},{"path":"https://peteowen1.github.io/panna/articles/getting-started.html","id":"working-with-multiple-leagues","dir":"Articles","previous_headings":"","what":"Working with Multiple Leagues","title":"Getting Started with panna","text":"Many functions accept vectors leagues seasons:","code":"# Load Big 5 Opta stats big5_opta <- load_opta_big5(\"2024-2025\")  # Or load specific leagues individually multi_league <- data.table::rbindlist(lapply(   c(\"EPL\", \"La_Liga\", \"Bundesliga\"),   function(lg) load_opta_stats(lg, \"2024-2025\") ), fill = TRUE)"},{"path":"https://peteowen1.github.io/panna/articles/getting-started.html","id":"advanced-features","dir":"Articles","previous_headings":"","what":"Advanced Features","title":"Getting Started with panna","text":"Beyond basic data loading player statistics, panna includes several advanced analytical pipelines: EPV (Expected Possession Value): Action-level player valuation Opta event data x/y coordinates. See ?calculate_action_epv. Estimated Skills: Bayesian decay-weighted skill estimation position-specific priors context adjustments. See ?estimate_player_skills ?player_skill_profile. Match Predictions: XGBoost Poisson/multinomial models match outcome prediction using Elo, rolling form, team-level skill features. See ?predict_match. pipelines built top Opta data require running RAPM/SPM pipeline first.","code":""},{"path":"https://peteowen1.github.io/panna/articles/getting-started.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next Steps","title":"Getting Started with panna","text":"Player Ratings - Learn RAPM SPM methodology Data Sources - Detailed comparison Opta, Understat, FBref Data Dictionary - Column definitions","code":""},{"path":"https://peteowen1.github.io/panna/articles/pipeline-walkthrough.html","id":"setup","dir":"Articles","previous_headings":"","what":"Setup","title":"Pipeline Walkthrough","text":"","code":"library(panna) set.seed(42)"},{"path":"https://peteowen1.github.io/panna/articles/pipeline-walkthrough.html","id":"step-1-create-synthetic-match-data","dir":"Articles","previous_headings":"","what":"Step 1: Create Synthetic Match Data","title":"Pipeline Walkthrough","text":"production, load data load_summary(), load_metadata(), etc. generate synthetic match data mirrors structure processed FBref data.","code":"n_matches <- 12 home_teams <- paste0(\"Team_\", LETTERS[1:6]) away_teams <- paste0(\"Team_\", LETTERS[7:12]) match_ids <- paste0(\"match_\", seq_len(n_matches))  # Match results with xG results <- data.frame(   match_id = match_ids,   home_team = rep(home_teams, length.out = n_matches),   away_team = rep(away_teams, length.out = n_matches),   home_score = sample(0:3, n_matches, replace = TRUE),   away_score = sample(0:3, n_matches, replace = TRUE),   home_xg = runif(n_matches, 0.5, 3),   away_xg = runif(n_matches, 0.5, 3),   stringsAsFactors = FALSE )  # Player pool: 50 players split across teams all_player_ids <- paste0(\"player_\", 1:50) all_player_names <- paste(\"Player\", 1:50)  # Generate lineups (11 starters per team per match) lineup_rows <- list() for (i in seq_len(n_matches)) {   home_idx <- sample(1:25, 11)   away_idx <- sample(26:50, 11)    for (j in seq_along(home_idx)) {     lineup_rows[[length(lineup_rows) + 1]] <- data.frame(       match_id = match_ids[i], player_id = all_player_ids[home_idx[j]],       player_name = all_player_names[home_idx[j]],       team = results$home_team[i], is_home = TRUE, is_starter = TRUE,       on_minute = 0, off_minute = 90, minutes = 90, stringsAsFactors = FALSE     )   }   for (j in seq_along(away_idx)) {     lineup_rows[[length(lineup_rows) + 1]] <- data.frame(       match_id = match_ids[i], player_id = all_player_ids[away_idx[j]],       player_name = all_player_names[away_idx[j]],       team = results$away_team[i], is_home = FALSE, is_starter = TRUE,       on_minute = 0, off_minute = 90, minutes = 90, stringsAsFactors = FALSE     )   } } lineups <- do.call(rbind, lineup_rows)  # Generate shots with xG shot_rows <- list() for (i in seq_len(n_matches)) {   n_shots <- sample(15:25, 1)   match_lineups <- lineups[lineups$match_id == match_ids[i], ]   shot_players <- match_lineups[sample(nrow(match_lineups), n_shots, replace = TRUE), ]   shot_rows[[i]] <- data.frame(     match_id = rep(match_ids[i], n_shots),     minute = sort(sample(1:90, n_shots, replace = TRUE)),     player_id = shot_players$player_id,     player_name = shot_players$player_name,     team = shot_players$team, is_home = shot_players$is_home,     xg = pmin(runif(n_shots, 0.02, 0.5), 0.95),     is_goal = rbinom(n_shots, 1, 0.1) == 1,     is_penalty = FALSE, is_own_goal = FALSE, stringsAsFactors = FALSE   ) } shooting <- do.call(rbind, shot_rows)  # Generate events (goals + substitutions) event_rows <- list() for (i in seq_len(n_matches)) {   goals <- shooting[shooting$match_id == match_ids[i] & shooting$is_goal, ]   if (nrow(goals) > 0) {     event_rows[[length(event_rows) + 1]] <- data.frame(       match_id = rep(match_ids[i], nrow(goals)),       team = goals$team, is_home = goals$is_home, event_type = \"goal\",       minute = goals$minute, player_name = goals$player_name,       is_penalty = FALSE, is_own_goal = FALSE, is_red_card = FALSE,       stringsAsFactors = FALSE     )   }   # 2 substitutions per match   starters <- lineups[lineups$match_id == match_ids[i] & lineups$is_starter, ]   subs <- starters[sample(nrow(starters), 2), ]   event_rows[[length(event_rows) + 1]] <- data.frame(     match_id = rep(match_ids[i], 2),     team = subs$team, is_home = subs$is_home, event_type = \"substitution\",     minute = sample(50:75, 2), player_name = subs$player_name,     is_penalty = FALSE, is_own_goal = FALSE, is_red_card = FALSE,     stringsAsFactors = FALSE   ) } events <- do.call(rbind, event_rows)  processed_data <- list(   results = results, lineups = lineups, shooting = shooting,   events = events, stats_summary = NULL )  cat(sprintf(\"Created %d matches with %d players\\n\", n_matches, length(all_player_ids))) #> Created 12 matches with 50 players"},{"path":"https://peteowen1.github.io/panna/articles/pipeline-walkthrough.html","id":"step-2-create-splints","dir":"Articles","previous_headings":"","what":"Step 2: Create Splints","title":"Pipeline Walkthrough","text":"Splints time segments lineup constant. Boundaries occur goals, substitutions, red cards, halftime. splint records non-penalty xG differential (npxGD) occurred segment.","code":"splint_data <- create_all_splints(processed_data, verbose = FALSE)  cat(sprintf(\"Splints: %d across %d matches\\n\",             nrow(splint_data$splints),             length(unique(splint_data$splints$match_id)))) #> Splints: 81 across 12 matches cat(sprintf(\"Player-splint assignments: %d\\n\", nrow(splint_data$players))) #> Player-splint assignments: 1782  # Example: first match's splints first_match <- splint_data$splints[splint_data$splints$match_id == \"match_1\", ] first_match[, c(\"splint_num\", \"start_minute\", \"end_minute\", \"duration\")] #>   splint_num start_minute end_minute duration #> 1          1            0         46       46 #> 2          2           46         64       18 #> 3          3           64         74       10 #> 4          4           74         75        1 #> 5          5           75         91       16"},{"path":"https://peteowen1.github.io/panna/articles/pipeline-walkthrough.html","id":"step-3-build-rapm-design-matrix","dir":"Articles","previous_headings":"","what":"Step 3: Build RAPM Design Matrix","title":"Pipeline Walkthrough","text":"design matrix encodes players field splint. splint generates two rows: one home team’s attacking perspective, one away team’s. Player columns split offense defense indicators.","code":"rapm_data <- create_rapm_design_matrix(splint_data, min_minutes = 45) #> [06:02:29] Processing 81 splints... #> [06:02:29] Including 50 players (>= 45 minutes) #> [06:02:29] Replacement pool: 0 players (< 45 minutes) #> [06:02:29] Building row data (vectorized)... #> [06:02:29] Building sparse matrix (vectorized)... #> [06:02:29] Replacement appearances: 0 offense, 0 defense #> [06:02:30] Design matrix: 162 rows, 100 player columns (+2 replacement), 5 covariates  # Add covariates to the player matrix for model fitting covariates <- cbind(   gd = rapm_data$row_data$gd,   is_home = as.numeric(rapm_data$row_data$home_away == \"home\"),   avg_min = rapm_data$row_data$avg_min ) rapm_data$X <- cbind(rapm_data$X_players, covariates) rapm_data$covariate_names <- colnames(covariates)  cat(sprintf(\"Design matrix: %d rows x %d columns\\n\",             nrow(rapm_data$X), ncol(rapm_data$X))) #> Design matrix: 162 rows x 105 columns cat(sprintf(\"Players included: %d (min 45 minutes)\\n\", rapm_data$n_players)) #> Players included: 50 (min 45 minutes) cat(sprintf(\"Target: %s\\n\", rapm_data$target_name)) #> Target: xgf90"},{"path":"https://peteowen1.github.io/panna/articles/pipeline-walkthrough.html","id":"step-4-fit-base-rapm","dir":"Articles","previous_headings":"","what":"Step 4: Fit Base RAPM","title":"Pipeline Walkthrough","text":"RAPM uses ridge regression (L2 penalty) estimate player’s offensive defensive impact. Cross-validation selects regularization strength. rapm column equals offense - defense. Positive offense means player helps create xG; negative defense means player prevents xG.","code":"rapm_model <- fit_rapm(rapm_data, parallel = FALSE, nfolds = 3) #> [06:02:30] Fitting RAPM: 162 observations, 105 columns #> [06:02:30] RAPM fit complete (xG-based). Lambda.min: 140.1164, R^2: 0.840 rapm_ratings <- extract_rapm_ratings(rapm_model)  cat(sprintf(\"RAPM ratings for %d players\\n\", nrow(rapm_ratings))) #> RAPM ratings for 51 players head(rapm_ratings[, c(\"player_name\", \"rapm\", \"offense\", \"defense\", \"total_minutes\")]) #>    player_name         rapm      offense       defense total_minutes #> 1    Player 10 1.243153e-37 1.013306e-37 -2.298464e-38           728 #> 23    Player 7 1.097749e-37 7.331287e-38 -3.646203e-38           364 #> 43   Player 30 1.083924e-37 9.399345e-39 -9.899306e-38           637 #> 7    Player 22 1.029150e-37 5.422111e-38 -4.869392e-38           455 #> 3    Player 23 8.216838e-38 1.415311e-37  5.936271e-38           455 #> 45    Player 8 7.091842e-38 5.257829e-38 -1.834014e-38           273 # Verify: rapm = offense - defense all.equal(rapm_ratings$rapm, rapm_ratings$offense - rapm_ratings$defense) #> [1] TRUE"},{"path":"https://peteowen1.github.io/panna/articles/pipeline-walkthrough.html","id":"step-5-fit-spm-model","dir":"Articles","previous_headings":"","what":"Step 5: Fit SPM Model","title":"Pipeline Walkthrough","text":"SPM (Statistical Plus-Minus) predicts RAPM box score statistics. captures relationship traditional stats -field impact, providing prior players limited RAPM sample size.","code":"# Create synthetic per-90 statistics n_players <- nrow(rapm_ratings) player_features <- data.frame(   player_id = rapm_ratings$player_id,   player_name = rapm_ratings$player_name,   total_minutes = rapm_ratings$total_minutes,   n_matches = pmax(1, round(rapm_ratings$total_minutes / 90)),   goals_p90 = runif(n_players, 0, 0.6),   npxg_p90 = runif(n_players, 0, 0.5),   xa_p90 = runif(n_players, 0, 0.4),   tackles_p90 = runif(n_players, 0.5, 3.5),   interceptions_p90 = runif(n_players, 0.3, 2),   progressive_passes_p90 = runif(n_players, 1, 7),   rapm = rapm_ratings$rapm,   stringsAsFactors = FALSE )  spm_model <- fit_spm_model(player_features, nfolds = 3) #> [06:02:30] Fitting SPM model with 6 predictors on 51 players #> [06:02:30]   Weighting by minutes (sqrt transform) #> [06:02:30] SPM fit complete. R-squared: 0.000 (weighted in-sample) spm_ratings <- calculate_spm_ratings(player_features, spm_model)  cat(sprintf(\"SPM predictions for %d players\\n\", nrow(spm_ratings))) #> SPM predictions for 51 players head(spm_ratings[, c(\"player_name\", \"spm\", \"total_minutes\")]) #>   player_name           spm total_minutes #> 1   Player 10 -3.089047e-40           728 #> 2    Player 7 -3.089047e-40           364 #> 3   Player 30 -3.089047e-40           637 #> 4   Player 22 -3.089047e-40           455 #> 5   Player 23 -3.089047e-40           455 #> 6    Player 8 -3.089047e-40           273"},{"path":"https://peteowen1.github.io/panna/articles/pipeline-walkthrough.html","id":"step-6-calculate-panna-rating","dir":"Articles","previous_headings":"","what":"Step 6: Calculate Panna Rating","title":"Pipeline Walkthrough","text":"final Panna rating combines RAPM SPM Bayesian prior. shrinks noisy RAPM estimates toward SPM predictions, providing stable ratings. formula: panna = spm_prior + deviation deviation much RAPM departs SPM prediction regularization.","code":"panna_result <- calculate_panna_rating(rapm_data, spm_ratings, lambda_prior = 1) #> [06:02:30] Fitting panna model with SPM prior... #> [06:02:30] Panna ratings calculated for 105 players panna_ratings <- panna_result$ratings  cat(sprintf(\"Panna ratings for %d players\\n\", nrow(panna_ratings))) #> Panna ratings for 105 players head(panna_ratings[, c(\"player_name\", \"panna\", \"spm_prior\", \"deviation\")]) #>     player_name     panna spm_prior deviation #> 103        <NA> 1.0218390         0 1.0218390 #> 93         <NA> 0.9517237         0 0.9517237 #> 31         <NA> 0.9412482         0 0.9412482 #> 21         <NA> 0.8199820         0 0.8199820 #> 14         <NA> 0.6106109         0 0.6106109 #> 59         <NA> 0.4946201         0 0.4946201 # Verify: panna = spm_prior + deviation all.equal(panna_ratings$panna, panna_ratings$spm_prior + panna_ratings$deviation) #> [1] TRUE"},{"path":"https://peteowen1.github.io/panna/articles/pipeline-walkthrough.html","id":"step-7-offensivedefensive-decomposition","dir":"Articles","previous_headings":"","what":"Step 7: Offensive/Defensive Decomposition","title":"Pipeline Walkthrough","text":"player’s overall rating can decomposed offensive defensive contributions, useful understanding player profiles.","code":"# Final rating summary summary_df <- data.frame(   player = panna_ratings$player_name,   panna = round(panna_ratings$panna, 3),   spm_prior = round(panna_ratings$spm_prior, 3),   deviation = round(panna_ratings$deviation, 3) )  # Top 5 and bottom 5 cat(\"Top 5 players:\\n\") #> Top 5 players: print(head(summary_df[order(-summary_df$panna), ], 5), row.names = FALSE) #>  player panna spm_prior deviation #>    <NA> 1.022         0     1.022 #>    <NA> 0.952         0     0.952 #>    <NA> 0.941         0     0.941 #>    <NA> 0.820         0     0.820 #>    <NA> 0.611         0     0.611  cat(\"\\nBottom 5 players:\\n\") #>  #> Bottom 5 players: print(tail(summary_df[order(-summary_df$panna), ], 5), row.names = FALSE) #>  player  panna spm_prior deviation #>    <NA> -0.475         0    -0.475 #>    <NA> -0.497         0    -0.497 #>    <NA> -0.563         0    -0.563 #>    <NA> -0.629         0    -0.629 #>    <NA> -0.855         0    -0.855"},{"path":"https://peteowen1.github.io/panna/articles/pipeline-walkthrough.html","id":"pipeline-summary","dir":"Articles","previous_headings":"","what":"Pipeline Summary","title":"Pipeline Walkthrough","text":"full pipeline: Data – Load match results, lineups, shooting, events Splints – Divide matches constant-lineup segments Design Matrix – Encode player presence sparse indicators RAPM – Ridge regression isolate player impact lineup context SPM – Predict RAPM box score stats (elastic net) Panna – Combine RAPM + SPM Bayesian shrinkage Key properties: - rapm = offense - defense (exact decomposition) - panna = spm_prior + deviation (exact decomposition) - Ratings units xG per 90 minutes /average - Stronger regularization (lambda_prior) pulls panna closer SPM","code":""},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Player Ratings Methodology","text":"Panna ratings measure player impact team performance using three-stage approach: RAPM (Regularized Adjusted Plus-Minus) - Lineup-based impact measurement SPM (Statistical Plus-Minus) - Box score prediction RAPM Panna - RAPM SPM Bayesian prior ratings expressed xG per 90 minutes /average.","code":""},{"path":[]},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"what-is-rapm","dir":"Articles","previous_headings":"Stage 1: RAPM (Regularized Adjusted Plus-Minus)","what":"What is RAPM?","title":"Player Ratings Methodology","text":"RAPM isolates individual player contributions analyzing lineup combinations. answers: “much Player X field change team’s expected goal differential?”","code":""},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"splints","dir":"Articles","previous_headings":"Stage 1: RAPM (Regularized Adjusted Plus-Minus)","what":"Splints","title":"Player Ratings Methodology","text":"RAPM uses “splints” - time segments lineup constant. Splint boundaries created : Goals scored Substitutions Red cards Halftime splint approximately 22 players (11 per team) records non-penalty xG differential (npxGD) segment.","code":"library(panna)  # After loading processed data... splints <- create_all_splints(processed_data)"},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"design-matrix","dir":"Articles","previous_headings":"Stage 1: RAPM (Regularized Adjusted Plus-Minus)","what":"Design Matrix","title":"Player Ratings Methodology","text":"RAPM model uses sparse design matrix : Rows: 2 per splint (one team’s attacking perspective) Player columns: playerX_off (offensive) playerX_def (defensive) indicators Covariates: Goal difference, average minute, home/away, player counts Target: xG per 90 minutes (xgf90)","code":"# Build the design matrix rapm_data <- create_rapm_design_matrix(splints)  # Components: # - X_players: Sparse player indicator matrix # - X_full: Player indicators + covariates # - y: Target variable (xgf90) # - weights: Splint duration / 90"},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"ridge-regression","dir":"Articles","previous_headings":"Stage 1: RAPM (Regularized Adjusted Plus-Minus)","what":"Ridge Regression","title":"Player Ratings Methodology","text":"RAPM uses ridge regression (L2 penalty) cross-validated lambda prevent overfitting:","code":"# Fit the model rapm_results <- fit_rapm(rapm_data)  # Extract player ratings ratings <- extract_panna_ratings(rapm_results)"},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"offensive-vs-defensive-ratings","dir":"Articles","previous_headings":"Stage 1: RAPM (Regularized Adjusted Plus-Minus)","what":"Offensive vs Defensive Ratings","title":"Player Ratings Methodology","text":"player gets two coefficients: Positive = helps create xG (good) Negative = hurts attack (bad) Positive = allows xG (bad) Negative = prevents xG (good)","code":""},{"path":[]},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"what-is-spm","dir":"Articles","previous_headings":"Stage 2: SPM (Statistical Plus-Minus)","what":"What is SPM?","title":"Player Ratings Methodology","text":"SPM predicts RAPM ratings box score statistics. answers: “RAPM expect given player’s traditional stats?” serves two purposes: Provides ratings players insufficient RAPM sample size Acts prior stabilize RAPM estimates","code":""},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"model","dir":"Articles","previous_headings":"Stage 2: SPM (Statistical Plus-Minus)","what":"Model","title":"Player Ratings Methodology","text":"SPM uses elastic net regression predict RAPM aggregated per-90 statistics:","code":"# Aggregate box score stats to per-90 rates player_stats <- aggregate_player_stats(processed_data)  # Fit SPM model spm_results <- fit_spm_model(player_stats, rapm_ratings)  # Get SPM ratings for all players spm_ratings <- calculate_spm_ratings(spm_results, player_stats)"},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"features-used","dir":"Articles","previous_headings":"Stage 2: SPM (Statistical Plus-Minus)","what":"Features Used","title":"Player Ratings Methodology","text":"SPM uses statistics like: Goals, assists, xG, xA per 90 Pass completion rates Tackles, interceptions, blocks per 90 Progressive passes carries per 90 Aerial duel win rates","code":""},{"path":[]},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"combining-rapm-and-spm","dir":"Articles","previous_headings":"Stage 3: Panna Rating","what":"Combining RAPM and SPM","title":"Player Ratings Methodology","text":"final Panna rating uses SPM Bayesian prior RAPM: approach: Shrinks noisy RAPM estimates toward SPM predictions Gives weight RAPM players minutes Provides stable ratings even players limited data","code":"# Fit RAPM with SPM prior (xRAPM) xrapm_results <- fit_rapm_with_prior(rapm_data, spm_ratings)  # Final ratings panna_ratings <- extract_panna_ratings(xrapm_results)"},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"final-rating-calculation","dir":"Articles","previous_headings":"Stage 3: Panna Rating","what":"Final Rating Calculation","title":"Player Ratings Methodology","text":": - Higher offense = better (creates xG) - Lower (negative) defense = better (prevents xG) - Higher overall panna = better player","code":"panna = offense - defense"},{"path":[]},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"example-elite-forward","dir":"Articles","previous_headings":"Interpreting Ratings","what":"Example: Elite Forward","title":"Player Ratings Methodology","text":"Interpretation: - Creates +0.15 xG/90 average attacking - Allows +0.02 xG/90 defending (slightly average) - Overall impact: +0.13 xG/90","code":"Player: Erling Haaland Offense: +0.15 Defense: +0.02 Panna: +0.13"},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"example-elite-defender","dir":"Articles","previous_headings":"Interpreting Ratings","what":"Example: Elite Defender","title":"Player Ratings Methodology","text":"Interpretation: - Creates -0.02 xG/90 offense (average) - Prevents 0.10 xG/90 defense (excellent) - Overall impact: +0.08 xG/90","code":"Player: Virgil van Dijk Offense: -0.02 Defense: -0.10 Panna: +0.08"},{"path":[]},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"running-the-full-pipeline","dir":"Articles","previous_headings":"","what":"Running the Full Pipeline","title":"Player Ratings Methodology","text":"complete rating pipeline:","code":"library(panna)  # 1. Load raw data raw_data <- load_all_data(leagues = \"ENG\", seasons = \"2024-2025\")  # 2. Process data processed_data <- process_raw_data(raw_data)  # 3. Create splints splints <- create_all_splints(processed_data)  # 4. Build RAPM matrix rapm_data <- create_rapm_design_matrix(splints)  # 5. Fit base RAPM rapm_results <- fit_rapm(rapm_data)  # 6. Fit SPM spm_results <- fit_spm_model(processed_data, rapm_results)  # 7. Fit xRAPM (RAPM with SPM prior) xrapm_results <- fit_rapm_with_prior(rapm_data, spm_results)  # 8. Extract final ratings panna_ratings <- extract_panna_ratings(xrapm_results)"},{"path":[]},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"sample-size","dir":"Articles","previous_headings":"Limitations","what":"Sample Size","title":"Player Ratings Methodology","text":"RAPM requires substantial playing time reliable estimates. Recommended minimums: Exploratory analysis: 450+ minutes Reliable estimates: 900+ minutes Stable comparisons: 1800+ minutes","code":""},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"context-dependence","dir":"Articles","previous_headings":"Limitations","what":"Context Dependence","title":"Player Ratings Methodology","text":"Ratings relative : - players shared field - opponents faced - leagues/seasons included model","code":""},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"position-blindness","dir":"Articles","previous_headings":"Limitations","what":"Position Blindness","title":"Player Ratings Methodology","text":"RAPM doesn’t know player positions. midfielder striker identical lineups identical ratings, even roles differ.","code":""},{"path":"https://peteowen1.github.io/panna/articles/player-ratings.html","id":"next-steps","dir":"Articles","previous_headings":"","what":"Next Steps","title":"Player Ratings Methodology","text":"Getting Started - Installation data loading Data Sources - FBref vs Opta vs Understat Data Dictionary - Column definitions pipeline stage","code":""},{"path":"https://peteowen1.github.io/panna/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Pete Owen. Author, maintainer, copyright holder.","code":""},{"path":"https://peteowen1.github.io/panna/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Owen P (2026). panna: Player Rating System Football Using RAPM SPM Methods. R package version 0.2.0, https://github.com/peteowen1/panna.","code":"@Manual{,   title = {panna: Player Rating System for Football Using RAPM and SPM Methods},   author = {Pete Owen},   year = {2026},   note = {R package version 0.2.0},   url = {https://github.com/peteowen1/panna}, }"},{"path":"https://peteowen1.github.io/panna/index.html","id":"panna","dir":"","previous_headings":"","what":"Player Rating System for Football Using RAPM and SPM Methods","title":"Player Rating System for Football Using RAPM and SPM Methods","text":"Player ratings football (soccer) using RAPM+SPM methodology. Calculates player impact team performance combining lineup-based analysis box score predictions.","code":""},{"path":"https://peteowen1.github.io/panna/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"Player Rating System for Football Using RAPM and SPM Methods","text":"panna implements three-stage rating system: RAPM (Regularized Adjusted Plus-Minus) - Measures player impact lineup data using ridge regression “splints” (time segments constant lineups) SPM (Statistical Plus-Minus) - Predicts RAPM box score statistics using elastic net Panna Rating - Combines RAPM SPM Bayesian prior stable ratings Ratings split offensive defensive components: - Offense: Positive = helps create xG (good) - Defense: Negative = prevents xG (good) - Overall: panna = offense - defense","code":""},{"path":"https://peteowen1.github.io/panna/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Player Rating System for Football Using RAPM and SPM Methods","text":"","code":"# Install from GitHub devtools::install_github(\"peteowen1/panna\")"},{"path":"https://peteowen1.github.io/panna/index.html","id":"quick-start","dir":"","previous_headings":"","what":"Quick Start","title":"Player Rating System for Football Using RAPM and SPM Methods","text":"","code":"library(panna)  # Load Opta player statistics (loads from GitHub automatically) opta_stats <- load_opta_stats(\"EPL\", \"2024-2025\")  # Get aggregated player stats player_stats <- player_opta_summary(  leagues = \"EPL\",  seasons = \"2024-2025\",  min_minutes = 900 )"},{"path":"https://peteowen1.github.io/panna/index.html","id":"data-sources","dir":"","previous_headings":"","what":"Data Sources","title":"Player Rating System for Football Using RAPM and SPM Methods","text":"package supports three football data providers:","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":[]},{"path":"https://peteowen1.github.io/panna/index.html","id":"data-loading","dir":"","previous_headings":"Key Functions","what":"Data Loading","title":"Player Rating System for Football Using RAPM and SPM Methods","text":"","code":"# Opta data (15 leagues, 263 columns per player) load_opta_stats(league, season)        # Player match stats load_opta_shots(league, season)        # Shot data load_opta_match_events(league, season) # All events with x/y coordinates load_opta_lineups(league, season)      # Lineup data load_opta_fixtures(league, season)     # Fixture/results data load_opta_xmetrics(league, season)     # Pre-computed xG/xA/xPass metrics load_opta_shot_events(league, season)  # Individual shots with coordinates load_opta_events(league, season)       # Goals, cards, substitutions load_opta_big5(season)                 # All Big 5 leagues at once  # Understat data load_understat_roster(league, season) load_understat_shots(league, season)  # FBref data (via pannadata) load_summary(league, season) load_passing(league, season) load_defense(league, season) load_shots()"},{"path":"https://peteowen1.github.io/panna/index.html","id":"player-statistics","dir":"","previous_headings":"Key Functions","what":"Player Statistics","title":"Player Rating System for Football Using RAPM and SPM Methods","text":"","code":"# Opta aggregated stats player_opta_summary(leagues, seasons, min_minutes) player_opta_passing(leagues, seasons, min_minutes) player_opta_defense(leagues, seasons, min_minutes) player_opta_possession(leagues, seasons, min_minutes) player_opta_keeper(leagues, seasons, min_minutes) player_opta_shots(leagues, seasons, min_minutes) player_opta_setpiece(leagues, seasons, min_minutes)  # Understat/FBref aggregated stats player_understat_summary(leagues, seasons, min_minutes) player_fbref_summary(leagues, seasons, min_minutes) player_fbref_passing(leagues, seasons, min_minutes)"},{"path":"https://peteowen1.github.io/panna/index.html","id":"rating-pipeline","dir":"","previous_headings":"Key Functions","what":"Rating Pipeline","title":"Player Rating System for Football Using RAPM and SPM Methods","text":"","code":"# Create splints from match data splints <- create_all_splints(processed_data)  # Build RAPM design matrix rapm_data <- create_rapm_design_matrix(splints)  # Fit RAPM model rapm_results <- fit_rapm(rapm_data)  # Extract ratings ratings <- extract_panna_ratings(rapm_results)"},{"path":[]},{"path":"https://peteowen1.github.io/panna/index.html","id":"epv-expected-possession-value","dir":"","previous_headings":"Key Functions > Advanced Features","what":"EPV (Expected Possession Value)","title":"Player Rating System for Football Using RAPM and SPM Methods","text":"Action-level player valuation Opta event data x/y coordinates:","code":"# Convert Opta events to SPADL format spadl <- convert_opta_to_spadl(match_events)  # Train/load models xg_model <- load_xg_model() epv_model <- load_epv_model()  # Build features and calculate action-level EPV features <- create_epv_features(spadl) epv_values <- calculate_action_epv(spadl, features, epv_model, xg_model) player_epv <- aggregate_player_epv(epv_values)"},{"path":"https://peteowen1.github.io/panna/index.html","id":"estimated-skills","dir":"","previous_headings":"Key Functions > Advanced Features","what":"Estimated Skills","title":"Player Rating System for Football Using RAPM and SPM Methods","text":"Bayesian decay-weighted skill estimation position-specific priors:","code":"# Estimate player skills from historical match data skills <- estimate_player_skills(player_stats, decay_params)  # Get a player's skill profile with percentiles profile <- player_skill_profile(\"Bukayo Saka\", skills = skills)  # Estimate skills at a specific date (for predictions) date_skills <- estimate_player_skills_at_date(player_stats, date = \"2025-01-15\")"},{"path":"https://peteowen1.github.io/panna/index.html","id":"match-predictions","dir":"","previous_headings":"Key Functions > Advanced Features","what":"Match Predictions","title":"Player Rating System for Football Using RAPM and SPM Methods","text":"XGBoost Poisson/multinomial models match outcome prediction:","code":"# Compute team Elo ratings elos <- compute_match_elos(match_results)  # Compute rolling form features rolling <- compute_team_rolling_features(match_results)  # Fit prediction models goals_model <- fit_goals_xgb(training_data) outcome_model <- fit_outcome_xgb(training_data)  # Predict a fixture prediction <- predict_match(fixture, goals_model, outcome_model)"},{"path":"https://peteowen1.github.io/panna/index.html","id":"documentation","dir":"","previous_headings":"","what":"Documentation","title":"Player Rating System for Football Using RAPM and SPM Methods","text":"Getting Started - Installation basic usage Player Ratings - RAPM SPM methodology Data Sources - Choosing right data source Data Dictionary - Column definitions pipeline stages","code":""},{"path":"https://peteowen1.github.io/panna/index.html","id":"related-packages","dir":"","previous_headings":"","what":"Related Packages","title":"Player Rating System for Football Using RAPM and SPM Methods","text":"package part pannaverse ecosystem: pannaverse - Monorepo container pannadata - Cached match data","code":""},{"path":"https://peteowen1.github.io/panna/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Player Rating System for Football Using RAPM and SPM Methods","text":"MIT","code":""},{"path":"https://peteowen1.github.io/panna/reference/BETA_PRIOR_ALPHA.html","id":null,"dir":"Reference","previous_headings":"","what":"Beta prior alpha for finishing modifier (shrinkage toward 1.0) — BETA_PRIOR_ALPHA","title":"Beta prior alpha for finishing modifier (shrinkage toward 1.0) — BETA_PRIOR_ALPHA","text":"Pseudocount added goals xG calculating finishing modifier. Formula: (goals + BETA_PRIOR_ALPHA) / (xG + BETA_PRIOR_ALPHA) shrinks extreme values toward 1.0.","code":""},{"path":"https://peteowen1.github.io/panna/reference/BETA_PRIOR_ALPHA.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Beta prior alpha for finishing modifier (shrinkage toward 1.0) — BETA_PRIOR_ALPHA","text":"","code":"BETA_PRIOR_ALPHA"},{"path":"https://peteowen1.github.io/panna/reference/BETA_PRIOR_ALPHA.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Beta prior alpha for finishing modifier (shrinkage toward 1.0) — BETA_PRIOR_ALPHA","text":"Integer value: 5","code":""},{"path":"https://peteowen1.github.io/panna/reference/BETA_PRIOR_ALPHA.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Beta prior alpha for finishing modifier (shrinkage toward 1.0) — BETA_PRIOR_ALPHA","text":"","code":"BETA_PRIOR_ALPHA #> [1] 5"},{"path":"https://peteowen1.github.io/panna/reference/CHAIN_TIME_GAP_SECONDS.html","id":null,"dir":"Reference","previous_headings":"","what":"Time gap threshold for chain breaks (seconds) — CHAIN_TIME_GAP_SECONDS","title":"Time gap threshold for chain breaks (seconds) — CHAIN_TIME_GAP_SECONDS","text":"Maximum gap seconds consecutive actions new possession chain started.","code":""},{"path":"https://peteowen1.github.io/panna/reference/CHAIN_TIME_GAP_SECONDS.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Time gap threshold for chain breaks (seconds) — CHAIN_TIME_GAP_SECONDS","text":"","code":"CHAIN_TIME_GAP_SECONDS"},{"path":"https://peteowen1.github.io/panna/reference/CHAIN_TIME_GAP_SECONDS.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Time gap threshold for chain breaks (seconds) — CHAIN_TIME_GAP_SECONDS","text":"Integer value: 30","code":""},{"path":"https://peteowen1.github.io/panna/reference/CHAIN_TIME_GAP_SECONDS.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Time gap threshold for chain breaks (seconds) — CHAIN_TIME_GAP_SECONDS","text":"","code":"CHAIN_TIME_GAP_SECONDS #> [1] 30"},{"path":"https://peteowen1.github.io/panna/reference/CONFIDENCE_LEVEL.html","id":null,"dir":"Reference","previous_headings":"","what":"Default confidence level for statistical intervals — CONFIDENCE_LEVEL","title":"Default confidence level for statistical intervals — CONFIDENCE_LEVEL","text":"Standard confidence level (95%) confidence intervals hypothesis tests throughout package.","code":""},{"path":"https://peteowen1.github.io/panna/reference/CONFIDENCE_LEVEL.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Default confidence level for statistical intervals — CONFIDENCE_LEVEL","text":"","code":"CONFIDENCE_LEVEL"},{"path":"https://peteowen1.github.io/panna/reference/CONFIDENCE_LEVEL.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Default confidence level for statistical intervals — CONFIDENCE_LEVEL","text":"Numeric value: 0.95","code":""},{"path":"https://peteowen1.github.io/panna/reference/CONFIDENCE_LEVEL.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Default confidence level for statistical intervals — CONFIDENCE_LEVEL","text":"","code":"CONFIDENCE_LEVEL #> [1] 0.95"},{"path":"https://peteowen1.github.io/panna/reference/DEFAULT_LEAGUE_STARTS.html","id":null,"dir":"Reference","previous_headings":"","what":"Default league ID starting points for 2025/2026 season — DEFAULT_LEAGUE_STARTS","title":"Default league ID starting points for 2025/2026 season — DEFAULT_LEAGUE_STARTS","text":"Understat match IDs interleaved across leagues. league occupies distinct ID band (~200-300 IDs apart). defaults verified via live scraping 2026-02-05.","code":""},{"path":"https://peteowen1.github.io/panna/reference/DEFAULT_LEAGUE_STARTS.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Default league ID starting points for 2025/2026 season — DEFAULT_LEAGUE_STARTS","text":"","code":"DEFAULT_LEAGUE_STARTS"},{"path":"https://peteowen1.github.io/panna/reference/DEFAULT_LEAGUE_STARTS.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Default league ID starting points for 2025/2026 season — DEFAULT_LEAGUE_STARTS","text":"object class list length 6.","code":""},{"path":"https://peteowen1.github.io/panna/reference/EPV_BASE_PASSER_SHARE.html","id":null,"dir":"Reference","previous_headings":"","what":"Base share for passer in successful pass credit split — EPV_BASE_PASSER_SHARE","title":"Base share for passer in successful pass credit split — EPV_BASE_PASSER_SHARE","text":"pass gains EPV, passer's base share. Adjusted upward difficulty: passer_share = base + adjustment * (1 - xpass).","code":""},{"path":"https://peteowen1.github.io/panna/reference/EPV_BASE_PASSER_SHARE.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Base share for passer in successful pass credit split — EPV_BASE_PASSER_SHARE","text":"","code":"EPV_BASE_PASSER_SHARE"},{"path":"https://peteowen1.github.io/panna/reference/EPV_BASE_PASSER_SHARE.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Base share for passer in successful pass credit split — EPV_BASE_PASSER_SHARE","text":"Numeric value: 0.5","code":""},{"path":"https://peteowen1.github.io/panna/reference/EPV_DEFENSIVE_BOOST.html","id":null,"dir":"Reference","previous_headings":"","what":"Defensive action credit boost multiplier — EPV_DEFENSIVE_BOOST","title":"Defensive action credit boost multiplier — EPV_DEFENSIVE_BOOST","text":"Multiplier applied defensive actions (clearance, interception, tackle, ball_recovery) better capture value. EPV deltas underestimate defensive contributions.","code":""},{"path":"https://peteowen1.github.io/panna/reference/EPV_DEFENSIVE_BOOST.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Defensive action credit boost multiplier — EPV_DEFENSIVE_BOOST","text":"","code":"EPV_DEFENSIVE_BOOST"},{"path":"https://peteowen1.github.io/panna/reference/EPV_DEFENSIVE_BOOST.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Defensive action credit boost multiplier — EPV_DEFENSIVE_BOOST","text":"Numeric value: 1.5","code":""},{"path":"https://peteowen1.github.io/panna/reference/EPV_PASS_DIFFICULTY_ADJUSTMENT.html","id":null,"dir":"Reference","previous_headings":"","what":"Difficulty adjustment for pass credit/blame — EPV_PASS_DIFFICULTY_ADJUSTMENT","title":"Difficulty adjustment for pass credit/blame — EPV_PASS_DIFFICULTY_ADJUSTMENT","text":"Scales passer credit/blame pass difficulty (1 - xpass credit, xpass blame). Higher values give credit hard passes.","code":""},{"path":"https://peteowen1.github.io/panna/reference/EPV_PASS_DIFFICULTY_ADJUSTMENT.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Difficulty adjustment for pass credit/blame — EPV_PASS_DIFFICULTY_ADJUSTMENT","text":"","code":"EPV_PASS_DIFFICULTY_ADJUSTMENT"},{"path":"https://peteowen1.github.io/panna/reference/EPV_PASS_DIFFICULTY_ADJUSTMENT.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Difficulty adjustment for pass credit/blame — EPV_PASS_DIFFICULTY_ADJUSTMENT","text":"Numeric value: 0.3","code":""},{"path":"https://peteowen1.github.io/panna/reference/EPV_POSITION_RAMP_X.html","id":null,"dir":"Reference","previous_headings":"","what":"X-coordinate where position scaling reaches 1.0 — EPV_POSITION_RAMP_X","title":"X-coordinate where position scaling reaches 1.0 — EPV_POSITION_RAMP_X","text":"Passes beyond x-coordinate get full credit. , credit scaled toward EPV_POSITION_SCALE_MIN.","code":""},{"path":"https://peteowen1.github.io/panna/reference/EPV_POSITION_RAMP_X.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"X-coordinate where position scaling reaches 1.0 — EPV_POSITION_RAMP_X","text":"","code":"EPV_POSITION_RAMP_X"},{"path":"https://peteowen1.github.io/panna/reference/EPV_POSITION_RAMP_X.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"X-coordinate where position scaling reaches 1.0 — EPV_POSITION_RAMP_X","text":"Numeric value: 40","code":""},{"path":"https://peteowen1.github.io/panna/reference/EPV_POSITION_SCALE_MIN.html","id":null,"dir":"Reference","previous_headings":"","what":"Minimum position scale for successful passes — EPV_POSITION_SCALE_MIN","title":"Minimum position scale for successful passes — EPV_POSITION_SCALE_MIN","text":"x=0 (goal), successful pass credit scaled factor. Ramps linearly 1.0 EPV_POSITION_RAMP_X.","code":""},{"path":"https://peteowen1.github.io/panna/reference/EPV_POSITION_SCALE_MIN.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Minimum position scale for successful passes — EPV_POSITION_SCALE_MIN","text":"","code":"EPV_POSITION_SCALE_MIN"},{"path":"https://peteowen1.github.io/panna/reference/EPV_POSITION_SCALE_MIN.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Minimum position scale for successful passes — EPV_POSITION_SCALE_MIN","text":"Numeric value: 0.3","code":""},{"path":"https://peteowen1.github.io/panna/reference/EPV_TURNOVER_BLAME_SHARE.html","id":null,"dir":"Reference","previous_headings":"","what":"Blame share for turnovers, saved shots, and duels — EPV_TURNOVER_BLAME_SHARE","title":"Blame share for turnovers, saved shots, and duels — EPV_TURNOVER_BLAME_SHARE","text":"turnover duel results negative EPV delta, fraction blame goes actor (rest receiver gains).","code":""},{"path":"https://peteowen1.github.io/panna/reference/EPV_TURNOVER_BLAME_SHARE.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Blame share for turnovers, saved shots, and duels — EPV_TURNOVER_BLAME_SHARE","text":"","code":"EPV_TURNOVER_BLAME_SHARE"},{"path":"https://peteowen1.github.io/panna/reference/EPV_TURNOVER_BLAME_SHARE.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Blame share for turnovers, saved shots, and duels — EPV_TURNOVER_BLAME_SHARE","text":"Numeric value: 0.5","code":""},{"path":"https://peteowen1.github.io/panna/reference/HALFTIME_MINUTE.html","id":null,"dir":"Reference","previous_headings":"","what":"Minute marking halftime (end of first half) — HALFTIME_MINUTE","title":"Minute marking halftime (end of first half) — HALFTIME_MINUTE","text":"minute first half ends. Used detecting first-half stoppage time events.","code":""},{"path":"https://peteowen1.github.io/panna/reference/HALFTIME_MINUTE.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Minute marking halftime (end of first half) — HALFTIME_MINUTE","text":"","code":"HALFTIME_MINUTE"},{"path":"https://peteowen1.github.io/panna/reference/HALFTIME_MINUTE.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Minute marking halftime (end of first half) — HALFTIME_MINUTE","text":"Integer value: 45","code":""},{"path":"https://peteowen1.github.io/panna/reference/HALFTIME_MINUTE.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Minute marking halftime (end of first half) — HALFTIME_MINUTE","text":"","code":"HALFTIME_MINUTE #> [1] 45"},{"path":"https://peteowen1.github.io/panna/reference/MINUTES_PER_MATCH.html","id":null,"dir":"Reference","previous_headings":"","what":"Minutes per regulation match — MINUTES_PER_MATCH","title":"Minutes per regulation match — MINUTES_PER_MATCH","text":"Standard duration regulation football match (90 minutes). Used per-90 rate calculations.","code":""},{"path":"https://peteowen1.github.io/panna/reference/MINUTES_PER_MATCH.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Minutes per regulation match — MINUTES_PER_MATCH","text":"","code":"MINUTES_PER_MATCH"},{"path":"https://peteowen1.github.io/panna/reference/MINUTES_PER_MATCH.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Minutes per regulation match — MINUTES_PER_MATCH","text":"Integer value: 90","code":""},{"path":"https://peteowen1.github.io/panna/reference/MINUTES_PER_MATCH.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Minutes per regulation match — MINUTES_PER_MATCH","text":"","code":"MINUTES_PER_MATCH #> [1] 90"},{"path":"https://peteowen1.github.io/panna/reference/MIN_GAMES_FOR_PADDING.html","id":null,"dir":"Reference","previous_headings":"","what":"Default minimum games for Bayesian padding full weight — MIN_GAMES_FOR_PADDING","title":"Default minimum games for Bayesian padding full weight — MIN_GAMES_FOR_PADDING","text":"Number games required player's statistics receive full weight Bayesian padding calculations. Players fewer games regressed toward population mean.","code":""},{"path":"https://peteowen1.github.io/panna/reference/MIN_GAMES_FOR_PADDING.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Default minimum games for Bayesian padding full weight — MIN_GAMES_FOR_PADDING","text":"","code":"MIN_GAMES_FOR_PADDING"},{"path":"https://peteowen1.github.io/panna/reference/MIN_GAMES_FOR_PADDING.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Default minimum games for Bayesian padding full weight — MIN_GAMES_FOR_PADDING","text":"Integer value: 10","code":""},{"path":"https://peteowen1.github.io/panna/reference/MIN_GAMES_FOR_PADDING.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Default minimum games for Bayesian padding full weight — MIN_GAMES_FOR_PADDING","text":"","code":"MIN_GAMES_FOR_PADDING #> [1] 10"},{"path":"https://peteowen1.github.io/panna/reference/MIN_MINUTES_FEATURES.html","id":null,"dir":"Reference","previous_headings":"","what":"Default minimum minutes for player feature matrix — MIN_MINUTES_FEATURES","title":"Default minimum minutes for player feature matrix — MIN_MINUTES_FEATURES","text":"Minimum minutes inclusion player feature matrices used SPM prediction Panna rating calculation.","code":""},{"path":"https://peteowen1.github.io/panna/reference/MIN_MINUTES_FEATURES.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Default minimum minutes for player feature matrix — MIN_MINUTES_FEATURES","text":"","code":"MIN_MINUTES_FEATURES"},{"path":"https://peteowen1.github.io/panna/reference/MIN_MINUTES_FEATURES.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Default minimum minutes for player feature matrix — MIN_MINUTES_FEATURES","text":"Integer value: 180","code":""},{"path":"https://peteowen1.github.io/panna/reference/MIN_MINUTES_FEATURES.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Default minimum minutes for player feature matrix — MIN_MINUTES_FEATURES","text":"","code":"MIN_MINUTES_FEATURES #> [1] 180"},{"path":"https://peteowen1.github.io/panna/reference/MIN_MINUTES_RAPM.html","id":null,"dir":"Reference","previous_headings":"","what":"Default minimum minutes for RAPM matrix inclusion — MIN_MINUTES_RAPM","title":"Default minimum minutes for RAPM matrix inclusion — MIN_MINUTES_RAPM","text":"Players must least many total minutes included RAPM design matrix individual players. Players threshold grouped \"replacement\" pool.","code":""},{"path":"https://peteowen1.github.io/panna/reference/MIN_MINUTES_RAPM.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Default minimum minutes for RAPM matrix inclusion — MIN_MINUTES_RAPM","text":"","code":"MIN_MINUTES_RAPM"},{"path":"https://peteowen1.github.io/panna/reference/MIN_MINUTES_RAPM.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Default minimum minutes for RAPM matrix inclusion — MIN_MINUTES_RAPM","text":"Integer value: 90","code":""},{"path":"https://peteowen1.github.io/panna/reference/MIN_MINUTES_RAPM.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Default minimum minutes for RAPM matrix inclusion — MIN_MINUTES_RAPM","text":"","code":"MIN_MINUTES_RAPM #> [1] 90"},{"path":"https://peteowen1.github.io/panna/reference/MIN_MINUTES_SPM.html","id":null,"dir":"Reference","previous_headings":"","what":"Default minimum minutes for SPM/player stats functions — MIN_MINUTES_SPM","title":"Default minimum minutes for SPM/player stats functions — MIN_MINUTES_SPM","text":"Minimum minutes threshold used player stats aggregation functions SPM model training. Higher RAPM threshold box score stats need sample size stability.","code":""},{"path":"https://peteowen1.github.io/panna/reference/MIN_MINUTES_SPM.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Default minimum minutes for SPM/player stats functions — MIN_MINUTES_SPM","text":"","code":"MIN_MINUTES_SPM"},{"path":"https://peteowen1.github.io/panna/reference/MIN_MINUTES_SPM.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Default minimum minutes for SPM/player stats functions — MIN_MINUTES_SPM","text":"Integer value: 450","code":""},{"path":"https://peteowen1.github.io/panna/reference/MIN_MINUTES_SPM.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Default minimum minutes for SPM/player stats functions — MIN_MINUTES_SPM","text":"","code":"MIN_MINUTES_SPM #> [1] 450"},{"path":"https://peteowen1.github.io/panna/reference/MIN_SEQUENCES_PER_MATCH.html","id":null,"dir":"Reference","previous_headings":"","what":"Minimum estimated sequences per team per match — MIN_SEQUENCES_PER_MATCH","title":"Minimum estimated sequences per team per match — MIN_SEQUENCES_PER_MATCH","text":"Lower bound sequence estimation. team least many sequences per match regardless touch count.","code":""},{"path":"https://peteowen1.github.io/panna/reference/MIN_SEQUENCES_PER_MATCH.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Minimum estimated sequences per team per match — MIN_SEQUENCES_PER_MATCH","text":"","code":"MIN_SEQUENCES_PER_MATCH"},{"path":"https://peteowen1.github.io/panna/reference/MIN_SEQUENCES_PER_MATCH.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Minimum estimated sequences per team per match — MIN_SEQUENCES_PER_MATCH","text":"Integer value: 20","code":""},{"path":"https://peteowen1.github.io/panna/reference/MIN_SEQUENCES_PER_MATCH.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Minimum estimated sequences per team per match — MIN_SEQUENCES_PER_MATCH","text":"","code":"MIN_SEQUENCES_PER_MATCH #> [1] 20"},{"path":"https://peteowen1.github.io/panna/reference/MIN_SHOTS_FOR_FINISHING.html","id":null,"dir":"Reference","previous_headings":"","what":"Default minimum shots for finishing modifier calculation — MIN_SHOTS_FOR_FINISHING","title":"Default minimum shots for finishing modifier calculation — MIN_SHOTS_FOR_FINISHING","text":"Minimum shots required player meaningful finishing modifier calculated. Players fewer shots get default modifier.","code":""},{"path":"https://peteowen1.github.io/panna/reference/MIN_SHOTS_FOR_FINISHING.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Default minimum shots for finishing modifier calculation — MIN_SHOTS_FOR_FINISHING","text":"","code":"MIN_SHOTS_FOR_FINISHING"},{"path":"https://peteowen1.github.io/panna/reference/MIN_SHOTS_FOR_FINISHING.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Default minimum shots for finishing modifier calculation — MIN_SHOTS_FOR_FINISHING","text":"Integer value: 20","code":""},{"path":"https://peteowen1.github.io/panna/reference/MIN_SHOTS_FOR_FINISHING.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Default minimum shots for finishing modifier calculation — MIN_SHOTS_FOR_FINISHING","text":"","code":"MIN_SHOTS_FOR_FINISHING #> [1] 20"},{"path":"https://peteowen1.github.io/panna/reference/MIN_WEIGHT_DURATION.html","id":null,"dir":"Reference","previous_headings":"","what":"Minimum weight threshold for duration-based weighting — MIN_WEIGHT_DURATION","title":"Minimum weight threshold for duration-based weighting — MIN_WEIGHT_DURATION","text":"Floor value weights prevent division small numbers RAPM weighting. Splints weighted minutes/90, minimum.","code":""},{"path":"https://peteowen1.github.io/panna/reference/MIN_WEIGHT_DURATION.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Minimum weight threshold for duration-based weighting — MIN_WEIGHT_DURATION","text":"","code":"MIN_WEIGHT_DURATION"},{"path":"https://peteowen1.github.io/panna/reference/MIN_WEIGHT_DURATION.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Minimum weight threshold for duration-based weighting — MIN_WEIGHT_DURATION","text":"Numeric value: 0.01","code":""},{"path":"https://peteowen1.github.io/panna/reference/MIN_WEIGHT_DURATION.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Minimum weight threshold for duration-based weighting — MIN_WEIGHT_DURATION","text":"","code":"MIN_WEIGHT_DURATION #> [1] 0.01"},{"path":"https://peteowen1.github.io/panna/reference/PENALTY_XG.html","id":null,"dir":"Reference","previous_headings":"","what":"Default penalty kick xG value — PENALTY_XG","title":"Default penalty kick xG value — PENALTY_XG","text":"xG override penalty kicks. Based historical penalty conversion rates (~76%). Used xG model trained without penalties.","code":""},{"path":"https://peteowen1.github.io/panna/reference/PENALTY_XG.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Default penalty kick xG value — PENALTY_XG","text":"","code":"PENALTY_XG"},{"path":"https://peteowen1.github.io/panna/reference/PENALTY_XG.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Default penalty kick xG value — PENALTY_XG","text":"Numeric value: 0.76","code":""},{"path":"https://peteowen1.github.io/panna/reference/PENALTY_XG.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Default penalty kick xG value — PENALTY_XG","text":"","code":"PENALTY_XG #> [1] 0.76"},{"path":"https://peteowen1.github.io/panna/reference/PLAYERS_PER_TEAM.html","id":null,"dir":"Reference","previous_headings":"","what":"Players per team in standard lineup — PLAYERS_PER_TEAM","title":"Players per team in standard lineup — PLAYERS_PER_TEAM","text":"Number players per team standard football lineup.","code":""},{"path":"https://peteowen1.github.io/panna/reference/PLAYERS_PER_TEAM.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Players per team in standard lineup — PLAYERS_PER_TEAM","text":"","code":"PLAYERS_PER_TEAM"},{"path":"https://peteowen1.github.io/panna/reference/PLAYERS_PER_TEAM.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Players per team in standard lineup — PLAYERS_PER_TEAM","text":"Integer value: 11","code":""},{"path":"https://peteowen1.github.io/panna/reference/PLAYERS_PER_TEAM.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Players per team in standard lineup — PLAYERS_PER_TEAM","text":"","code":"PLAYERS_PER_TEAM #> [1] 11"},{"path":"https://peteowen1.github.io/panna/reference/SIX_YARD_X_MIN.html","id":null,"dir":"Reference","previous_headings":"","what":"Six-yard box x threshold (attacking end) — SIX_YARD_X_MIN","title":"Six-yard box x threshold (attacking end) — SIX_YARD_X_MIN","text":"Minimum x coordinate attacking six-yard box 0-100 pitch.","code":""},{"path":"https://peteowen1.github.io/panna/reference/SIX_YARD_X_MIN.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Six-yard box x threshold (attacking end) — SIX_YARD_X_MIN","text":"","code":"SIX_YARD_X_MIN"},{"path":"https://peteowen1.github.io/panna/reference/SIX_YARD_X_MIN.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Six-yard box x threshold (attacking end) — SIX_YARD_X_MIN","text":"Numeric value: 94","code":""},{"path":"https://peteowen1.github.io/panna/reference/SIX_YARD_X_MIN.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Six-yard box x threshold (attacking end) — SIX_YARD_X_MIN","text":"","code":"SIX_YARD_X_MIN #> [1] 94"},{"path":"https://peteowen1.github.io/panna/reference/SIX_YARD_Y_MAX.html","id":null,"dir":"Reference","previous_headings":"","what":"Six-yard box y upper bound — SIX_YARD_Y_MAX","title":"Six-yard box y upper bound — SIX_YARD_Y_MAX","text":"Upper y boundary six-yard box 0-100 pitch.","code":""},{"path":"https://peteowen1.github.io/panna/reference/SIX_YARD_Y_MAX.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Six-yard box y upper bound — SIX_YARD_Y_MAX","text":"","code":"SIX_YARD_Y_MAX"},{"path":"https://peteowen1.github.io/panna/reference/SIX_YARD_Y_MAX.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Six-yard box y upper bound — SIX_YARD_Y_MAX","text":"Numeric value: 63","code":""},{"path":"https://peteowen1.github.io/panna/reference/SIX_YARD_Y_MAX.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Six-yard box y upper bound — SIX_YARD_Y_MAX","text":"","code":"SIX_YARD_Y_MAX #> [1] 63"},{"path":"https://peteowen1.github.io/panna/reference/SIX_YARD_Y_MIN.html","id":null,"dir":"Reference","previous_headings":"","what":"Six-yard box y lower bound — SIX_YARD_Y_MIN","title":"Six-yard box y lower bound — SIX_YARD_Y_MIN","text":"Lower y boundary six-yard box 0-100 pitch.","code":""},{"path":"https://peteowen1.github.io/panna/reference/SIX_YARD_Y_MIN.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Six-yard box y lower bound — SIX_YARD_Y_MIN","text":"","code":"SIX_YARD_Y_MIN"},{"path":"https://peteowen1.github.io/panna/reference/SIX_YARD_Y_MIN.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Six-yard box y lower bound — SIX_YARD_Y_MIN","text":"Numeric value: 37","code":""},{"path":"https://peteowen1.github.io/panna/reference/SIX_YARD_Y_MIN.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Six-yard box y lower bound — SIX_YARD_Y_MIN","text":"","code":"SIX_YARD_Y_MIN #> [1] 37"},{"path":"https://peteowen1.github.io/panna/reference/TOUCHES_PER_SEQUENCE.html","id":null,"dir":"Reference","previous_headings":"","what":"Average touches per possession sequence (approximation) — TOUCHES_PER_SEQUENCE","title":"Average touches per possession sequence (approximation) — TOUCHES_PER_SEQUENCE","text":"Rough approximation used estimate number possession sequences total touches. Used per-100-sequences rate calculations.","code":""},{"path":"https://peteowen1.github.io/panna/reference/TOUCHES_PER_SEQUENCE.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Average touches per possession sequence (approximation) — TOUCHES_PER_SEQUENCE","text":"","code":"TOUCHES_PER_SEQUENCE"},{"path":"https://peteowen1.github.io/panna/reference/TOUCHES_PER_SEQUENCE.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Average touches per possession sequence (approximation) — TOUCHES_PER_SEQUENCE","text":"Integer value: 5","code":""},{"path":"https://peteowen1.github.io/panna/reference/TOUCHES_PER_SEQUENCE.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Average touches per possession sequence (approximation) — TOUCHES_PER_SEQUENCE","text":"","code":"TOUCHES_PER_SEQUENCE #> [1] 5"},{"path":"https://peteowen1.github.io/panna/reference/XG_MAX.html","id":null,"dir":"Reference","previous_headings":"","what":"Maximum xG value (caps extreme predictions) — XG_MAX","title":"Maximum xG value (caps extreme predictions) — XG_MAX","text":"Ceiling xG predictions prevent overconfident predictions. Even penalty kicks open-net chances rarely exceed threshold.","code":""},{"path":"https://peteowen1.github.io/panna/reference/XG_MAX.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Maximum xG value (caps extreme predictions) — XG_MAX","text":"","code":"XG_MAX"},{"path":"https://peteowen1.github.io/panna/reference/XG_MAX.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Maximum xG value (caps extreme predictions) — XG_MAX","text":"Numeric value: 0.75","code":""},{"path":"https://peteowen1.github.io/panna/reference/XG_MAX.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Maximum xG value (caps extreme predictions) — XG_MAX","text":"","code":"XG_MAX #> [1] 0.75"},{"path":"https://peteowen1.github.io/panna/reference/XG_MIN.html","id":null,"dir":"Reference","previous_headings":"","what":"Minimum xG value (prevents 0 in log calculations) — XG_MIN","title":"Minimum xG value (prevents 0 in log calculations) — XG_MIN","text":"Floor xG predictions prevent issues log calculations overly confident predictions 0 probability.","code":""},{"path":"https://peteowen1.github.io/panna/reference/XG_MIN.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Minimum xG value (prevents 0 in log calculations) — XG_MIN","text":"","code":"XG_MIN"},{"path":"https://peteowen1.github.io/panna/reference/XG_MIN.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Minimum xG value (prevents 0 in log calculations) — XG_MIN","text":"Numeric value: 0.01","code":""},{"path":"https://peteowen1.github.io/panna/reference/XG_MIN.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Minimum xG value (prevents 0 in log calculations) — XG_MIN","text":"","code":"XG_MIN #> [1] 0.01"},{"path":"https://peteowen1.github.io/panna/reference/add_delay_jitter.html","id":null,"dir":"Reference","previous_headings":"","what":"Add random jitter to delay — add_delay_jitter","title":"Add random jitter to delay — add_delay_jitter","text":"Returns base delay plus random jitter appear human.","code":""},{"path":"https://peteowen1.github.io/panna/reference/add_delay_jitter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add random jitter to delay — add_delay_jitter","text":"","code":"add_delay_jitter(base_delay, jitter_pct = 0.3)"},{"path":"https://peteowen1.github.io/panna/reference/add_delay_jitter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add random jitter to delay — add_delay_jitter","text":"base_delay Base delay seconds jitter_pct Percentage jitter (default 0.3 = +/- 30%)","code":""},{"path":"https://peteowen1.github.io/panna/reference/add_delay_jitter.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add random jitter to delay — add_delay_jitter","text":"Delay seconds jitter applied","code":""},{"path":"https://peteowen1.github.io/panna/reference/add_next_chain_outcome.html","id":null,"dir":"Reference","previous_headings":"","what":"Add Opponent's Next Chain Outcome — add_next_chain_outcome","title":"Add Opponent's Next Chain Outcome — add_next_chain_outcome","text":"EPV conceding model, need know opponent scores next possession lose ball. Optimized data.table.","code":""},{"path":"https://peteowen1.github.io/panna/reference/add_next_chain_outcome.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add Opponent's Next Chain Outcome — add_next_chain_outcome","text":"","code":"add_next_chain_outcome(chain_outcomes)"},{"path":"https://peteowen1.github.io/panna/reference/add_next_chain_outcome.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add Opponent's Next Chain Outcome — add_next_chain_outcome","text":"chain_outcomes Data frame classify_chain_outcomes()","code":""},{"path":"https://peteowen1.github.io/panna/reference/add_next_chain_outcome.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add Opponent's Next Chain Outcome — add_next_chain_outcome","text":"Chain outcomes next_chain_goal column added","code":""},{"path":"https://peteowen1.github.io/panna/reference/add_possession_velocity.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Possession Velocity — add_possession_velocity","title":"Calculate Possession Velocity — add_possession_velocity","text":"Computes speed ball progression possession chain. Optimized data.table.","code":""},{"path":"https://peteowen1.github.io/panna/reference/add_possession_velocity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Possession Velocity — add_possession_velocity","text":"","code":"add_possession_velocity(spadl_with_chains)"},{"path":"https://peteowen1.github.io/panna/reference/add_possession_velocity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Possession Velocity — add_possession_velocity","text":"spadl_with_chains SPADL actions chain information","code":""},{"path":"https://peteowen1.github.io/panna/reference/add_possession_velocity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Possession Velocity — add_possession_velocity","text":"SPADL actions velocity features added","code":""},{"path":"https://peteowen1.github.io/panna/reference/add_season_column.html","id":null,"dir":"Reference","previous_headings":"","what":"Add season_end_year column to a data frame based on match_url lookup — add_season_column","title":"Add season_end_year column to a data frame based on match_url lookup — add_season_column","text":"Joins season information match results data frame match_url.","code":""},{"path":"https://peteowen1.github.io/panna/reference/add_season_column.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add season_end_year column to a data frame based on match_url lookup — add_season_column","text":"","code":"add_season_column(data, match_season_lookup)"},{"path":"https://peteowen1.github.io/panna/reference/add_season_column.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add season_end_year column to a data frame based on match_url lookup — add_season_column","text":"data Data frame add season match_season_lookup Named vector mapping match_url season_end_year","code":""},{"path":"https://peteowen1.github.io/panna/reference/add_season_column.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add season_end_year column to a data frame based on match_url lookup — add_season_column","text":"Data frame season_end_year column added","code":""},{"path":"https://peteowen1.github.io/panna/reference/add_xg_to_spadl.html","id":null,"dir":"Reference","previous_headings":"","what":"Add xG to SPADL Actions — add_xg_to_spadl","title":"Add xG to SPADL Actions — add_xg_to_spadl","text":"Adds xG predictions shot actions SPADL data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/add_xg_to_spadl.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add xG to SPADL Actions — add_xg_to_spadl","text":"","code":"add_xg_to_spadl(spadl_actions, xg_model)"},{"path":"https://peteowen1.github.io/panna/reference/add_xg_to_spadl.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add xG to SPADL Actions — add_xg_to_spadl","text":"spadl_actions SPADL actions data frame xg_model Fitted xG model","code":""},{"path":"https://peteowen1.github.io/panna/reference/add_xg_to_spadl.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add xG to SPADL Actions — add_xg_to_spadl","text":"SPADL actions xg column added shots","code":""},{"path":"https://peteowen1.github.io/panna/reference/add_xpass_to_spadl.html","id":null,"dir":"Reference","previous_headings":"","what":"Add xPass to SPADL Actions — add_xpass_to_spadl","title":"Add xPass to SPADL Actions — add_xpass_to_spadl","text":"Adds pass completion probability pass actions SPADL data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/add_xpass_to_spadl.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add xPass to SPADL Actions — add_xpass_to_spadl","text":"","code":"add_xpass_to_spadl(spadl_actions, xpass_model)"},{"path":"https://peteowen1.github.io/panna/reference/add_xpass_to_spadl.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add xPass to SPADL Actions — add_xpass_to_spadl","text":"spadl_actions SPADL actions data frame xpass_model Fitted xPass model","code":""},{"path":"https://peteowen1.github.io/panna/reference/add_xpass_to_spadl.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add xPass to SPADL Actions — add_xpass_to_spadl","text":"SPADL actions xpass column added passes","code":""},{"path":"https://peteowen1.github.io/panna/reference/adjust_match_stats_for_context.html","id":null,"dir":"Reference","previous_headings":"","what":"Adjust match stats for opponent quality, venue, and league level — adjust_match_stats_for_context","title":"Adjust match stats for opponent quality, venue, and league level — adjust_match_stats_for_context","text":"Normalizes raw match-level stats account contextual factors enter skill estimation pipeline. Applying adjustments decay-weighting produces cleaner skill estimates.","code":""},{"path":"https://peteowen1.github.io/panna/reference/adjust_match_stats_for_context.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Adjust match stats for opponent quality, venue, and league level — adjust_match_stats_for_context","text":"","code":"adjust_match_stats_for_context(   match_stats,   elo_ratings = NULL,   adjust_opponent = TRUE,   adjust_venue = TRUE,   adjust_league = TRUE,   big5_leagues = c(\"EPL\", \"La_Liga\", \"Bundesliga\", \"Serie_A\", \"Ligue_1\", \"ENG\", \"ESP\",     \"GER\", \"ITA\", \"FRA\") )"},{"path":"https://peteowen1.github.io/panna/reference/adjust_match_stats_for_context.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Adjust match stats for opponent quality, venue, and league level — adjust_match_stats_for_context","text":"match_stats data.table compute_match_level_opta_stats() columns: match_id, player_id, team_name, opponent_team, is_home, competition, total_minutes, stat columns. elo_ratings Optional named numeric vector team Elo ratings. NULL, opponent adjustment skipped. adjust_opponent Logical, apply opponent strength adjustment (default TRUE). adjust_venue Logical, apply home/away adjustment (default TRUE). adjust_league Logical, apply cross-league adjustment (default TRUE). big5_leagues Character vector Big 5 league codes reference level.","code":""},{"path":"https://peteowen1.github.io/panna/reference/adjust_match_stats_for_context.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Adjust match stats for opponent quality, venue, and league level — adjust_match_stats_for_context","text":"input data.table stat columns adjusted place.","code":""},{"path":"https://peteowen1.github.io/panna/reference/adjust_match_stats_for_context.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Adjust match stats for opponent quality, venue, and league level — adjust_match_stats_for_context","text":"Three adjustments applied multiplicatively: Opponent strength: Offensive stats scaled league_avg_elo / opponent_elo. Harder opponents inflate stats; easier opponents deflate . Home/away: Per-stat home/away differential computed full dataset. Away stats multiplied home-equivalent. League quality: Cross-league normalization using Big 5 average reference level.","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_cached_matches.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate cached match data — aggregate_cached_matches","title":"Aggregate cached match data — aggregate_cached_matches","text":"Combines cached data table type single data frame. Uses parquet files available (fast), falls back RDS files (slower).","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_cached_matches.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate cached match data — aggregate_cached_matches","text":"","code":"aggregate_cached_matches(   table_type,   league = NULL,   season = NULL,   prefer_parquet = TRUE,   source = c(\"local\", \"remote\") )"},{"path":"https://peteowen1.github.io/panna/reference/aggregate_cached_matches.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate cached match data — aggregate_cached_matches","text":"table_type Type table aggregate (e.g., \"summary\", \"shots\") league Optional league filter (e.g., \"ENG\") season Optional season filter (e.g., \"2024-2025\") prefer_parquet TRUE (default), use parquet available source \"local\" (default) \"remote\" download GitHub releases","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_cached_matches.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate cached match data — aggregate_cached_matches","text":"Combined data frame, NULL cached data","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_cached_matches.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Aggregate cached match data — aggregate_cached_matches","text":"","code":"if (FALSE) { # \\dontrun{ # Load all cached summary stats (uses parquet if available) all_summary <- aggregate_cached_matches(\"summary\")  # Load only Premier League 2024-2025 pl_summary <- aggregate_cached_matches(\"summary\", league = \"ENG\",                                         season = \"2024-2025\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/aggregate_lineup_ratings.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate Player Ratings to Team Level — aggregate_lineup_ratings","title":"Aggregate Player Ratings to Team Level — aggregate_lineup_ratings","text":"given match, takes starting XI lineups joins seasonal player ratings (xRAPM/SPM/RAPM). Computes team-level summary statistics including sum, mean, max, min, stdev, goalkeeper, positional group averages.","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_lineup_ratings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate Player Ratings to Team Level — aggregate_lineup_ratings","text":"","code":"aggregate_lineup_ratings(   lineups,   ratings,   season_end_year,   prev_season_decay = 0.8 )"},{"path":"https://peteowen1.github.io/panna/reference/aggregate_lineup_ratings.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate Player Ratings to Team Level — aggregate_lineup_ratings","text":"lineups Data frame match lineups player_name, team_name, team_position (home/away), position, is_starter columns ratings Data frame seasonal player ratings player_name, season_end_year, panna, offense, defense, spm columns season_end_year Numeric season end year rating lookup prev_season_decay Decay factor previous season fallback (default 0.8)","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_lineup_ratings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate Player Ratings to Team Level — aggregate_lineup_ratings","text":"Data frame one row per match, team-level rating features","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_lineup_skills.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate Player Skills to Team-Level Features — aggregate_lineup_skills","title":"Aggregate Player Skills to Team-Level Features — aggregate_lineup_skills","text":"match, takes starting XI skill estimates, aggregates key skills team level. Produces granular skill features (e.g., team average shooting skill, team average tackling skill) give XGBoost model richer signal beyond single panna rating.","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_lineup_skills.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate Player Skills to Team-Level Features — aggregate_lineup_skills","text":"","code":"aggregate_lineup_skills(   lineups,   skill_estimates,   attacking_stats = NULL,   defensive_stats = NULL )"},{"path":"https://peteowen1.github.io/panna/reference/aggregate_lineup_skills.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate Player Skills to Team-Level Features — aggregate_lineup_skills","text":"lineups Data frame match lineups player_name, team_name, team_position (home/away), position, is_starter columns skill_estimates Data frame estimate_player_skills() player_name per-stat skill columns (e.g., goals_p90, tackles_won_p90) attacking_stats Character vector attacking skill columns aggregate defensive_stats Character vector defensive skill columns aggregate","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_lineup_skills.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate Player Skills to Team-Level Features — aggregate_lineup_skills","text":"Data frame one row per match, team-level skill features","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_opta_stats.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate Opta player statistics to per-90 rates — aggregate_opta_stats","title":"Aggregate Opta player statistics to per-90 rates — aggregate_opta_stats","text":"Combines match-level Opta statistics per-90-minute rates player. Creates comprehensive features SPM modeling Opta's 263 columns.","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_opta_stats.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate Opta player statistics to per-90 rates — aggregate_opta_stats","text":"","code":"aggregate_opta_stats(opta_stats, min_minutes = 450)"},{"path":"https://peteowen1.github.io/panna/reference/aggregate_opta_stats.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate Opta player statistics to per-90 rates — aggregate_opta_stats","text":"opta_stats Data frame load_opta_stats() min_minutes Minimum total minutes inclusion (default 450)","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_opta_stats.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate Opta player statistics to per-90 rates — aggregate_opta_stats","text":"Data frame per-90 rates player","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_opta_stats.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Aggregate Opta player statistics to per-90 rates — aggregate_opta_stats","text":"","code":"if (FALSE) { # \\dontrun{ opta_stats <- load_opta_stats(\"ENG\", \"2024-2025\") player_features <- aggregate_opta_stats(opta_stats, min_minutes = 450) } # }"},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate player statistics with optional team grouping — aggregate_player_data","title":"Aggregate player statistics with optional team grouping — aggregate_player_data","text":"Common aggregation pattern player stats functions. Aggregates columns player (optionally team), adding frequent team grouping team.","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate player statistics with optional team grouping — aggregate_player_data","text":"","code":"aggregate_player_data(   data,   agg_cols,   by_team = FALSE,   player_col = \"player\",   team_col = \"team\" )"},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate player statistics with optional team grouping — aggregate_player_data","text":"data Data frame player-level data agg_cols Named list names output column names values expressions aggregate (strings column names) by_team Logical. TRUE, group player team. FALSE, group player add frequent team. player_col Name player column (default \"player\") team_col Name team column (default \"team\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate player statistics with optional team grouping — aggregate_player_data","text":"Aggregated data frame player, team, aggregated columns","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Aggregate player statistics with optional team grouping — aggregate_player_data","text":"","code":"if (FALSE) { # \\dontrun{ # Aggregate goals and assists aggregate_player_data(   data = match_data,   agg_cols = list(matches = \"1\", goals = \"gls\", assists = \"ast\"),   by_team = FALSE ) } # }"},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_epv.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate Player EPV Metrics — aggregate_player_epv","title":"Aggregate Player EPV Metrics — aggregate_player_epv","text":"Summarizes EPV player, calculating total per-90 metrics. Properly attributes receiver credit actual receivers.","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_epv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate Player EPV Metrics — aggregate_player_epv","text":"","code":"aggregate_player_epv(spadl_with_epv, lineups = NULL, min_minutes = 450)"},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_epv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate Player EPV Metrics — aggregate_player_epv","text":"spadl_with_epv SPADL actions EPV credit columns lineups Optional lineup data minutes played min_minutes Minimum minutes inclusion (default 450)","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_epv.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate Player EPV Metrics — aggregate_player_epv","text":"Data frame player EPV statistics: player_id, player_name, team_id n_actions, total_minutes (available) epv_total: Total EPV contribution epv_p90: EPV per 90 minutes epv_as_actor: EPV actions (player_credit) epv_as_receiver: EPV receiving (successful passes + turnovers won) epv_duel_blame: EPV losing duels (negative, summed opponent_credit) epv_passing, epv_shooting, epv_dribbling, epv_defending","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_season_stats.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate player season stats — aggregate_player_season_stats","title":"Aggregate player season stats — aggregate_player_season_stats","text":"Combines match-level stats season aggregates.","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_season_stats.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate player season stats — aggregate_player_season_stats","text":"","code":"aggregate_player_season_stats(match_stats, rate_cols = NULL, count_cols = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_season_stats.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate player season stats — aggregate_player_season_stats","text":"match_stats Data frame match-level player stats rate_cols Columns rate statistics count_cols Columns counting statistics","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_season_stats.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate player season stats — aggregate_player_season_stats","text":"Data frame season-level player stats","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_stats.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate player statistics to per-90 rates — aggregate_player_stats","title":"Aggregate player statistics to per-90 rates — aggregate_player_stats","text":"Combines match-level statistics per-90-minute rates player. Extracts comprehensive features available stat tables SPM modeling. Includes derived features like success rates ratios.","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_stats.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate player statistics to per-90 rates — aggregate_player_stats","text":"","code":"aggregate_player_stats(   stats_summary,   stats_passing = NULL,   stats_defense = NULL,   stats_possession = NULL,   stats_misc = NULL,   stats_passing_types = NULL,   stats_keeper = NULL,   min_minutes = 450 )"},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_stats.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate player statistics to per-90 rates — aggregate_player_stats","text":"stats_summary Summary stats data frame process_all_data stats_passing Passing stats data frame (optional) stats_defense Defense stats data frame (optional) stats_possession Possession stats data frame (optional) stats_misc Miscellaneous stats data frame (optional) - fouls, aerials, recoveries stats_passing_types Passing types data frame (optional) - balls, switches stats_keeper Goalkeeper stats data frame (optional) - saves, post-shot xG min_minutes Minimum total minutes inclusion","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_stats.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate player statistics to per-90 rates — aggregate_player_stats","text":"Data frame per-90 rates player","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_xmetrics.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate Player-Level xG/xA/xPass Metrics — aggregate_player_xmetrics","title":"Aggregate Player-Level xG/xA/xPass Metrics — aggregate_player_xmetrics","text":"Aggregates SPADL-level predictions player-season totals. Produces shooting, assisting, passing metrics per player.","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_xmetrics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate Player-Level xG/xA/xPass Metrics — aggregate_player_xmetrics","text":"","code":"aggregate_player_xmetrics(spadl, lineups, min_minutes = 0)"},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_xmetrics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate Player-Level xG/xA/xPass Metrics — aggregate_player_xmetrics","text":"spadl SPADL actions data frame xg, xa, xpass columns. lineups Lineup data load_opta_lineups() minutes played. min_minutes Minimum minutes inclusion (default 0, filter).","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_player_xmetrics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate Player-Level xG/xA/xPass Metrics — aggregate_player_xmetrics","text":"Data frame one row per player containing: Identity: player_id, player_name, team_name, minutes Shooting: shots, goals, xg, npxg, goals_minus_xg, xg_per90 Assisting: key_passes, assists, xa, xa_per90 Passing: passes_attempted, passes_completed, sum_xpass, xpass_overperformance, xpass_avg","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_rapm_by_team.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate RAPM by team — aggregate_rapm_by_team","title":"Aggregate RAPM by team — aggregate_rapm_by_team","text":"Summarizes player ratings team level.","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_rapm_by_team.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate RAPM by team — aggregate_rapm_by_team","text":"","code":"aggregate_rapm_by_team(ratings, player_data)"},{"path":"https://peteowen1.github.io/panna/reference/aggregate_rapm_by_team.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate RAPM by team — aggregate_rapm_by_team","text":"ratings Data frame player ratings player_data Data frame linking players teams","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_rapm_by_team.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate RAPM by team — aggregate_rapm_by_team","text":"Data frame team-level summaries","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_skills_for_spm.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate skills for SPM input (one row per player per season) — aggregate_skills_for_spm","title":"Aggregate skills for SPM input (one row per player per season) — aggregate_skills_for_spm","text":"Produces data frame format aggregate_opta_stats(), row one player's estimated skill profile end season. drop-replacement SPM input.","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_skills_for_spm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate skills for SPM input (one row per player per season) — aggregate_skills_for_spm","text":"","code":"aggregate_skills_for_spm(   match_stats,   decay_params = NULL,   season_end_dates = NULL,   min_minutes = 450,   min_weighted_90s = 5 )"},{"path":"https://peteowen1.github.io/panna/reference/aggregate_skills_for_spm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate skills for SPM input (one row per player per season) — aggregate_skills_for_spm","text":"match_stats data.table compute_match_level_opta_stats(). decay_params Decay parameters (get_default_decay_params() optimized). season_end_dates Named list mapping season_end_year (integer) Date. Skills estimated date season. NULL, uses June 30 year. min_minutes Minimum total minutes season inclusion. min_weighted_90s Minimum weighted 90s regression threshold.","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_skills_for_spm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate skills for SPM input (one row per player per season) — aggregate_skills_for_spm","text":"data.table one row per player per season_end_year, containing skill estimates stats plus identity/context columns. Compatible fit_spm_opta().","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_understat_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate cached Understat data — aggregate_understat_data","title":"Aggregate cached Understat data — aggregate_understat_data","text":"Loads combines cached parquet files table type.","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_understat_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate cached Understat data — aggregate_understat_data","text":"","code":"aggregate_understat_data(table_type, league = NULL, season = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/aggregate_understat_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate cached Understat data — aggregate_understat_data","text":"table_type Table type (metadata, roster, shots) league Optional league filter season Optional season filter","code":""},{"path":"https://peteowen1.github.io/panna/reference/aggregate_understat_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate cached Understat data — aggregate_understat_data","text":"Combined data frame","code":""},{"path":"https://peteowen1.github.io/panna/reference/apply_bayesian_padding.html","id":null,"dir":"Reference","previous_headings":"","what":"Apply Bayesian padding to statistics — apply_bayesian_padding","title":"Apply Bayesian padding to statistics — apply_bayesian_padding","text":"Regresses statistics toward population mean players games. prevents extreme ratings small sample sizes.","code":""},{"path":"https://peteowen1.github.io/panna/reference/apply_bayesian_padding.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Apply Bayesian padding to statistics — apply_bayesian_padding","text":"","code":"apply_bayesian_padding(   player_stats,   stat_cols,   min_games = 10,   weight_col = \"n_games\" )"},{"path":"https://peteowen1.github.io/panna/reference/apply_bayesian_padding.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Apply Bayesian padding to statistics — apply_bayesian_padding","text":"player_stats Data frame player statistics stat_cols Character vector columns pad min_games Games required full weight (default 10) weight_col Column containing games/minutes played","code":""},{"path":"https://peteowen1.github.io/panna/reference/apply_bayesian_padding.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Apply Bayesian padding to statistics — apply_bayesian_padding","text":"Data frame Bayesian-padded statistics","code":""},{"path":"https://peteowen1.github.io/panna/reference/assign_epv_credit.html","id":null,"dir":"Reference","previous_headings":"","what":"Assign EPV Credit with Turnover Handling — assign_epv_credit","title":"Assign EPV Credit with Turnover Handling — assign_epv_credit","text":"Assigns EPV credit/blame players. turnovers (possession changes), splits value player lost ball gained . merged duels (Aerials, Take vs Tackle), assigns zero-sum credit winner gain = loser loss.","code":""},{"path":"https://peteowen1.github.io/panna/reference/assign_epv_credit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assign EPV Credit with Turnover Handling — assign_epv_credit","text":"","code":"assign_epv_credit(spadl_with_epv, xpass_model = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/assign_epv_credit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Assign EPV Credit with Turnover Handling — assign_epv_credit","text":"spadl_with_epv SPADL actions EPV values calculate_action_epv() xpass_model Optional xPass model pass difficulty weighting","code":""},{"path":"https://peteowen1.github.io/panna/reference/assign_epv_credit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Assign EPV Credit with Turnover Handling — assign_epv_credit","text":"SPADL actions credit columns added: player_credit: EPV credit acting player receiver_credit: EPV credit receiver (turnovers, positive) opponent_credit: EPV credit duel loser (negative, via opponent_player_id) xpass: Pass completion probability (passes)","code":""},{"path":"https://peteowen1.github.io/panna/reference/assign_pass_credit.html","id":null,"dir":"Reference","previous_headings":"","what":"Deprecated: Assign Pass Credit — assign_pass_credit","title":"Deprecated: Assign Pass Credit — assign_pass_credit","text":"Legacy function backward compatibility. Use assign_epv_credit() instead proper EPV credit assignment.","code":""},{"path":"https://peteowen1.github.io/panna/reference/assign_pass_credit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Deprecated: Assign Pass Credit — assign_pass_credit","text":"","code":"assign_pass_credit(spadl_with_epv, xpass_model)"},{"path":"https://peteowen1.github.io/panna/reference/assign_pass_credit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Deprecated: Assign Pass Credit — assign_pass_credit","text":"spadl_with_epv SPADL EPV xpass_model xPass model","code":""},{"path":"https://peteowen1.github.io/panna/reference/assign_pass_credit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Deprecated: Assign Pass Credit — assign_pass_credit","text":"SPADL credit columns","code":""},{"path":[]},{"path":"https://peteowen1.github.io/panna/reference/assign_players_to_splints.html","id":null,"dir":"Reference","previous_headings":"","what":"Assign players to splints — assign_players_to_splints","title":"Assign players to splints — assign_players_to_splints","text":"Determines players pitch splint. Uses lineup minutes substitution events track players actually pitch.","code":""},{"path":"https://peteowen1.github.io/panna/reference/assign_players_to_splints.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assign players to splints — assign_players_to_splints","text":"","code":"assign_players_to_splints(boundaries, lineups, events, match_id)"},{"path":"https://peteowen1.github.io/panna/reference/assign_players_to_splints.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Assign players to splints — assign_players_to_splints","text":"boundaries Data frame splint boundaries lineups Data frame match lineups events Data frame match events (substitutions) match_id Match identifier","code":""},{"path":"https://peteowen1.github.io/panna/reference/assign_players_to_splints.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Assign players to splints — assign_players_to_splints","text":"Data frame player assignments per splint","code":""},{"path":"https://peteowen1.github.io/panna/reference/assign_players_to_splints_fast.html","id":null,"dir":"Reference","previous_headings":"","what":"Assign players to splints (fast version) — assign_players_to_splints_fast","title":"Assign players to splints (fast version) — assign_players_to_splints_fast","text":"Assign players splints (fast version)","code":""},{"path":"https://peteowen1.github.io/panna/reference/assign_players_to_splints_fast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Assign players to splints (fast version) — assign_players_to_splints_fast","text":"","code":"assign_players_to_splints_fast(boundaries, lineups, match_id)"},{"path":"https://peteowen1.github.io/panna/reference/backtest_skill_predictions.html","id":null,"dir":"Reference","previous_headings":"","what":"Backtest skill predictions against actual match performance — backtest_skill_predictions","title":"Backtest skill predictions against actual match performance — backtest_skill_predictions","text":"player-match data, computes Bayesian skill estimate using prior matches (decay weighting), compares actual performance. equivalent computing weekly skill estimates evaluating well predict next match.","code":""},{"path":"https://peteowen1.github.io/panna/reference/backtest_skill_predictions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Backtest skill predictions against actual match performance — backtest_skill_predictions","text":"","code":"backtest_skill_predictions(   match_stats,   decay_params = NULL,   stat_cols = NULL,   min_history = 5,   sample_n = NULL,   seed = 42 )"},{"path":"https://peteowen1.github.io/panna/reference/backtest_skill_predictions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Backtest skill predictions against actual match performance — backtest_skill_predictions","text":"match_stats data.table compute_match_level_opta_stats(). decay_params Decay parameters (optional stat_priors). stat_cols Character vector stats evaluate. NULL, uses default set key stats. min_history Minimum prior matches predictions count (default 5). sample_n Max players sample speed (default NULL = ). seed Random seed sampling.","code":""},{"path":"https://peteowen1.github.io/panna/reference/backtest_skill_predictions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Backtest skill predictions against actual match performance — backtest_skill_predictions","text":"list : predictions data.table individual predictions: player_id, match_date, stat, predicted, actual, minutes accuracy data.table per-stat accuracy metrics: RMSE, improvement vs simple average, improvement vs last match","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_all_parquet.html","id":null,"dir":"Reference","previous_headings":"","what":"Build all parquet files — build_all_parquet","title":"Build all parquet files — build_all_parquet","text":"Iterates table_type/league/season combinations creates parquet files. Discovers combinations existing RDS files existing parquet files (incremental updates CI).","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_all_parquet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build all parquet files — build_all_parquet","text":"","code":"build_all_parquet(   table_types = NULL,   leagues = NULL,   seasons = NULL,   verbose = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/build_all_parquet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build all parquet files — build_all_parquet","text":"table_types Character vector table types process. Default: standard table types. leagues Optional character vector leagues process. NULL, processes leagues found. seasons Optional character vector seasons process. NULL, processes seasons found. verbose Print progress messages","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_all_parquet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build all parquet files — build_all_parquet","text":"Data frame table_type, league, season, n_matches, size_mb columns","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_all_parquet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Build all parquet files — build_all_parquet","text":"","code":"if (FALSE) { # \\dontrun{ # Build all parquet files build_all_parquet()  # Build only summary for England build_all_parquet(table_types = \"summary\", leagues = \"ENG\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/build_consolidated_parquet.html","id":null,"dir":"Reference","previous_headings":"","what":"Build Consolidated Parquet Files for Remote Queries — build_consolidated_parquet","title":"Build Consolidated Parquet Files for Remote Queries — build_consolidated_parquet","text":"Creates single parquet file per table type containing leagues seasons. consolidated files uploaded GitHub releases fast remote querying (like bouncer's approach). Users can filter league/season SQL.","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_consolidated_parquet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build Consolidated Parquet Files for Remote Queries — build_consolidated_parquet","text":"","code":"build_consolidated_parquet(   table_types = NULL,   output_dir = NULL,   verbose = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/build_consolidated_parquet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build Consolidated Parquet Files for Remote Queries — build_consolidated_parquet","text":"table_types Character vector table types consolidate. Defaults FBref table types. output_dir Directory write consolidated parquet files. Defaults pannadata_dir()/consolidated. verbose Print progress messages.","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_consolidated_parquet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build Consolidated Parquet Files for Remote Queries — build_consolidated_parquet","text":"Data frame table_type, n_rows, size_mb columns.","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_consolidated_parquet.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Build Consolidated Parquet Files for Remote Queries — build_consolidated_parquet","text":"function reads individual league/season parquet files table type combines single file. resulting files can uploaded directly GitHub releases individual assets, enabling fast remote queries via query_remote_parquet(). Output files named {table_type}.parquet (e.g., summary.parquet).","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_consolidated_parquet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Build Consolidated Parquet Files for Remote Queries — build_consolidated_parquet","text":"","code":"if (FALSE) { # \\dontrun{ # Build all consolidated parquets build_consolidated_parquet()  # Build only summary and events build_consolidated_parquet(table_types = c(\"summary\", \"events\")) } # }"},{"path":"https://peteowen1.github.io/panna/reference/build_consolidated_understat_parquet.html","id":null,"dir":"Reference","previous_headings":"","what":"Build Consolidated Understat Parquet Files — build_consolidated_understat_parquet","title":"Build Consolidated Understat Parquet Files — build_consolidated_understat_parquet","text":"Creates single parquet file per table type containing leagues seasons. consolidated files uploaded GitHub releases fast remote querying.","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_consolidated_understat_parquet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build Consolidated Understat Parquet Files — build_consolidated_understat_parquet","text":"","code":"build_consolidated_understat_parquet(   table_types = NULL,   output_dir = NULL,   verbose = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/build_consolidated_understat_parquet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build Consolidated Understat Parquet Files — build_consolidated_understat_parquet","text":"table_types Character vector table types consolidate. Defaults c(\"roster\", \"shots\", \"metadata\"). output_dir Directory write consolidated parquet files. Defaults pannadata_dir()/consolidated. verbose Print progress messages.","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_consolidated_understat_parquet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build Consolidated Understat Parquet Files — build_consolidated_understat_parquet","text":"Data frame table_type, n_rows, size_mb columns.","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_consolidated_understat_parquet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Build Consolidated Understat Parquet Files — build_consolidated_understat_parquet","text":"","code":"if (FALSE) { # \\dontrun{ # Build all consolidated Understat parquets build_consolidated_understat_parquet() } # }"},{"path":"https://peteowen1.github.io/panna/reference/build_parquet.html","id":null,"dir":"Reference","previous_headings":"","what":"Build parquet file from RDS files for a league-season — build_parquet","title":"Build parquet file from RDS files for a league-season — build_parquet","text":"Reads RDS files table_type/league/season combines single parquet file. parquet file already exists, new RDS data merged existing parquet data (incremental updates).","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_parquet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build parquet file from RDS files for a league-season — build_parquet","text":"","code":"build_parquet(table_type, league, season, verbose = TRUE)"},{"path":"https://peteowen1.github.io/panna/reference/build_parquet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build parquet file from RDS files for a league-season — build_parquet","text":"table_type Table type (e.g., \"summary\", \"events\") league League code (e.g., \"ENG\") season Season string (e.g., \"2024-2025\") verbose Print progress messages","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_parquet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build parquet file from RDS files for a league-season — build_parquet","text":"Path created parquet file, NULL data","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_parquet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Build parquet file from RDS files for a league-season — build_parquet","text":"","code":"if (FALSE) { # \\dontrun{ build_parquet(\"summary\", \"ENG\", \"2024-2025\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/build_prior_vector.html","id":null,"dir":"Reference","previous_headings":"","what":"Build prior vector for RAPM from SPM predictions — build_prior_vector","title":"Build prior vector for RAPM from SPM predictions — build_prior_vector","text":"Creates named prior vector aligned player IDs SPM rating predictions. vectorized helper used xRAPM seasonal ratings build priors SPM predictions without manual -loops.","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_prior_vector.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build prior vector for RAPM from SPM predictions — build_prior_vector","text":"","code":"build_prior_vector(spm_data, spm_col, player_mapping, default = 0)"},{"path":"https://peteowen1.github.io/panna/reference/build_prior_vector.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build prior vector for RAPM from SPM predictions — build_prior_vector","text":"spm_data Data frame player_name SPM column use spm_col Name column containing SPM predictions player_mapping Data frame player_id player_name RAPM default Value players without SPM prediction (default 0)","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_prior_vector.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build prior vector for RAPM from SPM predictions — build_prior_vector","text":"Named vector priors keyed player_id","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_prior_vector.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Build prior vector for RAPM from SPM predictions — build_prior_vector","text":"","code":"if (FALSE) { # \\dontrun{ offense_prior <- build_prior_vector(   spm_data = offense_spm_ratings,   spm_col = \"offense_spm\",   player_mapping = rapm_data$player_mapping ) } # }"},{"path":"https://peteowen1.github.io/panna/reference/build_understat_manifest_from_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Build manifest from existing cached Understat data — build_understat_manifest_from_cache","title":"Build manifest from existing cached Understat data — build_understat_manifest_from_cache","text":"Scans existing parquet files builds manifest. Use bootstrap manifest migrating old system.","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_understat_manifest_from_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build manifest from existing cached Understat data — build_understat_manifest_from_cache","text":"","code":"build_understat_manifest_from_cache(data_dir = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/build_understat_manifest_from_cache.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build manifest from existing cached Understat data — build_understat_manifest_from_cache","text":"data_dir Base data directory (defaults pannadata_dir())","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_understat_manifest_from_cache.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build manifest from existing cached Understat data — build_understat_manifest_from_cache","text":"Data frame manifest structure","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_where_clause.html","id":null,"dir":"Reference","previous_headings":"","what":"Build SQL WHERE clause from filters — build_where_clause","title":"Build SQL WHERE clause from filters — build_where_clause","text":"Constructs SQL clause named list filter conditions. Values properly quoted SQL safety. NULL values skipped.","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_where_clause.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build SQL WHERE clause from filters — build_where_clause","text":"","code":"build_where_clause(filters, prefix = TRUE)"},{"path":"https://peteowen1.github.io/panna/reference/build_where_clause.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build SQL WHERE clause from filters — build_where_clause","text":"filters Named list names column names values filter values. Values can character (quoted), numeric (unquoted), NULL (skipped). prefix Whether include \"\" prefix. FALSE, returns just conditions joined .","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_where_clause.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build SQL WHERE clause from filters — build_where_clause","text":"Character string SQL clause, empty string filters.","code":""},{"path":"https://peteowen1.github.io/panna/reference/build_where_clause.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Build SQL WHERE clause from filters — build_where_clause","text":"","code":"if (FALSE) { # \\dontrun{ build_where_clause(list(league = \"ENG\", season = \"2023-2024\")) # Returns: \"WHERE league = 'ENG' AND season = '2023-2024'\"  build_where_clause(list(league = \"ENG\", min_goals = 5)) # Returns: \"WHERE league = 'ENG' AND min_goals = 5\"  build_where_clause(list(league = NULL, season = \"2023-2024\")) # Returns: \"WHERE season = '2023-2024'\"  build_where_clause(list()) # Returns: \"\" } # }"},{"path":"https://peteowen1.github.io/panna/reference/bulk_scrape_understat.html","id":null,"dir":"Reference","previous_headings":"","what":"Bulk scrape Understat matches with auto-detection — bulk_scrape_understat","title":"Bulk scrape Understat matches with auto-detection — bulk_scrape_understat","text":"Scrapes matches ID range, auto-detecting league season metadata. useful scraping matches across leagues without knowing IDs belong league.","code":""},{"path":"https://peteowen1.github.io/panna/reference/bulk_scrape_understat.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Bulk scrape Understat matches with auto-detection — bulk_scrape_understat","text":"","code":"bulk_scrape_understat(   start_id,   end_id,   delay = 3,   skip_cached = TRUE,   verbose = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/bulk_scrape_understat.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Bulk scrape Understat matches with auto-detection — bulk_scrape_understat","text":"start_id Starting match ID end_id Ending match ID (inclusive) delay Seconds requests (default 3) skip_cached Skip already cached matches (default TRUE) verbose Print progress messages (default TRUE)","code":""},{"path":"https://peteowen1.github.io/panna/reference/bulk_scrape_understat.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Bulk scrape Understat matches with auto-detection — bulk_scrape_understat","text":"Data frame scraping results (match_id, league, season, status)","code":""},{"path":"https://peteowen1.github.io/panna/reference/bulk_scrape_understat.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Bulk scrape Understat matches with auto-detection — bulk_scrape_understat","text":"","code":"if (FALSE) { # \\dontrun{ # Scrape recent matches (2024-25 season IDs are ~27000-29000) results <- bulk_scrape_understat(28900, 28999)  # Check results table(results$league, results$status) } # }"},{"path":"https://peteowen1.github.io/panna/reference/calculate_action_epv.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Action EPV Values — calculate_action_epv","title":"Calculate Action EPV Values — calculate_action_epv","text":"Computes EPV action. Supports two methods: \"goal\": EPV = P(team_scores) - P(opponent_scores), bounded -1 +1 \"xg\": EPV = expected xG next shot (already signed)","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_action_epv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Action EPV Values — calculate_action_epv","text":"","code":"calculate_action_epv(spadl_actions, features, epv_model, xg_model = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_action_epv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Action EPV Values — calculate_action_epv","text":"spadl_actions SPADL actions data frame (team_id, possession_change) features EPV features create_epv_features() epv_model Fitted EPV model fit_epv_model() xg_model Optional pre-trained xG model fit_xg_model(). NULL, attempts load pannadata/opta/models/xg_model.rds. Falls back position-based estimate model available.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_action_epv.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Action EPV Values — calculate_action_epv","text":"SPADL actions EPV columns added: epv: EPV state epv_delta: Change EPV (perspective handling) xg: shots, xG value (model estimated) \"goal\" method: p_team_scores, p_opponent_scores, p_nobody_scores \"xg\" method: expected_xg","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_action_epv.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Action EPV Values — calculate_action_epv","text":"Handles possession changes flipping perspective: team: delta = EPV_after - EPV_before Team change: delta = (-EPV_after) - EPV_before","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_action_type_epv.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate EPV by Action Type — calculate_action_type_epv","title":"Calculate EPV by Action Type — calculate_action_type_epv","text":"Calculate EPV Action Type","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_action_type_epv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate EPV by Action Type — calculate_action_type_epv","text":"","code":"calculate_action_type_epv(spadl_with_epv)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_action_type_epv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate EPV by Action Type — calculate_action_type_epv","text":"spadl_with_epv SPADL actions EPV","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_action_type_epv.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate EPV by Action Type — calculate_action_type_epv","text":"Data frame EPV totals action type per player","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_angle_to_goal.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Angle to Goal — calculate_angle_to_goal","title":"Calculate Angle to Goal — calculate_angle_to_goal","text":"Calculates visible angle (radians) goal given coordinates. angle represents much goal visible player's position. Useful shot xG models.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_angle_to_goal.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Angle to Goal — calculate_angle_to_goal","text":"","code":"calculate_angle_to_goal(x, y, goal_width = 12)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_angle_to_goal.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Angle to Goal — calculate_angle_to_goal","text":"x X coordinate (0-100 scale, attacking toward x=100) y Y coordinate (0-100 scale, y=50 center pitch) goal_width Goal width coordinate units (default ~12 standard goal)","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_angle_to_goal.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Angle to Goal — calculate_angle_to_goal","text":"Angle goal radians (always positive)","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_angle_to_goal.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Angle to Goal — calculate_angle_to_goal","text":"","code":"if (FALSE) { # \\dontrun{ calculate_angle_to_goal(90, 80)  # Wide position - smaller angle calculate_angle_to_goal(50, 50)  # Halfway line - small angle } # }"},{"path":"https://peteowen1.github.io/panna/reference/calculate_chain_stats.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Chain Statistics — calculate_chain_stats","title":"Calculate Chain Statistics — calculate_chain_stats","text":"Computes summary statistics possession chains dataset.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_chain_stats.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Chain Statistics — calculate_chain_stats","text":"","code":"calculate_chain_stats(chain_outcomes)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_chain_stats.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Chain Statistics — calculate_chain_stats","text":"chain_outcomes Data frame classify_chain_outcomes()","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_chain_stats.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Chain Statistics — calculate_chain_stats","text":"List chain statistics","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_defensive_spm.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate defensive SPM — calculate_defensive_spm","title":"Calculate defensive SPM — calculate_defensive_spm","text":"Fits SPM model defensive contribution .","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_defensive_spm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate defensive SPM — calculate_defensive_spm","text":"","code":"calculate_defensive_spm(data, defensive_cols = NULL, alpha = 0.5)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_defensive_spm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate defensive SPM — calculate_defensive_spm","text":"data SPM regression data defensive_cols Defensive predictor columns alpha Elastic net mixing","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_defensive_spm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate defensive SPM — calculate_defensive_spm","text":"Fitted model defensive SPM","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_distance_to_goal.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Distance to Goal — calculate_distance_to_goal","title":"Calculate Distance to Goal — calculate_distance_to_goal","text":"Calculates Euclidean distance coordinates center goal. Assumes goal x=100, y=50.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_distance_to_goal.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Distance to Goal — calculate_distance_to_goal","text":"","code":"calculate_distance_to_goal(x, y, goal_x = 100, goal_y = 50)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_distance_to_goal.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Distance to Goal — calculate_distance_to_goal","text":"x X coordinate (0-100 scale) y Y coordinate (0-100 scale) goal_x X coordinate goal center (default 100) goal_y Y coordinate goal center (default 50)","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_distance_to_goal.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Distance to Goal — calculate_distance_to_goal","text":"Distance goal coordinate units","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_distance_to_goal.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Distance to Goal — calculate_distance_to_goal","text":"","code":"if (FALSE) { # \\dontrun{ calculate_distance_to_goal(50, 50)  # Halfway line } # }"},{"path":"https://peteowen1.github.io/panna/reference/calculate_effective_minute.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate effective minute including stoppage time — calculate_effective_minute","title":"Calculate effective minute including stoppage time — calculate_effective_minute","text":"Converts minute + added_time single continuous time value. Second-half events offset first-half stoppage create continuous time.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_effective_minute.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate effective minute including stoppage time — calculate_effective_minute","text":"","code":"calculate_effective_minute(minute, added_time, first_half_stoppage = 0L)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_effective_minute.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate effective minute including stoppage time — calculate_effective_minute","text":"minute Integer vector base minutes added_time Integer vector added time (can NA) first_half_stoppage Integer, minutes first-half stoppage (default 0)","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_effective_minute.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate effective minute including stoppage time — calculate_effective_minute","text":"Numeric vector effective minutes","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_effective_minute.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate effective minute including stoppage time — calculate_effective_minute","text":"Examples 3 mins first-half stoppage: First half minute 30 -> 30 First half 45+3 -> 48 Second half minute 46 -> 49 (offset 3) Second half 90+11 -> 104 (90 + 11 + 3)","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_finishing_modifier.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate player finishing modifier — calculate_finishing_modifier","title":"Calculate player finishing modifier — calculate_finishing_modifier","text":"Calculates player's finishing ability relative xG. Used adjust xG predictions splint analysis.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_finishing_modifier.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate player finishing modifier — calculate_finishing_modifier","text":"","code":"calculate_finishing_modifier(shooting, min_shots = 20)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_finishing_modifier.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate player finishing modifier — calculate_finishing_modifier","text":"shooting Processed shooting data min_shots Minimum shots required (default 20)","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_finishing_modifier.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate player finishing modifier — calculate_finishing_modifier","text":"Data frame finishing modifier per player","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_first_half_end.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate first-half end minute from events and/or shots — calculate_first_half_end","title":"Calculate first-half end minute from events and/or shots — calculate_first_half_end","text":"Determines first half actually ended based stoppage time events shots. Uses full minutes: 45+3 -> first half ends 48.5 Falls back events shots NULL.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_first_half_end.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate first-half end minute from events and/or shots — calculate_first_half_end","text":"","code":"calculate_first_half_end(events, shots = NULL, default_end = 46)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_first_half_end.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate first-half end minute from events and/or shots — calculate_first_half_end","text":"events Data frame minute optionally added_time columns shots Data frame minute column (character, e.g., \"45+3\") default_end Default first-half end stoppage data (default 46)","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_first_half_end.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate first-half end minute from events and/or shots — calculate_first_half_end","text":"Numeric first-half end minute","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_match_end.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate match end minute from events and/or shots — calculate_match_end","title":"Calculate match end minute from events and/or shots — calculate_match_end","text":"Determines actual match end time based latest event shot observed. Uses continuous time (second half offset first-half stoppage). events shots provided, uses maximum .","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_match_end.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate match end minute from events and/or shots — calculate_match_end","text":"","code":"calculate_match_end(events, shots = NULL, default_end = 91)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_match_end.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate match end minute from events and/or shots — calculate_match_end","text":"events Data frame minute optionally added_time columns shots Data frame minute column (character, e.g., \"90+4\") default_end Default match end data (default 91)","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_match_end.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate match end minute from events and/or shots — calculate_match_end","text":"Numeric match end minute","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_npxg.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate non-penalty xG and goals — calculate_npxg","title":"Calculate non-penalty xG and goals — calculate_npxg","text":"Calculates non-penalty expected goals shot data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_npxg.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate non-penalty xG and goals — calculate_npxg","text":"","code":"calculate_npxg(shooting)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_npxg.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate non-penalty xG and goals — calculate_npxg","text":"shooting Processed shooting data","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_npxg.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate non-penalty xG and goals — calculate_npxg","text":"Data frame npxG player match","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_od_panna.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate O-panna and D-panna — calculate_od_panna","title":"Calculate O-panna and D-panna — calculate_od_panna","text":"Separates panna rating offensive defensive components.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_od_panna.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate O-panna and D-panna — calculate_od_panna","text":"","code":"calculate_od_panna(rapm_data, spm_ratings, lambda_prior = 1)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_od_panna.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate O-panna and D-panna — calculate_od_panna","text":"rapm_data RAPM data prepared separate_od = TRUE spm_ratings SPM ratings (separate O-SPM/D-SPM) lambda_prior Regularization strength","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_od_panna.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate O-panna and D-panna — calculate_od_panna","text":"List separated offensive defensive ratings","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_od_panna.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate O-panna and D-panna — calculate_od_panna","text":"","code":"if (FALSE) { # \\dontrun{ rapm_data <- create_rapm_design_matrix(splints, separate_od = TRUE) od_result <- calculate_od_panna(rapm_data, spm_ratings, lambda_prior = 1) head(od_result$ratings[, c(\"player_name\", \"o_panna\", \"d_panna\", \"panna\")]) } # }"},{"path":"https://peteowen1.github.io/panna/reference/calculate_offensive_spm.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate offensive SPM — calculate_offensive_spm","title":"Calculate offensive SPM — calculate_offensive_spm","text":"Fits SPM model offensive contribution .","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_offensive_spm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate offensive SPM — calculate_offensive_spm","text":"","code":"calculate_offensive_spm(data, offensive_cols = NULL, alpha = 0.5)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_offensive_spm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate offensive SPM — calculate_offensive_spm","text":"data SPM regression data offensive_cols Offensive predictor columns alpha Elastic net mixing","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_offensive_spm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate offensive SPM — calculate_offensive_spm","text":"Fitted model offensive SPM","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_panna_rating.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate panna rating — calculate_panna_rating","title":"Calculate panna rating — calculate_panna_rating","text":"Core panna rating calculation combining RAPM SPM prior. Formula: beta_panna = beta_diff + beta_spm beta_diff : min ||y - X*beta||^2 + lambda * ||beta - beta_spm||^2","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_panna_rating.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate panna rating — calculate_panna_rating","text":"","code":"calculate_panna_rating(rapm_data, spm_ratings, lambda_prior = 1, alpha = 0)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_panna_rating.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate panna rating — calculate_panna_rating","text":"rapm_data RAPM data prepare_rapm_data spm_ratings SPM ratings calculate_spm_ratings lambda_prior Regularization strength toward SPM prior alpha Elastic net mixing (default 0 ridge)","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_panna_rating.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate panna rating — calculate_panna_rating","text":"List panna ratings model details","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_panna_rating.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate panna rating — calculate_panna_rating","text":"","code":"if (FALSE) { # \\dontrun{ rapm_data <- prepare_rapm_data(splint_data) spm_ratings <- calculate_spm_ratings(player_features, spm_model) panna <- calculate_panna_rating(rapm_data, spm_ratings, lambda_prior = 1) head(panna$ratings) } # }"},{"path":"https://peteowen1.github.io/panna/reference/calculate_per_100_sequences.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert statistics to per-100-sequences rate — calculate_per_100_sequences","title":"Convert statistics to per-100-sequences rate — calculate_per_100_sequences","text":"Normalizes counting statistics per-100-sequences basis, similar basketball's per-100-possessions.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_per_100_sequences.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert statistics to per-100-sequences rate — calculate_per_100_sequences","text":"","code":"calculate_per_100_sequences(player_stats, team_sequences, stat_cols = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_per_100_sequences.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert statistics to per-100-sequences rate — calculate_per_100_sequences","text":"player_stats Data frame player match stats team_sequences Data frame team sequences per match stat_cols Character vector columns convert","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_per_100_sequences.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert statistics to per-100-sequences rate — calculate_per_100_sequences","text":"Data frame rate statistics","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_physical_discontinuity.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate Physical Discontinuity — calculate_physical_discontinuity","title":"Calculate Physical Discontinuity — calculate_physical_discontinuity","text":"Calculates spatial discontinuity consecutive actions using unified pitch coordinate frame. converts team-relative Opta coordinates common physical frame, allowing measurement actual ball movement rather perspective changes.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_physical_discontinuity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate Physical Discontinuity — calculate_physical_discontinuity","text":"","code":"calculate_physical_discontinuity(spadl_dt)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_physical_discontinuity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate Physical Discontinuity — calculate_physical_discontinuity","text":"spadl_dt Data.table data.frame SPADL format convert_opta_to_spadl(). Must columns: match_id, team_id, start_x, start_y, end_x, end_y.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_physical_discontinuity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate Physical Discontinuity — calculate_physical_discontinuity","text":"Data.table additional columns: phys_disc: Physical discontinuity (Euclidean distance action end next action start unified frame) phys_end_x, phys_end_y: End coordinates physical frame phys_next_x, phys_next_y: Next action start physical frame","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_physical_discontinuity.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Calculate Physical Discontinuity — calculate_physical_discontinuity","text":"Opta uses team-relative coordinates team sees x=100 attacking goal. possession changes, coordinates appear \"jump\" due perspective change, ball movement. function removes artifact converting coordinates single reference frame. validation purposes, physical discontinuity low action types (median < 10-15 units). High values indicate data quality issues unusual game situations (e.g., set pieces). Expected median physical discontinuity action type: pass: ~3 (pass lands receiver starts) aerial: ~3 (winner catches position) tackle: ~6 (tackler wins ball nearby) shot: ~10 (shot goal, next action keeper/goal)","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_physical_discontinuity.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Calculate Physical Discontinuity — calculate_physical_discontinuity","text":"","code":"if (FALSE) { # \\dontrun{ events <- load_opta_match_events(\"ENG\", \"2024-2025\") spadl <- convert_opta_to_spadl(events) spadl_with_disc <- calculate_physical_discontinuity(spadl)  # Check median discontinuity by action type spadl_with_disc[, .(median_disc = median(phys_disc, na.rm = TRUE)),                 by = action_type] } # }"},{"path":"https://peteowen1.github.io/panna/reference/calculate_splint_npxgd.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate splint-level xG differential — calculate_splint_npxgd","title":"Calculate splint-level xG differential — calculate_splint_npxgd","text":"Calculates non-penalty xG differential splint.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_splint_npxgd.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate splint-level xG differential — calculate_splint_npxgd","text":"","code":"calculate_splint_npxgd(   boundaries,   shooting,   match_id,   home_team = NULL,   away_team = NULL )"},{"path":"https://peteowen1.github.io/panna/reference/calculate_splint_npxgd.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate splint-level xG differential — calculate_splint_npxgd","text":"boundaries Data frame splint boundaries shooting Processed shooting data match_id Match identifier home_team Name home team away_team Name away team","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_splint_npxgd.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate splint-level xG differential — calculate_splint_npxgd","text":"Data frame npxGD splint","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_splint_npxgd_fast.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate splint xG (fast version) — calculate_splint_npxgd_fast","title":"Calculate splint xG (fast version) — calculate_splint_npxgd_fast","text":"Calculate splint xG (fast version)","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_splint_npxgd_fast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate splint xG (fast version) — calculate_splint_npxgd_fast","text":"","code":"calculate_splint_npxgd_fast(boundaries, shooting, home_team, away_team)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_spm_blend.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate blended SPM ratings from Elastic Net and XGBoost — calculate_spm_blend","title":"Calculate blended SPM ratings from Elastic Net and XGBoost — calculate_spm_blend","text":"Combines predictions model types configurable weighting. blend can improve robustness capturing linear (Elastic Net) non-linear (XGBoost) relationships box scores RAPM.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_spm_blend.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate blended SPM ratings from Elastic Net and XGBoost — calculate_spm_blend","text":"","code":"calculate_spm_blend(   player_features,   model_glmnet,   model_xgb,   weight_glmnet = 0.5 )"},{"path":"https://peteowen1.github.io/panna/reference/calculate_spm_blend.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate blended SPM ratings from Elastic Net and XGBoost — calculate_spm_blend","text":"player_features Data frame player features model_glmnet Fitted Elastic Net SPM model fit_spm_model model_xgb Fitted XGBoost SPM model fit_spm_xgb weight_glmnet Weight Elastic Net predictions (default 0.5)","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_spm_blend.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate blended SPM ratings from Elastic Net and XGBoost — calculate_spm_blend","text":"Data frame blended SPM ratings plus individual model predictions","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_spm_ratings.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate SPM ratings for all players — calculate_spm_ratings","title":"Calculate SPM ratings for all players — calculate_spm_ratings","text":"Applies SPM model predict RAPM players features.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_spm_ratings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate SPM ratings for all players — calculate_spm_ratings","text":"","code":"calculate_spm_ratings(player_features, spm_model, lambda = \"min\")"},{"path":"https://peteowen1.github.io/panna/reference/calculate_spm_ratings.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate SPM ratings for all players — calculate_spm_ratings","text":"player_features Data frame player features spm_model Fitted SPM model lambda lambda use","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_spm_ratings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate SPM ratings for all players — calculate_spm_ratings","text":"Data frame SPM ratings","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_spm_ratings_xgb.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate SPM ratings using XGBoost model — calculate_spm_ratings_xgb","title":"Calculate SPM ratings using XGBoost model — calculate_spm_ratings_xgb","text":"Calculate SPM ratings using XGBoost model","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_spm_ratings_xgb.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate SPM ratings using XGBoost model — calculate_spm_ratings_xgb","text":"","code":"calculate_spm_ratings_xgb(player_features, spm_xgb_model)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_spm_ratings_xgb.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate SPM ratings using XGBoost model — calculate_spm_ratings_xgb","text":"player_features Data frame player features spm_xgb_model Fitted XGBoost SPM model fit_spm_xgb","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_spm_ratings_xgb.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate SPM ratings using XGBoost model — calculate_spm_ratings_xgb","text":"Data frame SPM ratings","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_team_sequences.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate team possession sequences — calculate_team_sequences","title":"Calculate team possession sequences — calculate_team_sequences","text":"Estimates number possession sequences per match team. sequence defined period continuous possession.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_team_sequences.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate team possession sequences — calculate_team_sequences","text":"","code":"calculate_team_sequences(stats)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_team_sequences.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate team possession sequences — calculate_team_sequences","text":"stats Processed summary stats touches passes","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_team_sequences.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate team possession sequences — calculate_team_sequences","text":"Data frame team sequences per match","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_xg_calibration.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate xG Model Calibration — calculate_xg_calibration","title":"Calculate xG Model Calibration — calculate_xg_calibration","text":"Assesses well predicted probabilities match actual goal rates.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_xg_calibration.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate xG Model Calibration — calculate_xg_calibration","text":"","code":"calculate_xg_calibration(actual, predicted, n_bins = 10)"},{"path":"https://peteowen1.github.io/panna/reference/calculate_xg_calibration.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate xG Model Calibration — calculate_xg_calibration","text":"actual Binary vector actual outcomes (0/1) predicted Predicted probabilities n_bins Number calibration bins (default 10)","code":""},{"path":"https://peteowen1.github.io/panna/reference/calculate_xg_calibration.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate xG Model Calibration — calculate_xg_calibration","text":"List calibration metrics","code":""},{"path":"https://peteowen1.github.io/panna/reference/calibration_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Calibration Table — calibration_table","title":"Create Calibration Table — calibration_table","text":"Groups predictions bins compares predicted vs actual probabilities.","code":""},{"path":"https://peteowen1.github.io/panna/reference/calibration_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Calibration Table — calibration_table","text":"","code":"calibration_table(y_true, prob_matrix, n_bins = 10L)"},{"path":"https://peteowen1.github.io/panna/reference/calibration_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Calibration Table — calibration_table","text":"y_true Integer vector true outcomes (0=H, 1=D, 2=) prob_matrix Matrix 3 columns predicted probabilities n_bins Number calibration bins (default 10)","code":""},{"path":"https://peteowen1.github.io/panna/reference/calibration_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Calibration Table — calibration_table","text":"Data frame bin midpoints, predicted actual probabilities","code":""},{"path":"https://peteowen1.github.io/panna/reference/categorize_player_profile.html","id":null,"dir":"Reference","previous_headings":"","what":"Categorize player profile — categorize_player_profile","title":"Categorize player profile — categorize_player_profile","text":"Classifies players based O/D rating balance.","code":""},{"path":"https://peteowen1.github.io/panna/reference/categorize_player_profile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Categorize player profile — categorize_player_profile","text":"","code":"categorize_player_profile(o_rating, d_rating)"},{"path":"https://peteowen1.github.io/panna/reference/categorize_player_profile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Categorize player profile — categorize_player_profile","text":"o_rating Offensive rating d_rating Defensive rating","code":""},{"path":"https://peteowen1.github.io/panna/reference/categorize_player_profile.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Categorize player profile — categorize_player_profile","text":"Character vector player types","code":""},{"path":"https://peteowen1.github.io/panna/reference/categorize_player_profile.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Categorize player profile — categorize_player_profile","text":"","code":"if (FALSE) { # \\dontrun{ categorize_player_profile(0.8, 0.2) categorize_player_profile(c(0.6, 0.3, 0.5), c(0.4, 0.7, 0.5)) } # }"},{"path":"https://peteowen1.github.io/panna/reference/classify_chain_outcomes.html","id":null,"dir":"Reference","previous_headings":"","what":"Classify Chain Outcomes — classify_chain_outcomes","title":"Classify Chain Outcomes — classify_chain_outcomes","text":"Determines outcome possession chain (goal, shot, turnover, etc.) Optimized data.table.","code":""},{"path":"https://peteowen1.github.io/panna/reference/classify_chain_outcomes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Classify Chain Outcomes — classify_chain_outcomes","text":"","code":"classify_chain_outcomes(spadl_with_chains)"},{"path":"https://peteowen1.github.io/panna/reference/classify_chain_outcomes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Classify Chain Outcomes — classify_chain_outcomes","text":"spadl_with_chains SPADL actions chain_id create_possession_chains()","code":""},{"path":"https://peteowen1.github.io/panna/reference/classify_chain_outcomes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Classify Chain Outcomes — classify_chain_outcomes","text":"Data frame chain-level statistics","code":""},{"path":"https://peteowen1.github.io/panna/reference/clean_column_names.html","id":null,"dir":"Reference","previous_headings":"","what":"Clean column names to snake_case — clean_column_names","title":"Clean column names to snake_case — clean_column_names","text":"Applies janitor::clean_names() standardize column names.","code":""},{"path":"https://peteowen1.github.io/panna/reference/clean_column_names.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clean column names to snake_case — clean_column_names","text":"","code":"clean_column_names(data)"},{"path":"https://peteowen1.github.io/panna/reference/clean_column_names.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clean column names to snake_case — clean_column_names","text":"data Data frame","code":""},{"path":"https://peteowen1.github.io/panna/reference/clean_column_names.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clean column names to snake_case — clean_column_names","text":"Data frame snake_case column names","code":""},{"path":"https://peteowen1.github.io/panna/reference/clean_player_name.html","id":null,"dir":"Reference","previous_headings":"","what":"Clean player name for matching — clean_player_name","title":"Clean player name for matching — clean_player_name","text":"Creates minimal normalized version player name fuzzy matching. Unlike standardize_player_names() preserves readable format, creates key: lowercase whitespace removed. Uses memoization cache unique names O(1) lookup repeated values.","code":""},{"path":"https://peteowen1.github.io/panna/reference/clean_player_name.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clean player name for matching — clean_player_name","text":"","code":"clean_player_name(names)"},{"path":"https://peteowen1.github.io/panna/reference/clean_player_name.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clean player name for matching — clean_player_name","text":"names Character vector player names","code":""},{"path":"https://peteowen1.github.io/panna/reference/clean_player_name.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clean player name for matching — clean_player_name","text":"Character vector cleaned names (lowercase, whitespace)","code":""},{"path":"https://peteowen1.github.io/panna/reference/clean_player_name.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clean player name for matching — clean_player_name","text":"","code":"if (FALSE) { # \\dontrun{ clean_player_name(c(\"Kylian Mbappé\", \"kylian mbappé\", \"KYLIAN MBAPPÉ\")) # All return \"kylianmbappé\" } # }"},{"path":"https://peteowen1.github.io/panna/reference/clear_remote_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Clear Remote Data Cache — clear_remote_cache","title":"Clear Remote Data Cache — clear_remote_cache","text":"Clears session-level cache remote release info, forcing next load re-fetch GitHub.","code":""},{"path":"https://peteowen1.github.io/panna/reference/clear_remote_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clear Remote Data Cache — clear_remote_cache","text":"","code":"clear_remote_cache()"},{"path":"https://peteowen1.github.io/panna/reference/clear_remote_cache.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clear Remote Data Cache — clear_remote_cache","text":"Invisible NULL.","code":""},{"path":"https://peteowen1.github.io/panna/reference/clear_remote_cache.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clear Remote Data Cache — clear_remote_cache","text":"","code":"if (FALSE) { # \\dontrun{ clear_remote_cache() } # }"},{"path":"https://peteowen1.github.io/panna/reference/clear_remote_opta_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Clear remote Opta data cache — clear_remote_opta_cache","title":"Clear remote Opta data cache — clear_remote_opta_cache","text":"Removes cached remote Opta data, forcing fresh download next access.","code":""},{"path":"https://peteowen1.github.io/panna/reference/clear_remote_opta_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clear remote Opta data cache — clear_remote_opta_cache","text":"","code":"clear_remote_opta_cache()"},{"path":"https://peteowen1.github.io/panna/reference/clear_remote_opta_cache.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clear remote Opta data cache — clear_remote_opta_cache","text":"","code":"if (FALSE) { # \\dontrun{ clear_remote_opta_cache() } # }"},{"path":"https://peteowen1.github.io/panna/reference/combine_team_tables.html","id":null,"dir":"Reference","previous_headings":"","what":"Combine home and away team tables — combine_team_tables","title":"Combine home and away team tables — combine_team_tables","text":"Merges home away data table type single data frame.","code":""},{"path":"https://peteowen1.github.io/panna/reference/combine_team_tables.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Combine home and away team tables — combine_team_tables","text":"","code":"combine_team_tables(parsed_data, table_type)"},{"path":"https://peteowen1.github.io/panna/reference/combine_team_tables.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Combine home and away team tables — combine_team_tables","text":"parsed_data List containing parsed tables table_type Type table (e.g., \"summary\", \"passing\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/combine_team_tables.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Combine home and away team tables — combine_team_tables","text":"Combined data frame teams, NULL data","code":""},{"path":"https://peteowen1.github.io/panna/reference/compare_panna_rapm_spm.html","id":null,"dir":"Reference","previous_headings":"","what":"Compare panna, RAPM, and SPM ratings — compare_panna_rapm_spm","title":"Compare panna, RAPM, and SPM ratings — compare_panna_rapm_spm","text":"Analyzes differences three rating types.","code":""},{"path":"https://peteowen1.github.io/panna/reference/compare_panna_rapm_spm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compare panna, RAPM, and SPM ratings — compare_panna_rapm_spm","text":"","code":"compare_panna_rapm_spm(panna_ratings, rapm_ratings, spm_ratings)"},{"path":"https://peteowen1.github.io/panna/reference/compare_panna_rapm_spm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compare panna, RAPM, and SPM ratings — compare_panna_rapm_spm","text":"panna_ratings Data frame panna ratings rapm_ratings Data frame RAPM ratings spm_ratings Data frame SPM ratings","code":""},{"path":"https://peteowen1.github.io/panna/reference/compare_panna_rapm_spm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compare panna, RAPM, and SPM ratings — compare_panna_rapm_spm","text":"Data frame comparing rating types","code":""},{"path":"https://peteowen1.github.io/panna/reference/compare_panna_rapm_spm.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compare panna, RAPM, and SPM ratings — compare_panna_rapm_spm","text":"","code":"if (FALSE) { # \\dontrun{ comparison <- compare_panna_rapm_spm(panna_ratings, rapm_ratings, spm_ratings) head(comparison) } # }"},{"path":"https://peteowen1.github.io/panna/reference/compare_spm_features.html","id":null,"dir":"Reference","previous_headings":"","what":"Compare FBref and Opta SPM feature importance — compare_spm_features","title":"Compare FBref and Opta SPM feature importance — compare_spm_features","text":"Compares features important FBref vs Opta SPM models. Useful understanding data source captures different aspects play.","code":""},{"path":"https://peteowen1.github.io/panna/reference/compare_spm_features.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compare FBref and Opta SPM feature importance — compare_spm_features","text":"","code":"compare_spm_features(fbref_model, opta_model, n = 20)"},{"path":"https://peteowen1.github.io/panna/reference/compare_spm_features.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compare FBref and Opta SPM feature importance — compare_spm_features","text":"fbref_model Fitted SPM model FBref data opta_model Fitted SPM model Opta data n Number top features compare (default 20)","code":""},{"path":"https://peteowen1.github.io/panna/reference/compare_spm_features.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compare FBref and Opta SPM feature importance — compare_spm_features","text":"Data frame comparing feature importance","code":""},{"path":"https://peteowen1.github.io/panna/reference/compute_match_elos.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Elo Ratings for All Matches — compute_match_elos","title":"Compute Elo Ratings for All Matches — compute_match_elos","text":"Iterates matches chronologically computes Elo ratings. Returns match-level Elo features (pre-match ratings team).","code":""},{"path":"https://peteowen1.github.io/panna/reference/compute_match_elos.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Elo Ratings for All Matches — compute_match_elos","text":"","code":"compute_match_elos(results, k = 20, home_advantage = 65, initial_elo = 1500)"},{"path":"https://peteowen1.github.io/panna/reference/compute_match_elos.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Elo Ratings for All Matches — compute_match_elos","text":"results Data frame match_date, home_team, away_team, home_goals, away_goals columns, sorted date k K-factor (default 20) home_advantage Home advantage Elo points (default 65) initial_elo Starting Elo (default 1500)","code":""},{"path":"https://peteowen1.github.io/panna/reference/compute_match_elos.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Elo Ratings for All Matches — compute_match_elos","text":"Data frame match_id, home_elo, away_elo, elo_diff columns","code":""},{"path":"https://peteowen1.github.io/panna/reference/compute_match_level_opta_stats.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute match-level Opta statistics with per-90 rates — compute_match_level_opta_stats","title":"Compute match-level Opta statistics with per-90 rates — compute_match_level_opta_stats","text":"Like aggregate_opta_stats() preserves individual player-match rows instead aggregating across matches. row gets per-90 rates derived features computed single match's data. Used input estimated skills pipeline decay-weighted averaging replaces aggregation.","code":""},{"path":"https://peteowen1.github.io/panna/reference/compute_match_level_opta_stats.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute match-level Opta statistics with per-90 rates — compute_match_level_opta_stats","text":"","code":"compute_match_level_opta_stats(opta_stats, min_minutes = 10)"},{"path":"https://peteowen1.github.io/panna/reference/compute_match_level_opta_stats.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute match-level Opta statistics with per-90 rates — compute_match_level_opta_stats","text":"opta_stats Data frame load_opta_stats(), one row per player-match. Must contain match_id, match_date, player_name, team_name, team_position, minsPlayed. min_minutes Minimum minutes single match inclusion (default 10). Filters short cameos per-90 rates unreliable.","code":""},{"path":"https://peteowen1.github.io/panna/reference/compute_match_level_opta_stats.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute match-level Opta statistics with per-90 rates — compute_match_level_opta_stats","text":"data.table one row per player-match containing: Identity columns: match_id, match_date, player_id, player_name, team_name, position, competition, season Context columns: opponent_team, is_home Minutes: total_minutes Per-90 rate columns (names aggregate_opta_stats output) Derived efficiency columns (names aggregate_opta_stats output)","code":""},{"path":"https://peteowen1.github.io/panna/reference/compute_match_level_opta_stats.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compute match-level Opta statistics with per-90 rates — compute_match_level_opta_stats","text":"","code":"if (FALSE) { # \\dontrun{ opta_stats <- load_opta_stats(\"ENG\", \"2024-2025\") match_stats <- compute_match_level_opta_stats(opta_stats) } # }"},{"path":"https://peteowen1.github.io/panna/reference/compute_multiclass_logloss.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Multi-Class Log Loss — compute_multiclass_logloss","title":"Compute Multi-Class Log Loss — compute_multiclass_logloss","text":"Compute Multi-Class Log Loss","code":""},{"path":"https://peteowen1.github.io/panna/reference/compute_multiclass_logloss.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Multi-Class Log Loss — compute_multiclass_logloss","text":"","code":"compute_multiclass_logloss(y_true, prob_matrix, eps = 1e-15)"},{"path":"https://peteowen1.github.io/panna/reference/compute_multiclass_logloss.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Multi-Class Log Loss — compute_multiclass_logloss","text":"y_true Integer vector true labels (0, 1, 2) prob_matrix Matrix 3 columns (P(0), P(1), P(2)) eps Clipping epsilon avoid log(0) (default 1e-15)","code":""},{"path":"https://peteowen1.github.io/panna/reference/compute_multiclass_logloss.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Multi-Class Log Loss — compute_multiclass_logloss","text":"Scalar log loss value","code":""},{"path":"https://peteowen1.github.io/panna/reference/compute_position_multipliers.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute position-specific multipliers for prior centers — compute_position_multipliers","title":"Compute position-specific multipliers for prior centers — compute_position_multipliers","text":"stat, computes ratio position-specific weighted average overall weighted average: multiplier = pos_avg / global_avg. allows prior center position-specific keeping global optimization.","code":""},{"path":"https://peteowen1.github.io/panna/reference/compute_position_multipliers.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute position-specific multipliers for prior centers — compute_position_multipliers","text":"","code":"compute_position_multipliers(match_stats, stat_cols = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/compute_position_multipliers.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute position-specific multipliers for prior centers — compute_position_multipliers","text":"match_stats data.table match-level stats position column. stat_cols Character vector stat columns. NULL, auto-detects.","code":""},{"path":"https://peteowen1.github.io/panna/reference/compute_position_multipliers.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute position-specific multipliers for prior centers — compute_position_multipliers","text":"named list element named numeric vector length 4 (GK, DEF, MID, FWD) giving multiplier stat position.","code":""},{"path":"https://peteowen1.github.io/panna/reference/compute_team_rolling_features.html","id":null,"dir":"Reference","previous_headings":"","what":"Compute Team Rolling Features — compute_team_rolling_features","title":"Compute Team Rolling Features — compute_team_rolling_features","text":"Calculates rolling averages team performance metrics using strictly lagged windows (data leakage). Uses data.table frollmean + shift.","code":""},{"path":"https://peteowen1.github.io/panna/reference/compute_team_rolling_features.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compute Team Rolling Features — compute_team_rolling_features","text":"","code":"compute_team_rolling_features(results, windows = c(5L, 10L, 20L))"},{"path":"https://peteowen1.github.io/panna/reference/compute_team_rolling_features.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compute Team Rolling Features — compute_team_rolling_features","text":"results Data frame match results match_id, match_date, home_team, away_team, home_goals, away_goals, home_xg, away_xg windows Rolling window sizes (default c(5, 10, 20))","code":""},{"path":"https://peteowen1.github.io/panna/reference/compute_team_rolling_features.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compute Team Rolling Features — compute_team_rolling_features","text":"Data frame match_id rolling features home/away","code":""},{"path":"https://peteowen1.github.io/panna/reference/convert_opta_to_spadl.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert Opta Match Events to SPADL Format — convert_opta_to_spadl","title":"Convert Opta Match Events to SPADL Format — convert_opta_to_spadl","text":"Transforms Opta event data standardized SPADL-like format suitable EPV modeling. Coordinates preserved Opta's native team-relative format team's actions perspective (x=0 goal, x=100 opponent's goal). correct format EPV models action evaluated ball-carrier's perspective.","code":""},{"path":"https://peteowen1.github.io/panna/reference/convert_opta_to_spadl.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert Opta Match Events to SPADL Format — convert_opta_to_spadl","text":"","code":"convert_opta_to_spadl(opta_events, normalize_direction = FALSE)"},{"path":"https://peteowen1.github.io/panna/reference/convert_opta_to_spadl.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert Opta Match Events to SPADL Format — convert_opta_to_spadl","text":"opta_events Data frame load_opta_match_events() normalize_direction Whether attempt coordinate normalization. Set FALSE (default) preserve Opta's team-relative coordinates, correct EPV. Set TRUE visualizations requiring unified pitch coordinates (note: normalization heuristic may work well team-relative data).","code":""},{"path":"https://peteowen1.github.io/panna/reference/convert_opta_to_spadl.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert Opta Match Events to SPADL Format — convert_opta_to_spadl","text":"Data frame SPADL format columns: match_id: Match identifier action_id: Sequential action number within match period_id: 1=first half, 2=second half time_seconds: Time seconds period start team_id: Team performing action player_id: Player performing action player_name: Player name start_x, start_y: Starting coordinates (0-100) end_x, end_y: Ending coordinates (0-100) action_type: Standardized action type action_type_id: Numeric action type code opta_type_id: Original Opta type_id (e.g., 13=saved, 15=missed, 16=goal) result: \"success\" \"fail\" bodypart: \"foot\", \"head\", \"\" receiver_player_id: Player receives/intercepts (next action) receiver_player_name: Name receiver/interceptor receiver_team_id: Team receiver (detecting possession change) possession_change: TRUE next action opponent team","code":""},{"path":"https://peteowen1.github.io/panna/reference/convert_opta_to_spadl.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert Opta Match Events to SPADL Format — convert_opta_to_spadl","text":"","code":"if (FALSE) { # \\dontrun{ events <- load_opta_match_events(\"ENG\", \"2024-2025\") spadl <- convert_opta_to_spadl(events) } # }"},{"path":"https://peteowen1.github.io/panna/reference/count_events_before.html","id":null,"dir":"Reference","previous_headings":"","what":"Count events before each boundary — count_events_before","title":"Count events before each boundary — count_events_before","text":"Counts home/away events occurring splint boundary. Used tracking cumulative goals, red cards, etc.","code":""},{"path":"https://peteowen1.github.io/panna/reference/count_events_before.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Count events before each boundary — count_events_before","text":"","code":"count_events_before(events, boundaries)"},{"path":"https://peteowen1.github.io/panna/reference/count_events_before.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Count events before each boundary — count_events_before","text":"events Data frame 'minute' ('effective_minute') 'is_home' columns boundaries Numeric vector splint boundary minutes","code":""},{"path":"https://peteowen1.github.io/panna/reference/count_events_before.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Count events before each boundary — count_events_before","text":"List 'home' 'away' counts (vectors length boundaries minus 1)","code":""},{"path":"https://peteowen1.github.io/panna/reference/count_events_in_splint.html","id":null,"dir":"Reference","previous_headings":"","what":"Count events within each splint — count_events_in_splint","title":"Count events within each splint — count_events_in_splint","text":"Counts events occur splint (start end boundaries). Unlike count_events_before gives cumulative counts, gives per-splint counts.","code":""},{"path":"https://peteowen1.github.io/panna/reference/count_events_in_splint.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Count events within each splint — count_events_in_splint","text":"","code":"count_events_in_splint(events, boundaries)"},{"path":"https://peteowen1.github.io/panna/reference/count_events_in_splint.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Count events within each splint — count_events_in_splint","text":"events Data frame 'minute' ('effective_minute') 'is_home' columns boundaries Numeric vector splint boundary minutes","code":""},{"path":"https://peteowen1.github.io/panna/reference/count_events_in_splint.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Count events within each splint — count_events_in_splint","text":"List 'home' 'away' counts (vectors length n_splints)","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_all_splints.html","id":null,"dir":"Reference","previous_headings":"","what":"Create splints for all matches — create_all_splints","title":"Create splints for all matches — create_all_splints","text":"Generates splint data entire dataset. Uses data.table fast pre-splitting match_id.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_all_splints.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create splints for all matches — create_all_splints","text":"","code":"create_all_splints(processed_data, include_goals = TRUE, verbose = TRUE)"},{"path":"https://peteowen1.github.io/panna/reference/create_all_splints.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create splints for all matches — create_all_splints","text":"processed_data List processed data process_all_data include_goals Whether create splints goal times verbose Print progress messages","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_all_splints.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create splints for all matches — create_all_splints","text":"List combined splint data","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_defensive_features.html","id":null,"dir":"Reference","previous_headings":"","what":"Create defensive features — create_defensive_features","title":"Create defensive features — create_defensive_features","text":"Builds defensive-related rate statistics SPM model.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_defensive_features.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create defensive features — create_defensive_features","text":"","code":"create_defensive_features(stats)"},{"path":"https://peteowen1.github.io/panna/reference/create_defensive_features.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create defensive features — create_defensive_features","text":"stats Processed player stats rate columns","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_defensive_features.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create defensive features — create_defensive_features","text":"Data frame defensive features","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_epv_features.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Game State Features for EPV — create_epv_features","title":"Create Game State Features for EPV — create_epv_features","text":"Builds comprehensive features action including location, sequence context, match situation. Optimized data.table.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_epv_features.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Game State Features for EPV — create_epv_features","text":"","code":"create_epv_features(spadl_actions, n_prev = 3)"},{"path":"https://peteowen1.github.io/panna/reference/create_epv_features.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Game State Features for EPV — create_epv_features","text":"spadl_actions SPADL actions chain assignments n_prev Number previous actions include (default 3)","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_epv_features.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Game State Features for EPV — create_epv_features","text":"Data frame EPV features","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_epv_labels.html","id":null,"dir":"Reference","previous_headings":"","what":"Create EPV Training Labels — create_epv_labels","title":"Create EPV Training Labels — create_epv_labels","text":"Creates target labels EPV model training chain outcomes.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_epv_labels.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create EPV Training Labels — create_epv_labels","text":"","code":"create_epv_labels(spadl_with_outcomes)"},{"path":"https://peteowen1.github.io/panna/reference/create_epv_labels.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create EPV Training Labels — create_epv_labels","text":"spadl_with_outcomes SPADL actions chain outcome labels","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_epv_labels.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create EPV Training Labels — create_epv_labels","text":"Data frame action_id target columns","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_epv_labels_legacy.html","id":null,"dir":"Reference","previous_headings":"","what":"Deprecated: Create EPV Labels (Legacy Format) — create_epv_labels_legacy","title":"Deprecated: Create EPV Labels (Legacy Format) — create_epv_labels_legacy","text":"Creates labels old format backward compatibility. Use create_next_goal_labels() current approach.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_epv_labels_legacy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Deprecated: Create EPV Labels (Legacy Format) — create_epv_labels_legacy","text":"","code":"create_epv_labels_legacy(spadl_actions)"},{"path":"https://peteowen1.github.io/panna/reference/create_epv_labels_legacy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Deprecated: Create EPV Labels (Legacy Format) — create_epv_labels_legacy","text":"spadl_actions SPADL actions","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_epv_labels_legacy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Deprecated: Create EPV Labels (Legacy Format) — create_epv_labels_legacy","text":"Data frame scores_this_possession concedes_next_possession","code":""},{"path":[]},{"path":"https://peteowen1.github.io/panna/reference/create_location_features.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Location-Only Features — create_location_features","title":"Create Location-Only Features — create_location_features","text":"Creates minimal feature set based location.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_location_features.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Location-Only Features — create_location_features","text":"","code":"create_location_features(x, y)"},{"path":"https://peteowen1.github.io/panna/reference/create_location_features.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Location-Only Features — create_location_features","text":"x X coordinates y Y coordinates","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_location_features.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Location-Only Features — create_location_features","text":"Data frame location features","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_match_id.html","id":null,"dir":"Reference","previous_headings":"","what":"Create unique match ID — create_match_id","title":"Create unique match ID — create_match_id","text":"Generates unique identifier match based season, date, teams.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_match_id.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create unique match ID — create_match_id","text":"","code":"create_match_id(season, date, home_team, away_team)"},{"path":"https://peteowen1.github.io/panna/reference/create_match_id.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create unique match ID — create_match_id","text":"season Season string (e.g., \"2023-2024\") date Date match home_team Home team name away_team Away team name","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_match_id.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create unique match ID — create_match_id","text":"Character vector match IDs","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_match_splints.html","id":null,"dir":"Reference","previous_headings":"","what":"Create splints for a single match — create_match_splints","title":"Create splints for a single match — create_match_splints","text":"Master function create splint data one match.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_match_splints.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create splints for a single match — create_match_splints","text":"","code":"create_match_splints(   match_id,   events,   lineups,   shooting,   results,   include_goals = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/create_match_splints.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create splints for a single match — create_match_splints","text":"match_id Match identifier events Processed events data lineups Processed lineups data shooting Processed shooting data results Processed match results include_goals Whether create splints goal times","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_match_splints.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create splints for a single match — create_match_splints","text":"List splint data match","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_match_splints_fast.html","id":null,"dir":"Reference","previous_headings":"","what":"Create splints for a single match (fast version) — create_match_splints_fast","title":"Create splints for a single match (fast version) — create_match_splints_fast","text":"Optimized version takes pre-filtered data single match. Derives goal times shooting data events available. Derives red card times stats_summary available.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_match_splints_fast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create splints for a single match (fast version) — create_match_splints_fast","text":"","code":"create_match_splints_fast(   match_id,   events,   lineups,   shooting,   results,   stats = NULL,   include_goals = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/create_match_splints_fast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create splints for a single match (fast version) — create_match_splints_fast","text":"match_id Match identifier events Pre-filtered events match lineups Pre-filtered lineups match shooting Pre-filtered shooting match results Pre-filtered results match stats Pre-filtered stats_summary match (red cards) include_goals Whether create splints goal times","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_match_splints_fast.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create splints for a single match (fast version) — create_match_splints_fast","text":"List splint data match","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_next_goal_labels.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Next Goal Labels for EPV Model — create_next_goal_labels","title":"Create Next Goal Labels for EPV Model — create_next_goal_labels","text":"Determines scores next goal half action. Labels: 0 = possession team scores next, 1 = opponent scores next, 2 = nobody scores","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_next_goal_labels.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Next Goal Labels for EPV Model — create_next_goal_labels","text":"","code":"create_next_goal_labels(spadl_actions)"},{"path":"https://peteowen1.github.io/panna/reference/create_next_goal_labels.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Next Goal Labels for EPV Model — create_next_goal_labels","text":"spadl_actions SPADL actions team_id, period_id, match_id","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_next_goal_labels.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Next Goal Labels for EPV Model — create_next_goal_labels","text":"Data frame next_goal_label column added","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_next_xg_labels.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Next xG Labels for EPV Model — create_next_xg_labels","title":"Create Next xG Labels for EPV Model — create_next_xg_labels","text":"Determines xG next shot half action. Positive xG = team's shot, Negative xG = opponent's shot, 0 = shots. provides signal binary goal outcomes.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_next_xg_labels.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Next xG Labels for EPV Model — create_next_xg_labels","text":"","code":"create_next_xg_labels(spadl_actions, xg_values = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/create_next_xg_labels.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Next xG Labels for EPV Model — create_next_xg_labels","text":"spadl_actions SPADL actions team_id, period_id, match_id xg_values Optional named vector data frame xG values per action_id. NULL, uses chain_xg spadl_actions available, otherwise estimates.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_next_xg_labels.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Next xG Labels for EPV Model — create_next_xg_labels","text":"Data frame next_xg_label column added","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_offensive_features.html","id":null,"dir":"Reference","previous_headings":"","what":"Create offensive features — create_offensive_features","title":"Create offensive features — create_offensive_features","text":"Builds attacking-related rate statistics SPM model.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_offensive_features.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create offensive features — create_offensive_features","text":"","code":"create_offensive_features(stats)"},{"path":"https://peteowen1.github.io/panna/reference/create_offensive_features.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create offensive features — create_offensive_features","text":"stats Processed player stats rate columns","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_offensive_features.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create offensive features — create_offensive_features","text":"Data frame offensive features","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_opta_processed_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Processed Data Structure from Opta Data — create_opta_processed_data","title":"Create Processed Data Structure from Opta Data — create_opta_processed_data","text":"Creates processed_data list structure expected create_all_splints() Opta data sources. main entry point using Opta data splint creation pipeline.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_opta_processed_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Processed Data Structure from Opta Data — create_opta_processed_data","text":"","code":"create_opta_processed_data(   opta_lineups,   opta_events = NULL,   opta_shot_events = NULL,   opta_stats = NULL,   use_goals_as_xg = FALSE )"},{"path":"https://peteowen1.github.io/panna/reference/create_opta_processed_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Processed Data Structure from Opta Data — create_opta_processed_data","text":"opta_lineups Data frame load_opta_lineups() opta_events Data frame load_opta_events() opta_shot_events Data frame load_opta_shot_events() opta_stats Optional data frame load_opta_stats() (match metadata) use_goals_as_xg Logical. Use goals xG proxy TRUE. Default FALSE.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_opta_processed_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Processed Data Structure from Opta Data — create_opta_processed_data","text":"List components: lineups, events, shooting, results, stats_summary","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_opta_processed_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create Processed Data Structure from Opta Data — create_opta_processed_data","text":"","code":"if (FALSE) { # \\dontrun{ # Load Opta data lineups <- load_opta_lineups(\"ENG\", \"2024-2025\") events <- load_opta_events(\"ENG\", \"2024-2025\") shots <- load_opta_shot_events(\"ENG\", \"2024-2025\")  # Create processed data structure processed <- create_opta_processed_data(lineups, events, shots)  # Create splints splints <- create_all_splints(processed) } # }"},{"path":"https://peteowen1.github.io/panna/reference/create_pass_features.html","id":null,"dir":"Reference","previous_headings":"","what":"Create pass features (internal helper) — create_pass_features","title":"Create pass features (internal helper) — create_pass_features","text":"Shared feature creation logic xPass model.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_pass_features.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create pass features (internal helper) — create_pass_features","text":"","code":"create_pass_features(dt)"},{"path":"https://peteowen1.github.io/panna/reference/create_pass_features.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create pass features (internal helper) — create_pass_features","text":"dt data.table passes","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_pass_features.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create pass features (internal helper) — create_pass_features","text":"data.table features added","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_player_feature_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Create full player feature matrix — create_player_feature_matrix","title":"Create full player feature matrix — create_player_feature_matrix","text":"Builds complete feature matrix SPM model.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_player_feature_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create full player feature matrix — create_player_feature_matrix","text":"","code":"create_player_feature_matrix(processed_data, min_minutes = 180)"},{"path":"https://peteowen1.github.io/panna/reference/create_player_feature_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create full player feature matrix — create_player_feature_matrix","text":"processed_data List processed data min_minutes Minimum minutes inclusion","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_player_feature_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create full player feature matrix — create_player_feature_matrix","text":"Data frame player features","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_player_feature_matrix.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create full player feature matrix — create_player_feature_matrix","text":"","code":"if (FALSE) { # \\dontrun{ processed_data <- process_all_data(\"ENG\", \"2024-2025\") features <- create_player_feature_matrix(processed_data, min_minutes = 180) head(features) } # }"},{"path":"https://peteowen1.github.io/panna/reference/create_player_id.html","id":null,"dir":"Reference","previous_headings":"","what":"Create unique player ID — create_player_id","title":"Create unique player ID — create_player_id","text":"Generates unique identifier player based name team. Note: simple implementation; FBref player URLs reliable.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_player_id.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create unique player ID — create_player_id","text":"","code":"create_player_id(player_name, fbref_id = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/create_player_id.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create unique player ID — create_player_id","text":"player_name Player name fbref_id Optional FBref player ID (preferred available","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_player_id.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create unique player ID — create_player_id","text":"Character vector player IDs","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_possession_chains.html","id":null,"dir":"Reference","previous_headings":"","what":"Create Possession Chains from SPADL Actions — create_possession_chains","title":"Create Possession Chains from SPADL Actions — create_possession_chains","text":"Groups consecutive actions team possession chains. Optimized data.table fast processing large datasets.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_possession_chains.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create Possession Chains from SPADL Actions — create_possession_chains","text":"","code":"create_possession_chains(spadl_actions)"},{"path":"https://peteowen1.github.io/panna/reference/create_possession_chains.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create Possession Chains from SPADL Actions — create_possession_chains","text":"spadl_actions Data frame SPADL format convert_opta_to_spadl()","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_possession_chains.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create Possession Chains from SPADL Actions — create_possession_chains","text":"Data frame chain assignments added","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_possession_chains.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create Possession Chains from SPADL Actions — create_possession_chains","text":"chain ends : Opponent gains possession (successful tackle/interception) Ball goes play (foul, throw-situation) Goal scored Period ends Large time gap (>30 seconds)","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_possession_chains.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create Possession Chains from SPADL Actions — create_possession_chains","text":"","code":"if (FALSE) { # \\dontrun{ spadl <- convert_opta_to_spadl(opta_events) chains <- create_possession_chains(spadl) head(chains[, c(\"match_id\", \"chain_id\", \"action_type\", \"team_id\")]) } # }"},{"path":"https://peteowen1.github.io/panna/reference/create_rapm_design_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Create RAPM design matrix (new structure) — create_rapm_design_matrix","title":"Create RAPM design matrix (new structure) — create_rapm_design_matrix","text":"Creates design matrix 2 rows per splint (one per team perspective): Target: xgf90 gf90 (xG goals per 90 team's perspective) Covariates: gd, gf, ga, avg_min, home_away Player columns: playerX_off (attacking), playerX_def (defending) Replacement columns: replacement_off, replacement_def low-minute players","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_rapm_design_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create RAPM design matrix (new structure) — create_rapm_design_matrix","text":"","code":"create_rapm_design_matrix(   splint_data,   min_minutes = 90,   target_type = c(\"xg\", \"goals\") )"},{"path":"https://peteowen1.github.io/panna/reference/create_rapm_design_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create RAPM design matrix (new structure) — create_rapm_design_matrix","text":"splint_data Combined splint data create_all_splints min_minutes Minimum total minutes player inclusion target_type Type target variable: \"xg\" non-penalty xG (default), \"goals\" actual goals scored","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_rapm_design_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create RAPM design matrix (new structure) — create_rapm_design_matrix","text":"List design matrix components","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_splint_boundaries.html","id":null,"dir":"Reference","previous_headings":"","what":"Create splint boundaries — create_splint_boundaries","title":"Create splint boundaries — create_splint_boundaries","text":"Defines start end times splint based events optionally shots. Splints created : Start match (minute 0) goal substitution red card Half time (minute 45) End match (dynamically calculated stoppage time events/shots)","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_splint_boundaries.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create splint boundaries — create_splint_boundaries","text":"","code":"create_splint_boundaries(   events,   shots = NULL,   include_goals = TRUE,   include_halftime = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/create_splint_boundaries.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create splint boundaries — create_splint_boundaries","text":"events Data frame match events (minute optionally added_time columns) shots Data frame shots (optional, minute column stoppage time) include_goals Logical, whether create new splints goals (default TRUE) include_halftime Logical, whether create splint halftime (default TRUE)","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_splint_boundaries.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create splint boundaries — create_splint_boundaries","text":"Data frame splint boundaries game state","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_splint_boundaries.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Create splint boundaries — create_splint_boundaries","text":"Uses continuous time second-half events offset first-half stoppage. Example 3 mins first-half stoppage 11 mins second-half stoppage: First half: 0 48 (45 + 3) Second half: 48 104 (offset 3, plus 90+11) Also tracks game state (cumulative goals, red cards, player counts) splint boundary.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_splint_boundaries_fast.html","id":null,"dir":"Reference","previous_headings":"","what":"Create splint boundaries (fast version) — create_splint_boundaries_fast","title":"Create splint boundaries (fast version) — create_splint_boundaries_fast","text":"Create splint boundaries (fast version)","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_splint_boundaries_fast.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create splint boundaries (fast version) — create_splint_boundaries_fast","text":"","code":"create_splint_boundaries_fast(   events,   shots = NULL,   include_goals = TRUE,   include_halftime = TRUE,   goal_times = NULL,   goal_is_home = NULL,   sub_times = NULL,   red_card_times = NULL,   red_card_is_home = NULL )"},{"path":"https://peteowen1.github.io/panna/reference/create_splint_boundaries_fast.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create splint boundaries (fast version) — create_splint_boundaries_fast","text":"events Event data (may NULL) shots Shots data minute column (may NULL) include_goals Whether include goal boundaries include_halftime Whether include halftime boundary goal_times Numeric vector goal minutes (derived shooting) goal_is_home Logical vector indicating goal home team sub_times Numeric vector substitution minutes (derived lineups) red_card_times Numeric vector red card minutes (derived stats) red_card_is_home Logical vector indicating red card home team","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_spm_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Create SPM prior vector for RAPM — create_spm_prior","title":"Create SPM prior vector for RAPM — create_spm_prior","text":"Creates prior vector aligned RAPM player IDs.","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_spm_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create SPM prior vector for RAPM — create_spm_prior","text":"","code":"create_spm_prior(spm_predictions, player_mapping, default_prior = 0)"},{"path":"https://peteowen1.github.io/panna/reference/create_spm_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create SPM prior vector for RAPM — create_spm_prior","text":"spm_predictions Named vector data frame SPM predictions player_mapping Data frame player_id player_name default_prior Value players without SPM prediction","code":""},{"path":"https://peteowen1.github.io/panna/reference/create_spm_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create SPM prior vector for RAPM — create_spm_prior","text":"Named vector priors (keyed player_id)","code":""},{"path":"https://peteowen1.github.io/panna/reference/default_column_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Default column mapping for FBref/Opta data — default_column_map","title":"Default column mapping for FBref/Opta data — default_column_map","text":"Standard column name variations encountered across different data sources.","code":""},{"path":"https://peteowen1.github.io/panna/reference/default_column_map.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Default column mapping for FBref/Opta data — default_column_map","text":"","code":"default_column_map()"},{"path":"https://peteowen1.github.io/panna/reference/default_column_map.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Default column mapping for FBref/Opta data — default_column_map","text":"Named list canonical column names alternatives","code":""},{"path":"https://peteowen1.github.io/panna/reference/default_column_map.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Default column mapping for FBref/Opta data — default_column_map","text":"","code":"if (FALSE) { # \\dontrun{ col_map <- default_column_map() names(col_map) } # }"},{"path":"https://peteowen1.github.io/panna/reference/derive_events_from_shooting.html","id":null,"dir":"Reference","previous_headings":"","what":"Derive goal events from shooting data — derive_events_from_shooting","title":"Derive goal events from shooting data — derive_events_from_shooting","text":"match summary data available pre-scraped cache, can derive goal events shooting data (available). gives us goal timing splint creation, though substitution timing.","code":""},{"path":"https://peteowen1.github.io/panna/reference/derive_events_from_shooting.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Derive goal events from shooting data — derive_events_from_shooting","text":"","code":"derive_events_from_shooting(shooting_data)"},{"path":"https://peteowen1.github.io/panna/reference/derive_events_from_shooting.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Derive goal events from shooting data — derive_events_from_shooting","text":"shooting_data Shooting data load_fb_match_shooting (already snake_case)","code":""},{"path":"https://peteowen1.github.io/panna/reference/derive_events_from_shooting.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Derive goal events from shooting data — derive_events_from_shooting","text":"Data frame goal events timing","code":""},{"path":"https://peteowen1.github.io/panna/reference/derive_lineups_from_stats.html","id":null,"dir":"Reference","previous_headings":"","what":"Get match lineups from advanced stats (no scraping needed) — derive_lineups_from_stats","title":"Get match lineups from advanced stats (no scraping needed) — derive_lineups_from_stats","text":"Derives lineup information advanced match stats data. avoids rate limiting issues using pre-scraped data. Can use stat type (summary, passing, defense, possession) - contain core player/match info needed lineups.","code":""},{"path":"https://peteowen1.github.io/panna/reference/derive_lineups_from_stats.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get match lineups from advanced stats (no scraping needed) — derive_lineups_from_stats","text":"","code":"derive_lineups_from_stats(stats_data)"},{"path":"https://peteowen1.github.io/panna/reference/derive_lineups_from_stats.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get match lineups from advanced stats (no scraping needed) — derive_lineups_from_stats","text":"stats_data Stats data pannadata (already snake_case). Can stat type - passing/defense/possession better historical coverage.","code":""},{"path":"https://peteowen1.github.io/panna/reference/derive_lineups_from_stats.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get match lineups from advanced stats (no scraping needed) — derive_lineups_from_stats","text":"Data frame match lineups derived stats","code":""},{"path":"https://peteowen1.github.io/panna/reference/derive_xa.html","id":null,"dir":"Reference","previous_headings":"","what":"Derive Expected Assists (xA) from SPADL Actions — derive_xa","title":"Derive Expected Assists (xA) from SPADL Actions — derive_xa","text":"shot SPADL data, checks preceding action completed pass teammate. , credits passer shot's xG xA.","code":""},{"path":"https://peteowen1.github.io/panna/reference/derive_xa.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Derive Expected Assists (xA) from SPADL Actions — derive_xa","text":"","code":"derive_xa(spadl_actions)"},{"path":"https://peteowen1.github.io/panna/reference/derive_xa.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Derive Expected Assists (xA) from SPADL Actions — derive_xa","text":"spadl_actions SPADL actions data frame xG column already added. Must contain: action_id, action_type, result, team_id, player_id, player_name, match_id, xg.","code":""},{"path":"https://peteowen1.github.io/panna/reference/derive_xa.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Derive Expected Assists (xA) from SPADL Actions — derive_xa","text":"SPADL data frame additional columns: xa: Expected assists value (shot's xG credited passer) is_key_pass: Whether pass led shot is_assist: Whether pass led goal","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-add_position_dummies.html","id":null,"dir":"Reference","previous_headings":"","what":"Add position dummy variables — .add_position_dummies","title":"Add position dummy variables — .add_position_dummies","text":"Internal helper add position indicator columns.","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-add_position_dummies.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add position dummy variables — .add_position_dummies","text":"","code":".add_position_dummies(player_stats)"},{"path":"https://peteowen1.github.io/panna/reference/dot-add_position_dummies.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add position dummy variables — .add_position_dummies","text":"player_stats Data frame primary_position column","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-add_position_dummies.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add position dummy variables — .add_position_dummies","text":"player_stats position dummy columns added","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-aggregate_player_minutes.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate player minutes and split into regular/replacement pools — .aggregate_player_minutes","title":"Aggregate player minutes and split into regular/replacement pools — .aggregate_player_minutes","text":"Aggregate player minutes split regular/replacement pools","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-aggregate_player_minutes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate player minutes and split into regular/replacement pools — .aggregate_player_minutes","text":"","code":".aggregate_player_minutes(players, splints, min_minutes)"},{"path":"https://peteowen1.github.io/panna/reference/dot-aggregate_player_minutes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate player minutes and split into regular/replacement pools — .aggregate_player_minutes","text":"players Data frame player appearances per splint splints Data frame splints duration min_minutes Minimum total minutes inclusion regular player","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-aggregate_player_minutes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate player minutes and split into regular/replacement pools — .aggregate_player_minutes","text":"List player_minutes, replacement_player_ids, player_ids, n_players, all_player_minutes","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-aggregate_stat_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Aggregate a single stat table by player_id — .aggregate_stat_table","title":"Aggregate a single stat table by player_id — .aggregate_stat_table","text":"Internal helper aggregate match-level stats player totals.","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-aggregate_stat_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Aggregate a single stat table by player_id — .aggregate_stat_table","text":"","code":".aggregate_stat_table(stats_df, col_mapping)"},{"path":"https://peteowen1.github.io/panna/reference/dot-aggregate_stat_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Aggregate a single stat table by player_id — .aggregate_stat_table","text":"stats_df Data frame player stats col_mapping Named vector mapping output col names input col names","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-aggregate_stat_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Aggregate a single stat table by player_id — .aggregate_stat_table","text":"Data frame aggregated player_id renamed columns","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-build_rapm_row_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Build RAPM row data from valid splints — .build_rapm_row_data","title":"Build RAPM row data from valid splints — .build_rapm_row_data","text":"Creates 2 rows per splint (home attacking, away attacking) game state covariates target variable.","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-build_rapm_row_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build RAPM row data from valid splints — .build_rapm_row_data","text":"","code":".build_rapm_row_data(valid_splints, target_type)"},{"path":"https://peteowen1.github.io/panna/reference/dot-build_rapm_row_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build RAPM row data from valid splints — .build_rapm_row_data","text":"valid_splints Data frame splints duration > 0 target_type \"xg\" \"goals\"","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-build_rapm_row_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build RAPM row data from valid splints — .build_rapm_row_data","text":"List row_data data.frame target_per90_name string","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-build_rapm_sparse_matrix.html","id":null,"dir":"Reference","previous_headings":"","what":"Build sparse player matrix from triplets — .build_rapm_sparse_matrix","title":"Build sparse player matrix from triplets — .build_rapm_sparse_matrix","text":"Constructs sparse matrix encoding players offense/defense row, including replacement-level columns.","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-build_rapm_sparse_matrix.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build sparse player matrix from triplets — .build_rapm_sparse_matrix","text":"","code":".build_rapm_sparse_matrix(   players,   valid_splints,   player_ids,   replacement_player_ids,   n_rows )"},{"path":"https://peteowen1.github.io/panna/reference/dot-build_rapm_sparse_matrix.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build sparse player matrix from triplets — .build_rapm_sparse_matrix","text":"players Data frame player appearances valid_splints Data frame valid splints player_ids Character vector regular player IDs replacement_player_ids Character vector replacement player IDs n_rows Total rows design matrix","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-build_rapm_sparse_matrix.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build sparse player matrix from triplets — .build_rapm_sparse_matrix","text":"List X_players (sparse matrix), col_names, n_player_cols, replacement_off_appearances, replacement_def_appearances","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-calculate_derived_features.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate derived features (ratios and success rates) — .calculate_derived_features","title":"Calculate derived features (ratios and success rates) — .calculate_derived_features","text":"Internal helper add derived features player data frame.","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-calculate_derived_features.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate derived features (ratios and success rates) — .calculate_derived_features","text":"","code":".calculate_derived_features(player_stats, mins_per_90)"},{"path":"https://peteowen1.github.io/panna/reference/dot-calculate_derived_features.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate derived features (ratios and success rates) — .calculate_derived_features","text":"player_stats Data frame aggregated player stats mins_per_90 Numeric vector minutes/90 player","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-calculate_derived_features.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate derived features (ratios and success rates) — .calculate_derived_features","text":"player_stats derived feature columns added","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-calculate_opta_derived_features.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate derived features (success rates and ratios) for Opta stats — .calculate_opta_derived_features","title":"Calculate derived features (success rates and ratios) for Opta stats — .calculate_opta_derived_features","text":"Calculate derived features (success rates ratios) Opta stats","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-calculate_opta_derived_features.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate derived features (success rates and ratios) for Opta stats — .calculate_opta_derived_features","text":"","code":".calculate_opta_derived_features(player_stats)"},{"path":"https://peteowen1.github.io/panna/reference/dot-calculate_opta_derived_features.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate derived features (success rates and ratios) for Opta stats — .calculate_opta_derived_features","text":"player_stats Data frame counting stats per-90 rates","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-calculate_opta_derived_features.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate derived features (success rates and ratios) for Opta stats — .calculate_opta_derived_features","text":"player_stats derived feature columns added","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-calculate_opta_per90.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate per-90 rates for Opta player stats — .calculate_opta_per90","title":"Calculate per-90 rates for Opta player stats — .calculate_opta_per90","text":"Calculate per-90 rates Opta player stats","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-calculate_opta_per90.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate per-90 rates for Opta player stats — .calculate_opta_per90","text":"","code":".calculate_opta_per90(player_stats)"},{"path":"https://peteowen1.github.io/panna/reference/dot-calculate_opta_per90.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate per-90 rates for Opta player stats — .calculate_opta_per90","text":"player_stats Data frame aggregated counting stats","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-calculate_opta_per90.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate per-90 rates for Opta player stats — .calculate_opta_per90","text":"player_stats per-90 columns added","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-calculate_per90_rates.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate per-90 rates for player stats — .calculate_per90_rates","title":"Calculate per-90 rates for player stats — .calculate_per90_rates","text":"Internal helper add per-90 stats player data frame.","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-calculate_per90_rates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate per-90 rates for player stats — .calculate_per90_rates","text":"","code":".calculate_per90_rates(player_stats, mins_per_90)"},{"path":"https://peteowen1.github.io/panna/reference/dot-calculate_per90_rates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate per-90 rates for player stats — .calculate_per90_rates","text":"player_stats Data frame aggregated player stats mins_per_90 Numeric vector minutes/90 player","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-calculate_per90_rates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate per-90 rates for player stats — .calculate_per90_rates","text":"player_stats per-90 columns added","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-check_suggests.html","id":null,"dir":"Reference","previous_headings":"","what":"Check that a suggested package is installed — .check_suggests","title":"Check that a suggested package is installed — .check_suggests","text":"Throws informative error package listed Suggests missing.","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-check_suggests.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check that a suggested package is installed — .check_suggests","text":"","code":".check_suggests(pkg, reason = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/dot-check_suggests.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check that a suggested package is installed — .check_suggests","text":"pkg Package name (character) reason Brief reason package needed","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-check_suggests.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check that a suggested package is installed — .check_suggests","text":"TRUE invisibly package available","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-classify_skill_stats.html","id":null,"dir":"Reference","previous_headings":"","what":"Classify stats into rate vs efficiency categories — .classify_skill_stats","title":"Classify stats into rate vs efficiency categories — .classify_skill_stats","text":"Per-90 rate stats weighted minutes; efficiency stats (success rates, conversion rates) weighted denominator (attempts). function returns classification denominator column efficiency stats.","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-classify_skill_stats.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Classify stats into rate vs efficiency categories — .classify_skill_stats","text":"","code":".classify_skill_stats()"},{"path":"https://peteowen1.github.io/panna/reference/dot-classify_skill_stats.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Classify stats into rate vs efficiency categories — .classify_skill_stats","text":"data.table columns: stat, category, denominator","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-count_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Count events by splint boundary — .count_events","title":"Count events by splint boundary — .count_events","text":"Core logic counting home/away events relative splint boundaries.","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-count_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Count events by splint boundary — .count_events","text":"","code":".count_events(events, boundaries, type = c(\"before\", \"within\"))"},{"path":"https://peteowen1.github.io/panna/reference/dot-count_events.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Count events by splint boundary — .count_events","text":"events Data frame 'minute' ('effective_minute') 'is_home' columns boundaries Numeric vector splint boundary minutes type Either \"\" (cumulative boundary start) \"within\" (events within splint interval)","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-count_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Count events by splint boundary — .count_events","text":"List 'home' 'away' counts (vectors length n_splints)","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-extract_end_year.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract season end year from season string — .extract_end_year","title":"Extract season end year from season string — .extract_end_year","text":"Extract season end year season string","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-extract_end_year.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract season end year from season string — .extract_end_year","text":"","code":".extract_end_year(season)"},{"path":"https://peteowen1.github.io/panna/reference/dot-extract_end_year.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract season end year from season string — .extract_end_year","text":"season Character vector season strings","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-extract_end_year.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract season end year from season string — .extract_end_year","text":"Integer vector end years","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-get_defense_col_mapping.html","id":null,"dir":"Reference","previous_headings":"","what":"Get defense stats column mapping — .get_defense_col_mapping","title":"Get defense stats column mapping — .get_defense_col_mapping","text":"Get defense stats column mapping","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-get_defense_col_mapping.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get defense stats column mapping — .get_defense_col_mapping","text":"","code":".get_defense_col_mapping()"},{"path":"https://peteowen1.github.io/panna/reference/dot-get_keeper_col_mapping.html","id":null,"dir":"Reference","previous_headings":"","what":"Get keeper stats column mapping — .get_keeper_col_mapping","title":"Get keeper stats column mapping — .get_keeper_col_mapping","text":"Get keeper stats column mapping","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-get_keeper_col_mapping.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get keeper stats column mapping — .get_keeper_col_mapping","text":"","code":".get_keeper_col_mapping()"},{"path":"https://peteowen1.github.io/panna/reference/dot-get_misc_col_mapping.html","id":null,"dir":"Reference","previous_headings":"","what":"Get misc stats column mapping — .get_misc_col_mapping","title":"Get misc stats column mapping — .get_misc_col_mapping","text":"Get misc stats column mapping","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-get_misc_col_mapping.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get misc stats column mapping — .get_misc_col_mapping","text":"","code":".get_misc_col_mapping()"},{"path":"https://peteowen1.github.io/panna/reference/dot-get_opta_col_mapping.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Opta column mapping (new_name = opta_column_name) — .get_opta_col_mapping","title":"Get Opta column mapping (new_name = opta_column_name) — .get_opta_col_mapping","text":"Get Opta column mapping (new_name = opta_column_name)","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-get_opta_col_mapping.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Opta column mapping (new_name = opta_column_name) — .get_opta_col_mapping","text":"","code":".get_opta_col_mapping()"},{"path":"https://peteowen1.github.io/panna/reference/dot-get_opta_col_mapping.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Opta column mapping (new_name = opta_column_name) — .get_opta_col_mapping","text":"Named character vector mapping panna names Opta column names","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-get_passing_col_mapping.html","id":null,"dir":"Reference","previous_headings":"","what":"Get passing stats column mapping — .get_passing_col_mapping","title":"Get passing stats column mapping — .get_passing_col_mapping","text":"Get passing stats column mapping","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-get_passing_col_mapping.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get passing stats column mapping — .get_passing_col_mapping","text":"","code":".get_passing_col_mapping()"},{"path":"https://peteowen1.github.io/panna/reference/dot-get_passing_types_col_mapping.html","id":null,"dir":"Reference","previous_headings":"","what":"Get passing types column mapping — .get_passing_types_col_mapping","title":"Get passing types column mapping — .get_passing_types_col_mapping","text":"Get passing types column mapping","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-get_passing_types_col_mapping.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get passing types column mapping — .get_passing_types_col_mapping","text":"","code":".get_passing_types_col_mapping()"},{"path":"https://peteowen1.github.io/panna/reference/dot-get_possession_col_mapping.html","id":null,"dir":"Reference","previous_headings":"","what":"Get possession stats column mapping — .get_possession_col_mapping","title":"Get possession stats column mapping — .get_possession_col_mapping","text":"Get possession stats column mapping","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-get_possession_col_mapping.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get possession stats column mapping — .get_possession_col_mapping","text":"","code":".get_possession_col_mapping()"},{"path":"https://peteowen1.github.io/panna/reference/dot-get_summary_col_mapping.html","id":null,"dir":"Reference","previous_headings":"","what":"Get summary stats column mapping — .get_summary_col_mapping","title":"Get summary stats column mapping — .get_summary_col_mapping","text":"Get summary stats column mapping","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-get_summary_col_mapping.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get summary stats column mapping — .get_summary_col_mapping","text":"","code":".get_summary_col_mapping()"},{"path":"https://peteowen1.github.io/panna/reference/dot-resolve_positions.html","id":null,"dir":"Reference","previous_headings":"","what":"Resolve substitute positions using each player's modal starting position — .resolve_positions","title":"Resolve substitute positions using each player's modal starting position — .resolve_positions","text":"Players listed \"Substitute\" get common starting position matches. Players ever appear Substitute left NA.","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-resolve_positions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Resolve substitute positions using each player's modal starting position — .resolve_positions","text":"","code":".resolve_positions(dt)"},{"path":"https://peteowen1.github.io/panna/reference/dot-resolve_positions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Resolve substitute positions using each player's modal starting position — .resolve_positions","text":"dt data.table player_id position columns.","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-resolve_positions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Resolve substitute positions using each player's modal starting position — .resolve_positions","text":"input data.table added pos_group column.","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-simplify_position.html","id":null,"dir":"Reference","previous_headings":"","what":"Simplify match positions to 4 groups — .simplify_position","title":"Simplify match positions to 4 groups — .simplify_position","text":"Maps Opta match positions (Goalkeeper, Defender, Wing Back, Midfielder, Defensive Midfielder, Attacking Midfielder, Striker, Substitute) GK/DEF/MID/FWD.","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-simplify_position.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simplify match positions to 4 groups — .simplify_position","text":"","code":".simplify_position(pos)"},{"path":"https://peteowen1.github.io/panna/reference/dot-simplify_position.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simplify match positions to 4 groups — .simplify_position","text":"pos Character vector position strings.","code":""},{"path":"https://peteowen1.github.io/panna/reference/dot-simplify_position.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simplify match positions to 4 groups — .simplify_position","text":"Character vector simplified positions (NA unrecognized).","code":""},{"path":"https://peteowen1.github.io/panna/reference/download_opta_catalog.html","id":null,"dir":"Reference","previous_headings":"","what":"Download and Cache Opta Data Catalog — download_opta_catalog","title":"Download and Cache Opta Data Catalog — download_opta_catalog","text":"Loads opta-catalog.json file, checking session cache first, local file, downloading GitHub releases.","code":""},{"path":"https://peteowen1.github.io/panna/reference/download_opta_catalog.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download and Cache Opta Data Catalog — download_opta_catalog","text":"","code":"download_opta_catalog(repo = \"peteowen1/pannadata\", tag = \"opta-latest\")"},{"path":"https://peteowen1.github.io/panna/reference/download_opta_catalog.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download and Cache Opta Data Catalog — download_opta_catalog","text":"repo GitHub repository (default: \"peteowen1/pannadata\"). tag Release tag (default: \"opta-latest\").","code":""},{"path":"https://peteowen1.github.io/panna/reference/download_opta_catalog.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download and Cache Opta Data Catalog — download_opta_catalog","text":"List catalog data (competitions, panna_aliases).","code":""},{"path":"https://peteowen1.github.io/panna/reference/download_opta_release_file.html","id":null,"dir":"Reference","previous_headings":"","what":"Download a file from an Opta GitHub release with fallback — download_opta_release_file","title":"Download a file from an Opta GitHub release with fallback — download_opta_release_file","text":"Handles session caching, parquet validation, falls back direct GitHub URL piggyback's memoised asset list stale.","code":""},{"path":"https://peteowen1.github.io/panna/reference/download_opta_release_file.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download a file from an Opta GitHub release with fallback — download_opta_release_file","text":"","code":"download_opta_release_file(   file_name,   source = c(\"remote\", \"local\"),   repo = \"peteowen1/pannadata\",   tag = \"opta-latest\" )"},{"path":"https://peteowen1.github.io/panna/reference/download_opta_release_file.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download a file from an Opta GitHub release with fallback — download_opta_release_file","text":"file_name Name file download. source \"remote\" \"local\". repo GitHub repository. tag Release tag.","code":""},{"path":"https://peteowen1.github.io/panna/reference/download_opta_release_file.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download a file from an Opta GitHub release with fallback — download_opta_release_file","text":"Path downloaded file.","code":""},{"path":"https://peteowen1.github.io/panna/reference/ensure_column.html","id":null,"dir":"Reference","previous_headings":"","what":"Ensure column exists with default — ensure_column","title":"Ensure column exists with default — ensure_column","text":"Creates column exist, optionally deriving another column.","code":""},{"path":"https://peteowen1.github.io/panna/reference/ensure_column.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Ensure column exists with default — ensure_column","text":"","code":"ensure_column(   data,   col_name,   default = FALSE,   source_col = NULL,   pattern = NULL )"},{"path":"https://peteowen1.github.io/panna/reference/ensure_column.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Ensure column exists with default — ensure_column","text":"data Data frame col_name Name column ensure default Default value function derive value source_col Optional source column pattern matching pattern Regex pattern match source column","code":""},{"path":"https://peteowen1.github.io/panna/reference/ensure_column.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Ensure column exists with default — ensure_column","text":"Data frame column ensured","code":""},{"path":"https://peteowen1.github.io/panna/reference/estimate_player_skills.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate player skills using Bayesian conjugate priors with decay weighting — estimate_player_skills","title":"Estimate player skills using Bayesian conjugate priors with decay weighting — estimate_player_skills","text":"player, estimates \"true skill\" point time using matches target_date. Uses conjugate Bayesian updating exponential time decay:","code":""},{"path":"https://peteowen1.github.io/panna/reference/estimate_player_skills.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate player skills using Bayesian conjugate priors with decay weighting — estimate_player_skills","text":"","code":"estimate_player_skills(   match_stats,   decay_params = NULL,   target_date = NULL,   min_weighted_90s = 5,   stat_cols = NULL )"},{"path":"https://peteowen1.github.io/panna/reference/estimate_player_skills.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate player skills using Bayesian conjugate priors with decay weighting — estimate_player_skills","text":"match_stats data.table compute_match_level_opta_stats(). Must contain: match_date, player_id, player_name, total_minutes, position, stat columns estimate. decay_params Named list decay rates prior strengths. Output get_default_decay_params() custom. Supports per-stat lambda overrides (named stat column). Prior strength via prior_90s (Gamma, default 10) prior_attempts (Beta, default 50). target_date Date object. matches date used. NULL, uses available data. min_weighted_90s used shrinkage (handled Bayesian prior). Retained backward compatibility. stat_cols Character vector stat columns estimate. NULL, auto-detects _p90 columns plus efficiency columns.","code":""},{"path":"https://peteowen1.github.io/panna/reference/estimate_player_skills.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate player skills using Bayesian conjugate priors with decay weighting — estimate_player_skills","text":"data.table one row per player containing estimated skill values stat, plus player_id, player_name, position, weighted_90s (effective sample size decay-weighted 90-minute units).","code":""},{"path":"https://peteowen1.github.io/panna/reference/estimate_player_skills.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Estimate player skills using Bayesian conjugate priors with decay weighting — estimate_player_skills","text":"Rate stats (per-90): Gamma-Poisson model. Raw event counts back-calculated stat_p90 * (minutes/90), decay-weighted. Gamma prior centered position mean strength controlled prior_90s. Posterior mean per-90 units. Efficiency stats (proportions): Beta-Binomial model. Successes back-calculated proportion * attempts, decay-weighted. Beta prior centered position mean strength controlled prior_attempts. Shrinkage toward position means happens naturally prior — players little data stay close prior, players abundant data driven observations.","code":""},{"path":"https://peteowen1.github.io/panna/reference/estimate_player_skills_at_date.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate player skills at a specific date — estimate_player_skills_at_date","title":"Estimate player skills at a specific date — estimate_player_skills_at_date","text":"Computes current skill vectors specified players given date. Useful match prediction need skill estimates upcoming fixtures rather end--season snapshots.","code":""},{"path":"https://peteowen1.github.io/panna/reference/estimate_player_skills_at_date.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate player skills at a specific date — estimate_player_skills_at_date","text":"","code":"estimate_player_skills_at_date(   match_stats,   decay_params = NULL,   player_ids = NULL,   date = Sys.Date(),   min_weighted_90s = 5 )"},{"path":"https://peteowen1.github.io/panna/reference/estimate_player_skills_at_date.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate player skills at a specific date — estimate_player_skills_at_date","text":"match_stats data.table compute_match_level_opta_stats(). decay_params Decay parameters. player_ids Character vector player_ids estimate. NULL, estimates players data date. date Date estimate skills . min_weighted_90s Regression threshold.","code":""},{"path":"https://peteowen1.github.io/panna/reference/estimate_player_skills_at_date.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate player skills at a specific date — estimate_player_skills_at_date","text":"data.table one row per player containing skill estimates.","code":""},{"path":"https://peteowen1.github.io/panna/reference/estimate_simple_xg.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate Simple xG from Position — estimate_simple_xg","title":"Estimate Simple xG from Position — estimate_simple_xg","text":"Simple xG estimation based distance angle goal. Used fallback xG model available. Calibrated produce ~11% mean xG (matching real shot distributions): 6 yard box (dist ~6): xG ~ 0.35-0.40 Penalty spot (dist ~12): xG ~ 0.15-0.20 Edge box (dist ~18): xG ~ 0.06-0.10 Long range (dist ~30): xG ~ 0.02-0.03","code":""},{"path":"https://peteowen1.github.io/panna/reference/estimate_simple_xg.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate Simple xG from Position — estimate_simple_xg","text":"","code":"estimate_simple_xg(x, y)"},{"path":"https://peteowen1.github.io/panna/reference/estimate_simple_xg.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate Simple xG from Position — estimate_simple_xg","text":"x X coordinate (0-100 scale, attacking right) y Y coordinate (0-100 scale)","code":""},{"path":"https://peteowen1.github.io/panna/reference/estimate_simple_xg.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate Simple xG from Position — estimate_simple_xg","text":"Estimated xG values","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_fbref_player_id.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract FBref player ID from href — extract_fbref_player_id","title":"Extract FBref player ID from href — extract_fbref_player_id","text":"Extracts 8-character hex ID FBref player URL. Example: \"/players/d080ed5e/Kylian-Mbappe\" -> \"d080ed5e\"","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_fbref_player_id.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract FBref player ID from href — extract_fbref_player_id","text":"","code":"extract_fbref_player_id(hrefs)"},{"path":"https://peteowen1.github.io/panna/reference/extract_fbref_player_id.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract FBref player ID from href — extract_fbref_player_id","text":"hrefs Character vector FBref player hrefs","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_fbref_player_id.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract FBref player ID from href — extract_fbref_player_id","text":"Character vector 8-char hex IDs (NA found)","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_fbref_player_id.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Extract FBref player ID from href — extract_fbref_player_id","text":"Note: function ready use player_href available scraped data. Currently player_href extracted scraping.","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_fbref_player_id.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract FBref player ID from href — extract_fbref_player_id","text":"","code":"if (FALSE) { # \\dontrun{ extract_fbref_player_id(\"/players/d080ed5e/Kylian-Mbappe\") # Returns \"d080ed5e\" } # }"},{"path":"https://peteowen1.github.io/panna/reference/extract_json_element.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract JSON data from Understat script — extract_json_element","title":"Extract JSON data from Understat script — extract_json_element","text":"Understat embeds data JSON script tags pattern: varName = JSON.parse('...')","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_json_element.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract JSON data from Understat script — extract_json_element","text":"","code":"extract_json_element(scripts, var_name)"},{"path":"https://peteowen1.github.io/panna/reference/extract_json_element.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract JSON data from Understat script — extract_json_element","text":"scripts Character vector script contents var_name Variable name extract (e.g., \"rostersData\", \"shotsData\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_json_element.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract JSON data from Understat script — extract_json_element","text":"Parsed JSON R list, NULL found","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_match_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract match events with timing — extract_match_events","title":"Extract match events with timing — extract_match_events","text":"Parses goals, substitutions, red cards event data minutes.","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_match_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract match events with timing — extract_match_events","text":"","code":"extract_match_events(events, match_id)"},{"path":"https://peteowen1.github.io/panna/reference/extract_match_events.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract match events with timing — extract_match_events","text":"events Processed events data frame single match match_id Match identifier filter ","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_match_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract match events with timing — extract_match_events","text":"Data frame events sorted minute","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_match_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract match metadata from FBref page — extract_match_metadata","title":"Extract match metadata from FBref page — extract_match_metadata","text":"Parses scorebox get teams, score, date, manager, captain, venue, attendance, officials, formations.","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_match_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract match metadata from FBref page — extract_match_metadata","text":"","code":"extract_match_metadata(page, match_url)"},{"path":"https://peteowen1.github.io/panna/reference/extract_match_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract match metadata from FBref page — extract_match_metadata","text":"page Parsed HTML document match_url Original match URL ID extraction","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_match_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract match metadata from FBref page — extract_match_metadata","text":"Data frame match metadata (single row)","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_od_rapm_coefficients.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract offensive/defensive RAPM coefficients — extract_od_rapm_coefficients","title":"Extract offensive/defensive RAPM coefficients — extract_od_rapm_coefficients","text":"Gets separate O-RAPM D-RAPM model fit O/D matrix.","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_od_rapm_coefficients.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract offensive/defensive RAPM coefficients — extract_od_rapm_coefficients","text":"","code":"extract_od_rapm_coefficients(model, lambda = \"min\")"},{"path":"https://peteowen1.github.io/panna/reference/extract_od_rapm_coefficients.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract offensive/defensive RAPM coefficients — extract_od_rapm_coefficients","text":"model Fitted RAPM model O/D separated matrix lambda lambda use","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_od_rapm_coefficients.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract offensive/defensive RAPM coefficients — extract_od_rapm_coefficients","text":"Data frame offensive defensive ratings","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_rapm_coefficients.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract RAPM coefficients — extract_rapm_coefficients","title":"Extract RAPM coefficients — extract_rapm_coefficients","text":"Gets player ratings fitted RAPM model.","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_rapm_coefficients.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract RAPM coefficients — extract_rapm_coefficients","text":"","code":"extract_rapm_coefficients(model, lambda = \"min\")"},{"path":"https://peteowen1.github.io/panna/reference/extract_rapm_coefficients.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract RAPM coefficients — extract_rapm_coefficients","text":"model Fitted RAPM model fit_rapm lambda lambda use (\"min\" \"1se\" numeric)","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_rapm_coefficients.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract RAPM coefficients — extract_rapm_coefficients","text":"Data frame player ratings","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_rapm_ratings.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract RAPM ratings from fitted model — extract_rapm_ratings","title":"Extract RAPM ratings from fitted model — extract_rapm_ratings","text":"Calculates player ratings offense_coef - defense_coef. Positive = good, negative = bad.","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_rapm_ratings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract RAPM ratings from fitted model — extract_rapm_ratings","text":"","code":"extract_rapm_ratings(model, lambda = \"min\")"},{"path":"https://peteowen1.github.io/panna/reference/extract_rapm_ratings.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract RAPM ratings from fitted model — extract_rapm_ratings","text":"model Fitted RAPM model fit_rapm lambda lambda use (\"min\" \"1se\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_rapm_ratings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract RAPM ratings from fitted model — extract_rapm_ratings","text":"Data frame player ratings","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_season_end_year_from_match_id.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract season end year from match_id — extract_season_end_year_from_match_id","title":"Extract season end year from match_id — extract_season_end_year_from_match_id","text":"Extracts season end year numeric value match_id. Match IDs format \"2017-2018_20170915_TeamA_TeamB\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_season_end_year_from_match_id.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract season end year from match_id — extract_season_end_year_from_match_id","text":"","code":"extract_season_end_year_from_match_id(match_id)"},{"path":"https://peteowen1.github.io/panna/reference/extract_season_end_year_from_match_id.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract season end year from match_id — extract_season_end_year_from_match_id","text":"match_id Character vector match IDs","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_season_end_year_from_match_id.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract season end year from match_id — extract_season_end_year_from_match_id","text":"Numeric vector season end years (e.g., 2018)","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_season_end_year_from_match_id.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract season end year from match_id — extract_season_end_year_from_match_id","text":"","code":"if (FALSE) { # \\dontrun{ extract_season_end_year_from_match_id(\"2017-2018_20170915_Bournemouth_Brighton\") # Returns 2018 } # }"},{"path":"https://peteowen1.github.io/panna/reference/extract_season_from_date.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Season from Match Date — extract_season_from_date","title":"Extract Season from Match Date — extract_season_from_date","text":"Determines season string (e.g., \"2024-2025\") match date. Assumes seasons run August May: Aug-Dec = first year, Jan-May = second year.","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_season_from_date.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Season from Match Date — extract_season_from_date","text":"","code":"extract_season_from_date(date)"},{"path":"https://peteowen1.github.io/panna/reference/extract_season_from_date.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Season from Match Date — extract_season_from_date","text":"date Date character date string (YYYY-MM-DD format)","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_season_from_date.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Season from Match Date — extract_season_from_date","text":"Character season string (e.g., \"2024-2025\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_season_from_match_id.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract season from match_id — extract_season_from_match_id","title":"Extract season from match_id — extract_season_from_match_id","text":"Extracts season string match_id. Match IDs format \"2017-2018_20170915_TeamA_TeamB\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_season_from_match_id.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract season from match_id — extract_season_from_match_id","text":"","code":"extract_season_from_match_id(match_id)"},{"path":"https://peteowen1.github.io/panna/reference/extract_season_from_match_id.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract season from match_id — extract_season_from_match_id","text":"match_id Character vector match IDs","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_season_from_match_id.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract season from match_id — extract_season_from_match_id","text":"Character vector season strings (e.g., \"2017-2018\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_season_from_match_id.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Extract season from match_id — extract_season_from_match_id","text":"","code":"if (FALSE) { # \\dontrun{ extract_season_from_match_id(\"2017-2018_20170915_Bournemouth_Brighton\") # Returns \"2017-2018\" } # }"},{"path":"https://peteowen1.github.io/panna/reference/extract_season_from_url.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract season from FBref match URL — extract_season_from_url","title":"Extract season from FBref match URL — extract_season_from_url","text":"Extract season FBref match URL","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_season_from_url.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract season from FBref match URL — extract_season_from_url","text":"","code":"extract_season_from_url(urls)"},{"path":"https://peteowen1.github.io/panna/reference/extract_season_from_url.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract season from FBref match URL — extract_season_from_url","text":"urls Character vector match URLs","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_season_from_url.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract season from FBref match URL — extract_season_from_url","text":"Character vector seasons","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_season_range.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract season range from a data frame — extract_season_range","title":"Extract season range from a data frame — extract_season_range","text":"Extracts min/max season_end_year data frame. data pannadata column.","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_season_range.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract season range from a data frame — extract_season_range","text":"","code":"extract_season_range(data, data_name = \"data\")"},{"path":"https://peteowen1.github.io/panna/reference/extract_season_range.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract season range from a data frame — extract_season_range","text":"data Data frame extract season range data_name Name data reporting (unused, kept compatibility)","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_season_range.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract season range from a data frame — extract_season_range","text":"Named list min_season, max_season, n_seasons","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_shots_from_spadl.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract Shots from xG-Scored SPADL for Splint Pipeline — extract_shots_from_spadl","title":"Extract Shots from xG-Scored SPADL for Splint Pipeline — extract_shots_from_spadl","text":"Extracts shot rows SPADL data scored xG predictions, formats splint creation pipeline. bridges xMetrics infrastructure (SPADL + xG model) RAPM/splint pipeline.","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_shots_from_spadl.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract Shots from xG-Scored SPADL for Splint Pipeline — extract_shots_from_spadl","text":"","code":"extract_shots_from_spadl(spadl, lineups)"},{"path":"https://peteowen1.github.io/panna/reference/extract_shots_from_spadl.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract Shots from xG-Scored SPADL for Splint Pipeline — extract_shots_from_spadl","text":"spadl SPADL actions data frame xg is_penalty columns (add_xg_to_spadl() penalty detection). lineups Lineup data load_opta_lineups() team_name mapping.","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_shots_from_spadl.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract Shots from xG-Scored SPADL for Splint Pipeline — extract_shots_from_spadl","text":"Data frame one row per shot containing: match_id, minute, team, player_id, player_name xg: Model-predicted xG (penalties overridden 0.76) is_goal: Whether shot resulted goal is_penalty: Whether shot penalty","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_spm_coefficients.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract SPM coefficients — extract_spm_coefficients","title":"Extract SPM coefficients — extract_spm_coefficients","text":"Gets feature weights fitted SPM model.","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_spm_coefficients.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract SPM coefficients — extract_spm_coefficients","text":"","code":"extract_spm_coefficients(model, lambda = \"min\")"},{"path":"https://peteowen1.github.io/panna/reference/extract_spm_coefficients.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract SPM coefficients — extract_spm_coefficients","text":"model Fitted SPM model fit_spm_model lambda lambda use (\"min\" \"1se\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_spm_coefficients.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract SPM coefficients — extract_spm_coefficients","text":"Named vector coefficients","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_sub_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract substitution times from lineups — extract_sub_events","title":"Extract substitution times from lineups — extract_sub_events","text":"Uses pre-calculated on_minute leading space detection player names. FBref encodes substitutes leading spaces - subs come player directly team.","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_sub_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract substitution times from lineups — extract_sub_events","text":"","code":"extract_sub_events(lineups)"},{"path":"https://peteowen1.github.io/panna/reference/extract_sub_events.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract substitution times from lineups — extract_sub_events","text":"lineups Lineups data on_minute column","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_sub_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract substitution times from lineups — extract_sub_events","text":"Numeric vector substitution minutes","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_understat_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract timeline events from Understat match page — extract_understat_events","title":"Extract timeline events from Understat match page — extract_understat_events","text":"Parses HTML timeline extract goals, substitutions, cards. data available initial HTML (unlike roster/shots).","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_understat_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract timeline events from Understat match page — extract_understat_events","text":"","code":"extract_understat_events(page, understat_id)"},{"path":"https://peteowen1.github.io/panna/reference/extract_understat_events.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract timeline events from Understat match page — extract_understat_events","text":"page Parsed HTML document understat_id Understat match ID","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_understat_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract timeline events from Understat match page — extract_understat_events","text":"Data frame events (goals, subs, cards), NULL found","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_understat_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract match metadata from Understat page — extract_understat_metadata","title":"Extract match metadata from Understat page — extract_understat_metadata","text":"Parses match info including teams, scores, xG values. Note: Understat uses flat JSON structure match_info.","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_understat_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract match metadata from Understat page — extract_understat_metadata","text":"","code":"extract_understat_metadata(page, understat_id)"},{"path":"https://peteowen1.github.io/panna/reference/extract_understat_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract match metadata from Understat page — extract_understat_metadata","text":"page Parsed HTML document understat_id Understat match ID","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_understat_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract match metadata from Understat page — extract_understat_metadata","text":"Data frame match metadata (single row)","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_understat_roster.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract roster data from Understat API response — extract_understat_roster","title":"Extract roster data from Understat API response — extract_understat_roster","text":"Parses player statistics API rosters data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_understat_roster.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract roster data from Understat API response — extract_understat_roster","text":"","code":"extract_understat_roster(api_data, understat_id)"},{"path":"https://peteowen1.github.io/panna/reference/extract_understat_roster.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract roster data from Understat API response — extract_understat_roster","text":"api_data List returned fetch_understat_match_api understat_id Understat match ID","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_understat_roster.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract roster data from Understat API response — extract_understat_roster","text":"Data frame player stats, NULL found","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_understat_shots.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract shots data from Understat API response — extract_understat_shots","title":"Extract shots data from Understat API response — extract_understat_shots","text":"Parses shot-level xG data API shots data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_understat_shots.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract shots data from Understat API response — extract_understat_shots","text":"","code":"extract_understat_shots(api_data, understat_id)"},{"path":"https://peteowen1.github.io/panna/reference/extract_understat_shots.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract shots data from Understat API response — extract_understat_shots","text":"api_data List returned fetch_understat_match_api understat_id Understat match ID","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_understat_shots.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract shots data from Understat API response — extract_understat_shots","text":"Data frame shot data, NULL found","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_xrapm_ratings.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract xRAPM ratings (with prior) — extract_xrapm_ratings","title":"Extract xRAPM ratings (with prior) — extract_xrapm_ratings","text":"Extracts player ratings model fit SPM prior. final coefficient gamma + prior, gamma deviation.","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_xrapm_ratings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract xRAPM ratings (with prior) — extract_xrapm_ratings","text":"","code":"extract_xrapm_ratings(model, lambda = \"min\")"},{"path":"https://peteowen1.github.io/panna/reference/extract_xrapm_ratings.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract xRAPM ratings (with prior) — extract_xrapm_ratings","text":"model Fitted xRAPM model fit_rapm_with_prior lambda lambda use (\"min\" \"1se\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/extract_xrapm_ratings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract xRAPM ratings (with prior) — extract_xrapm_ratings","text":"Data frame player ratings including deviation prior","code":""},{"path":"https://peteowen1.github.io/panna/reference/fbref_competitions.html","id":null,"dir":"Reference","previous_headings":"","what":"FBref competition metadata — fbref_competitions","title":"FBref competition metadata — fbref_competitions","text":"data frame containing FBref competition IDs metadata supported competitions.","code":""},{"path":"https://peteowen1.github.io/panna/reference/fbref_competitions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"FBref competition metadata — fbref_competitions","text":"","code":"fbref_competitions"},{"path":"https://peteowen1.github.io/panna/reference/fbref_competitions.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"FBref competition metadata — fbref_competitions","text":"data frame columns: code Short code used file paths (e.g., \"ENG\", \"WC\") fbref_id FBref competition ID URL construction name Full competition name url_slug URL-friendly name FBref URLs (e.g., \"Premier-League\") type Competition type: \"league\", \"cup\", \"european\", \"national_team\" season_format seasons formatted: \"YYYY-YYYY\" \"YYYY\"","code":""},{"path":"https://peteowen1.github.io/panna/reference/fbref_competitions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"FBref competition metadata — fbref_competitions","text":"","code":"fbref_competitions #>               code fbref_id                       name              url_slug #> 1              ENG        9             Premier League        Premier-League #> 2              ESP       12                    La Liga               La-Liga #> 3              GER       20                 Bundesliga            Bundesliga #> 4              ITA       11                    Serie A               Serie-A #> 5              FRA       13                    Ligue 1               Ligue-1 #> 6              UCL        8      UEFA Champions League      Champions-League #> 7              UEL       19         UEFA Europa League         Europa-League #> 8           FA_CUP      514                     FA Cup                FA-Cup #> 9          EFL_CUP      690                    EFL Cup               EFL-Cup #> 10    COPA_DEL_REY      569               Copa del Rey          Copa-del-Rey #> 11       DFB_POKAL      521                  DFB-Pokal             DFB-Pokal #> 12    COPPA_ITALIA      529               Coppa Italia          Coppa-Italia #> 13 COUPE_DE_FRANCE      518            Coupe de France       Coupe-de-France #> 14              WC        1             FIFA World Cup             World-Cup #> 15            EURO      676 UEFA European Championship European-Championship #> 16    COPA_AMERICA      685               Copa America          Copa-America #> 17           AFCON      656      Africa Cup of Nations Africa-Cup-of-Nations #> 18  NATIONS_LEAGUE      677        UEFA Nations League        Nations-League #> 19        GOLD_CUP      681          CONCACAF Gold Cup              Gold-Cup #> 20       ASIAN_CUP      664              AFC Asian Cup             Asian-Cup #>             type season_format #> 1         league     YYYY-YYYY #> 2         league     YYYY-YYYY #> 3         league     YYYY-YYYY #> 4         league     YYYY-YYYY #> 5         league     YYYY-YYYY #> 6       european     YYYY-YYYY #> 7       european     YYYY-YYYY #> 8            cup     YYYY-YYYY #> 9            cup     YYYY-YYYY #> 10           cup     YYYY-YYYY #> 11           cup     YYYY-YYYY #> 12           cup     YYYY-YYYY #> 13           cup     YYYY-YYYY #> 14 national_team          YYYY #> 15 national_team          YYYY #> 16 national_team          YYYY #> 17 national_team          YYYY #> 18 national_team     YYYY-YYYY #> 19 national_team          YYYY #> 20 national_team          YYYY fbref_competitions[fbref_competitions$type == \"national_team\", ] #>              code fbref_id                       name              url_slug #> 14             WC        1             FIFA World Cup             World-Cup #> 15           EURO      676 UEFA European Championship European-Championship #> 16   COPA_AMERICA      685               Copa America          Copa-America #> 17          AFCON      656      Africa Cup of Nations Africa-Cup-of-Nations #> 18 NATIONS_LEAGUE      677        UEFA Nations League        Nations-League #> 19       GOLD_CUP      681          CONCACAF Gold Cup              Gold-Cup #> 20      ASIAN_CUP      664              AFC Asian Cup             Asian-Cup #>             type season_format #> 14 national_team          YYYY #> 15 national_team          YYYY #> 16 national_team          YYYY #> 17 national_team          YYYY #> 18 national_team     YYYY-YYYY #> 19 national_team          YYYY #> 20 national_team          YYYY"},{"path":"https://peteowen1.github.io/panna/reference/fbref_to_understat_season.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert FBref season to Understat season — fbref_to_understat_season","title":"Convert FBref season to Understat season — fbref_to_understat_season","text":"Converts FBref's YYYY-YYYY format Understat's YYYY format. Takes start year season.","code":""},{"path":"https://peteowen1.github.io/panna/reference/fbref_to_understat_season.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert FBref season to Understat season — fbref_to_understat_season","text":"","code":"fbref_to_understat_season(fbref_season)"},{"path":"https://peteowen1.github.io/panna/reference/fbref_to_understat_season.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert FBref season to Understat season — fbref_to_understat_season","text":"fbref_season Character, season FBref format (e.g., \"2023-2024\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/fbref_to_understat_season.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert FBref season to Understat season — fbref_to_understat_season","text":"Character, season Understat format (e.g., \"2023\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/fbref_to_understat_season.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert FBref season to Understat season — fbref_to_understat_season","text":"","code":"if (FALSE) { # \\dontrun{ fbref_to_understat_season(\"2024\")       # \"2024\" (already correct) } # }"},{"path":"https://peteowen1.github.io/panna/reference/fetch_match_page.html","id":null,"dir":"Reference","previous_headings":"","what":"Fetch FBref match page HTML — fetch_match_page","title":"Fetch FBref match page HTML — fetch_match_page","text":"Makes HTTP request browser headers avoid Cloudflare blocking.","code":""},{"path":"https://peteowen1.github.io/panna/reference/fetch_match_page.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fetch FBref match page HTML — fetch_match_page","text":"","code":"fetch_match_page(match_url, timeout = 30)"},{"path":"https://peteowen1.github.io/panna/reference/fetch_match_page.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fetch FBref match page HTML — fetch_match_page","text":"match_url FBref match URL timeout Request timeout seconds (default 30)","code":""},{"path":"https://peteowen1.github.io/panna/reference/fetch_match_page.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fetch FBref match page HTML — fetch_match_page","text":"Parsed HTML document (rvest xml_document) NULL failure","code":""},{"path":"https://peteowen1.github.io/panna/reference/fetch_understat_match_api.html","id":null,"dir":"Reference","previous_headings":"","what":"Fetch match data from Understat API — fetch_understat_match_api","title":"Fetch match data from Understat API — fetch_understat_match_api","text":"Calls undocumented API endpoint returns full match data. endpoint provides rosters shots data main HTML.","code":""},{"path":"https://peteowen1.github.io/panna/reference/fetch_understat_match_api.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fetch match data from Understat API — fetch_understat_match_api","text":"","code":"fetch_understat_match_api(understat_id)"},{"path":"https://peteowen1.github.io/panna/reference/fetch_understat_match_api.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fetch match data from Understat API — fetch_understat_match_api","text":"understat_id Understat match ID","code":""},{"path":"https://peteowen1.github.io/panna/reference/fetch_understat_match_api.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fetch match data from Understat API — fetch_understat_match_api","text":"List rosters shots data, NULL failure","code":""},{"path":"https://peteowen1.github.io/panna/reference/fetch_understat_page.html","id":null,"dir":"Reference","previous_headings":"","what":"Fetch Understat page HTML — fetch_understat_page","title":"Fetch Understat page HTML — fetch_understat_page","text":"Makes HTTP request browser headers.","code":""},{"path":"https://peteowen1.github.io/panna/reference/fetch_understat_page.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fetch Understat page HTML — fetch_understat_page","text":"","code":"fetch_understat_page(url, timeout = 30)"},{"path":"https://peteowen1.github.io/panna/reference/fetch_understat_page.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fetch Understat page HTML — fetch_understat_page","text":"url Understat URL timeout Request timeout seconds (default 30)","code":""},{"path":"https://peteowen1.github.io/panna/reference/fetch_understat_page.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fetch Understat page HTML — fetch_understat_page","text":"Parsed HTML document (rvest xml_document) NULL failure","code":""},{"path":"https://peteowen1.github.io/panna/reference/fetch_with_retry.html","id":null,"dir":"Reference","previous_headings":"","what":"HTTP GET with exponential backoff retry — fetch_with_retry","title":"HTTP GET with exponential backoff retry — fetch_with_retry","text":"Wraps httr::GET automatic retry transient failures (5xx errors, connection timeouts). retry rate limiting (429) blocking (403) require different handling.","code":""},{"path":"https://peteowen1.github.io/panna/reference/fetch_with_retry.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"HTTP GET with exponential backoff retry — fetch_with_retry","text":"","code":"fetch_with_retry(url, max_retries = 3, base_delay = 1, max_delay = 30, ...)"},{"path":"https://peteowen1.github.io/panna/reference/fetch_with_retry.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"HTTP GET with exponential backoff retry — fetch_with_retry","text":"url URL fetch max_retries Maximum number retry attempts (default 3) base_delay Initial delay seconds first retry (default 1) max_delay Maximum delay retries seconds (default 30) ... Additional arguments passed httr::GET (headers, timeout, handle)","code":""},{"path":"https://peteowen1.github.io/panna/reference/fetch_with_retry.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"HTTP GET with exponential backoff retry — fetch_with_retry","text":"httr response object, NULL attributes permanent failure","code":""},{"path":"https://peteowen1.github.io/panna/reference/filter_bad_xg_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Detect and filter bad xG data from splints — filter_bad_xg_data","title":"Detect and filter bad xG data from splints — filter_bad_xg_data","text":"Identifies league-seasons high rates missing/zero xG data filters . Reports filtered.","code":""},{"path":"https://peteowen1.github.io/panna/reference/filter_bad_xg_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Detect and filter bad xG data from splints — filter_bad_xg_data","text":"","code":"filter_bad_xg_data(splint_data, zero_xg_threshold = 20, verbose = TRUE)"},{"path":"https://peteowen1.github.io/panna/reference/filter_bad_xg_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Detect and filter bad xG data from splints — filter_bad_xg_data","text":"splint_data Splint data list create_all_splints zero_xg_threshold Percentage threshold flagging bad data (default 20%) verbose Whether print filtering report","code":""},{"path":"https://peteowen1.github.io/panna/reference/filter_bad_xg_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Detect and filter bad xG data from splints — filter_bad_xg_data","text":"List filtered splint_data filtering report","code":""},{"path":"https://peteowen1.github.io/panna/reference/filter_rapm_by_season.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter RAPM data to specific seasons — filter_rapm_by_season","title":"Filter RAPM data to specific seasons — filter_rapm_by_season","text":"Subsets RAPM data include splints specified seasons.","code":""},{"path":"https://peteowen1.github.io/panna/reference/filter_rapm_by_season.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter RAPM data to specific seasons — filter_rapm_by_season","text":"","code":"filter_rapm_by_season(rapm_data, seasons, match_info)"},{"path":"https://peteowen1.github.io/panna/reference/filter_rapm_by_season.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter RAPM data to specific seasons — filter_rapm_by_season","text":"rapm_data List prepare_rapm_data seasons Character vector seasons include match_info Match info data frame season column","code":""},{"path":"https://peteowen1.github.io/panna/reference/filter_rapm_by_season.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filter RAPM data to specific seasons — filter_rapm_by_season","text":"Filtered rapm_data","code":""},{"path":"https://peteowen1.github.io/panna/reference/find_column.html","id":null,"dir":"Reference","previous_headings":"","what":"Find first matching column from candidates — find_column","title":"Find first matching column from candidates — find_column","text":"Returns first column name exists data frame.","code":""},{"path":"https://peteowen1.github.io/panna/reference/find_column.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Find first matching column from candidates — find_column","text":"","code":"find_column(data, candidates)"},{"path":"https://peteowen1.github.io/panna/reference/find_column.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Find first matching column from candidates — find_column","text":"data Data frame search candidates Character vector column names try (priority order)","code":""},{"path":"https://peteowen1.github.io/panna/reference/find_column.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Find first matching column from candidates — find_column","text":"First matching column name, NULL none found","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_epv_conceding_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Deprecated: Fit EPV Conceding Model — fit_epv_conceding_model","title":"Deprecated: Fit EPV Conceding Model — fit_epv_conceding_model","text":"function deprecated. Please use fit_epv_model() instead. unified EPV model now handles scoring conceding predictions using multinomial approach.","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_epv_conceding_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Deprecated: Fit EPV Conceding Model — fit_epv_conceding_model","text":"","code":"fit_epv_conceding_model(...)"},{"path":"https://peteowen1.github.io/panna/reference/fit_epv_conceding_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Deprecated: Fit EPV Conceding Model — fit_epv_conceding_model","text":"... Arguments passed fit_epv_model()","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_epv_conceding_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Deprecated: Fit EPV Conceding Model — fit_epv_conceding_model","text":"EPV model object","code":""},{"path":[]},{"path":"https://peteowen1.github.io/panna/reference/fit_epv_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit EPV Model — fit_epv_model","title":"Fit EPV Model — fit_epv_model","text":"Trains XGBoost model predict expected possession value. Supports two methods: \"goal\": Multinomial classification (scores next: team/opponent/nobody) \"xg\": Regression signed xG next shot (+team, -opponent, 0 none)","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_epv_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit EPV Model — fit_epv_model","text":"","code":"fit_epv_model(   features,   labels,   method = c(\"goal\", \"xg\"),   nfolds = 5,   max_depth = 6,   eta = 0.1,   subsample = 0.8,   colsample_bytree = 0.8,   nrounds = 1000,   early_stopping_rounds = 50,   verbose = 1 )"},{"path":"https://peteowen1.github.io/panna/reference/fit_epv_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit EPV Model — fit_epv_model","text":"features Data frame create_epv_features() labels Data frame labels (next_goal_label \"goal\", next_xg_label \"xg\") method Either \"goal\" (multinomial) \"xg\" (regression). Default \"goal\". nfolds Number CV folds (default 5) max_depth Maximum tree depth (default 6) eta Learning rate (default 0.05) subsample Row subsampling (default 0.8) colsample_bytree Column subsampling (default 0.8) nrounds Maximum boosting rounds (default 1000) early_stopping_rounds Early stopping patience (default 50) verbose Print progress (default 1)","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_epv_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit EPV Model — fit_epv_model","text":"Fitted EPV model metadata","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_epv_scoring_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Deprecated: Fit EPV Scoring Model — fit_epv_scoring_model","title":"Deprecated: Fit EPV Scoring Model — fit_epv_scoring_model","text":"function deprecated. Please use fit_epv_model() instead. unified EPV model now handles scoring conceding predictions using multinomial approach.","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_epv_scoring_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Deprecated: Fit EPV Scoring Model — fit_epv_scoring_model","text":"","code":"fit_epv_scoring_model(...)"},{"path":"https://peteowen1.github.io/panna/reference/fit_epv_scoring_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Deprecated: Fit EPV Scoring Model — fit_epv_scoring_model","text":"... Arguments passed fit_epv_model()","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_epv_scoring_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Deprecated: Fit EPV Scoring Model — fit_epv_scoring_model","text":"EPV model object","code":""},{"path":[]},{"path":"https://peteowen1.github.io/panna/reference/fit_goals_xgb.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit XGBoost Poisson Model for Goal Prediction — fit_goals_xgb","title":"Fit XGBoost Poisson Model for Goal Prediction — fit_goals_xgb","text":"Fits XGBoost model Poisson objective predicting goal counts. Uses time-based cross-validation early stopping.","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_goals_xgb.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit XGBoost Poisson Model for Goal Prediction — fit_goals_xgb","text":"","code":"fit_goals_xgb(   X,   y,   nfolds = 5L,   params = NULL,   nrounds = 500L,   early_stopping = 30L,   verbose = 1L )"},{"path":"https://peteowen1.github.io/panna/reference/fit_goals_xgb.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit XGBoost Poisson Model for Goal Prediction — fit_goals_xgb","text":"X Feature matrix y Target vector (goal counts) nfolds Number CV folds (default 5) params XGBoost parameters (default Poisson regression) nrounds Max boosting rounds (default 500) early_stopping Patience early stopping (default 30) verbose Print progress (default 1)","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_goals_xgb.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit XGBoost Poisson Model for Goal Prediction — fit_goals_xgb","text":"List model, cv_result, best_nrounds, metadata","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_outcome_xgb.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit XGBoost Multinomial Model for Match Outcome — fit_outcome_xgb","title":"Fit XGBoost Multinomial Model for Match Outcome — fit_outcome_xgb","text":"Fits XGBoost multi:softprob P(Home Win), P(Draw), P(Away Win). Labels: 0 = Home Win, 1 = Draw, 2 = Away Win.","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_outcome_xgb.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit XGBoost Multinomial Model for Match Outcome — fit_outcome_xgb","text":"","code":"fit_outcome_xgb(   X,   y,   nfolds = 5L,   params = NULL,   nrounds = 500L,   early_stopping = 30L,   verbose = 1L )"},{"path":"https://peteowen1.github.io/panna/reference/fit_outcome_xgb.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit XGBoost Multinomial Model for Match Outcome — fit_outcome_xgb","text":"X Feature matrix y Integer labels (0=H, 1=D, 2=) nfolds Number CV folds (default 5) params XGBoost parameters (default multinomial) nrounds Max boosting rounds (default 500) early_stopping Patience early stopping (default 30) verbose Print progress (default 1)","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_outcome_xgb.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit XGBoost Multinomial Model for Match Outcome — fit_outcome_xgb","text":"List model, cv_result, best_nrounds, metadata","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_panna_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit end-to-end panna model — fit_panna_model","title":"Fit end-to-end panna model — fit_panna_model","text":"Complete pipeline splint data panna ratings.","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_panna_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit end-to-end panna model — fit_panna_model","text":"","code":"fit_panna_model(   splint_data,   player_features,   min_minutes = 180,   lambda_prior = 1,   validate = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/fit_panna_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit end-to-end panna model — fit_panna_model","text":"splint_data Combined splint data player_features Player feature matrix min_minutes Minimum minutes inclusion lambda_prior Regularization strength validate Whether run validation","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_panna_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit end-to-end panna model — fit_panna_model","text":"List panna model intermediate results","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_panna_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit end-to-end panna model — fit_panna_model","text":"","code":"if (FALSE) { # \\dontrun{ panna_model <- fit_panna_model(splint_data, player_features, min_minutes = 180) head(get_panna_ratings(panna_model)) } # }"},{"path":"https://peteowen1.github.io/panna/reference/fit_rapm.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit RAPM model — fit_rapm","title":"Fit RAPM model — fit_rapm","text":"Fits ridge regression design matrix : Target: xgf90 (xG per 90) gf90 (goals per 90) Player columns: playerX_off, playerX_def Covariates: gd, gf, ga, avg_min, is_home","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_rapm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit RAPM model — fit_rapm","text":"","code":"fit_rapm(   rapm_data,   alpha = 0,   nfolds = 10,   use_weights = TRUE,   standardize = FALSE,   penalize_covariates = FALSE,   parallel = TRUE,   n_cores = NULL )"},{"path":"https://peteowen1.github.io/panna/reference/fit_rapm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit RAPM model — fit_rapm","text":"rapm_data List prepare_rapm_data alpha Elastic net mixing parameter (0 = ridge, 1 = lasso) nfolds Number CV folds lambda selection use_weights Whether use splint duration weights standardize Whether standardize predictors penalize_covariates Whether penalize covariate coefficients parallel Whether use parallel processing CV folds n_cores Number cores (default: half available)","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_rapm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit RAPM model — fit_rapm","text":"Fitted model metadata","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_rapm.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fit RAPM model — fit_rapm","text":"target type determined rapm_data (set prepare_rapm_data).","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_rapm_with_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit RAPM with SPM prior (xRAPM) — fit_rapm_with_prior","title":"Fit RAPM with SPM prior (xRAPM) — fit_rapm_with_prior","text":"Fits RAPM model shrinking toward SPM predictions instead zero. helps separate players always appear together using box score statistics Bayesian prior.","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_rapm_with_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit RAPM with SPM prior (xRAPM) — fit_rapm_with_prior","text":"","code":"fit_rapm_with_prior(   rapm_data,   offense_prior,   defense_prior,   alpha = 0,   nfolds = 10,   use_weights = TRUE,   penalize_covariates = FALSE )"},{"path":"https://peteowen1.github.io/panna/reference/fit_rapm_with_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit RAPM with SPM prior (xRAPM) — fit_rapm_with_prior","text":"rapm_data List prepare_rapm_data offense_prior Named vector offensive SPM predictions (player_id) defense_prior Named vector defensive SPM predictions (player_id) alpha Elastic net mixing parameter (0 = ridge) nfolds Number CV folds use_weights Whether use splint duration weights penalize_covariates Whether penalize covariate coefficients","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_rapm_with_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit RAPM with SPM prior (xRAPM) — fit_rapm_with_prior","text":"Fitted model prior adjustment metadata","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_rapm_with_prior.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fit RAPM with SPM prior (xRAPM) — fit_rapm_with_prior","text":"O/D design matrix: offense_prior: SPM-predicted offensive contribution defense_prior: SPM-predicted defensive contribution","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_spm_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit SPM model — fit_spm_model","title":"Fit SPM model — fit_spm_model","text":"Fits elastic net model predicting RAPM box score statistics. Weights observations minutes played (sqrt transform) default reduce influence noisy low-minute players whose RAPM per-90 stats unreliable.","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_spm_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit SPM model — fit_spm_model","text":"","code":"fit_spm_model(   data,   predictor_cols = NULL,   alpha = 0.5,   nfolds = 10,   weight_by_minutes = TRUE,   weight_transform = \"sqrt\" )"},{"path":"https://peteowen1.github.io/panna/reference/fit_spm_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit SPM model — fit_spm_model","text":"data Data frame prepare_spm_regression_data aggregate_player_stats joined RAPM ratings predictor_cols Character vector predictor column names alpha Elastic net mixing (0=ridge, 1=lasso, default 0.5) nfolds Number CV folds weight_by_minutes Whether weight observations total_minutes (default TRUE). Reduces influence noisy low-minute estimates model coefficients. weight_transform transform minutes weighting: \"sqrt\" (default) - square root minutes (moderate weighting) \"linear\" - raw minutes (strong weighting toward high-minute players) \"log\" - log minutes (gentle weighting) \"none\" - equal weights","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_spm_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit SPM model — fit_spm_model","text":"Fitted glmnet model metadata","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_spm_opta.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit SPM model using Opta features — fit_spm_opta","title":"Fit SPM model using Opta features — fit_spm_opta","text":"Fits elastic net model predicting RAPM Opta box score statistics. Uses Opta-specific per-90 features prediction.","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_spm_opta.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit SPM model using Opta features — fit_spm_opta","text":"","code":"fit_spm_opta(   data,   alpha = 0.5,   nfolds = 10,   weight_by_minutes = TRUE,   weight_transform = \"sqrt\" )"},{"path":"https://peteowen1.github.io/panna/reference/fit_spm_opta.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit SPM model using Opta features — fit_spm_opta","text":"data Data frame aggregate_opta_stats joined RAPM ratings alpha Elastic net mixing (0=ridge, 1=lasso, default 0.5) nfolds Number CV folds (default 10) weight_by_minutes Whether weight minutes (default TRUE) weight_transform Transform weighting: \"sqrt\", \"linear\", \"log\"","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_spm_opta.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit SPM model using Opta features — fit_spm_opta","text":"Fitted glmnet model metadata","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_spm_opta.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit SPM model using Opta features — fit_spm_opta","text":"","code":"if (FALSE) { # \\dontrun{ # Aggregate Opta stats opta_features <- aggregate_opta_stats(opta_stats)  # Join with RAPM spm_data <- opta_features |>   inner_join(rapm_ratings |> select(player_id, rapm), by = \"player_id\")  # Fit Opta SPM opta_spm <- fit_spm_opta(spm_data) } # }"},{"path":"https://peteowen1.github.io/panna/reference/fit_spm_xgb.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit SPM model using XGBoost — fit_spm_xgb","title":"Fit SPM model using XGBoost — fit_spm_xgb","text":"Fits XGBoost model predicting RAPM box score statistics. Uses xgb.cv find optimal number boosting rounds via early stopping.","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_spm_xgb.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit SPM model using XGBoost — fit_spm_xgb","text":"","code":"fit_spm_xgb(   data,   predictor_cols = NULL,   nfolds = 10,   max_depth = 4,   eta = 0.1,   subsample = 0.8,   colsample_bytree = 0.8,   nrounds = 500,   early_stopping_rounds = 20,   weight_by_minutes = TRUE,   weight_transform = \"sqrt\",   verbose = 1 )"},{"path":"https://peteowen1.github.io/panna/reference/fit_spm_xgb.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit SPM model using XGBoost — fit_spm_xgb","text":"data Data frame prepare_spm_regression_data aggregate_player_stats joined RAPM ratings predictor_cols Character vector predictor column names nfolds Number CV folds (default 10) max_depth Maximum tree depth (default 4) eta Learning rate (default 0.1) subsample Row subsampling ratio (default 0.8) colsample_bytree Column subsampling ratio (default 0.8) nrounds Maximum boosting rounds (default 500, uses early stopping) early_stopping_rounds Stop improvement many rounds (default 20) weight_by_minutes Whether weight observations total_minutes (default TRUE) weight_transform transform minutes weighting: \"sqrt\", \"linear\", \"log\" verbose Print progress (0=silent, 1=performance, 2=details)","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_spm_xgb.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit SPM model using XGBoost — fit_spm_xgb","text":"List xgb model, cv results, metadata","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_xg_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit xG Model using XGBoost — fit_xg_model","title":"Fit xG Model using XGBoost — fit_xg_model","text":"Trains XGBoost classifier predict goal probability shot features. Uses cross-validation find optimal number boosting rounds.","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_xg_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit xG Model using XGBoost — fit_xg_model","text":"","code":"fit_xg_model(   shot_features,   exclude_penalties = TRUE,   nfolds = 5,   max_depth = 6,   eta = 0.05,   subsample = 0.8,   colsample_bytree = 0.8,   nrounds = 500,   early_stopping_rounds = 50,   verbose = 1 )"},{"path":"https://peteowen1.github.io/panna/reference/fit_xg_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit xG Model using XGBoost — fit_xg_model","text":"shot_features Data frame prepare_shots_for_xg() exclude_penalties Whether exclude penalties training (default TRUE) nfolds Number CV folds (default 5) max_depth Maximum tree depth (default 6) eta Learning rate (default 0.05) subsample Row subsampling (default 0.8) colsample_bytree Column subsampling (default 0.8) nrounds Maximum boosting rounds (default 500) early_stopping_rounds Early stopping patience (default 50) verbose Print progress (0=silent, 1=progress)","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_xg_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit xG Model using XGBoost — fit_xg_model","text":"List : model: Fitted XGBoost model cv_result: Cross-validation results importance: Feature importance calibration: Calibration metrics panna_metadata: Model metadata","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_xg_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit xG Model using XGBoost — fit_xg_model","text":"","code":"if (FALSE) { # \\dontrun{ shots <- load_opta_shot_events(\"ENG\", \"2024-2025\") shot_features <- prepare_shots_for_xg(shots) xg_model <- fit_xg_model(shot_features) } # }"},{"path":"https://peteowen1.github.io/panna/reference/fit_xpass_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit xPass Model using XGBoost — fit_xpass_model","title":"Fit xPass Model using XGBoost — fit_xpass_model","text":"Trains XGBoost classifier predict pass completion probability.","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_xpass_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit xPass Model using XGBoost — fit_xpass_model","text":"","code":"fit_xpass_model(   pass_features,   nfolds = 5,   max_depth = 6,   eta = 0.1,   subsample = 0.8,   colsample_bytree = 0.8,   nrounds = 500,   early_stopping_rounds = 50,   verbose = 1 )"},{"path":"https://peteowen1.github.io/panna/reference/fit_xpass_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit xPass Model using XGBoost — fit_xpass_model","text":"pass_features Data frame prepare_passes_for_xpass() nfolds Number CV folds (default 5) max_depth Maximum tree depth (default 6) eta Learning rate (default 0.05) subsample Row subsampling (default 0.8) colsample_bytree Column subsampling (default 0.8) nrounds Maximum boosting rounds (default 500) early_stopping_rounds Early stopping patience (default 50) verbose Print progress (0=silent, 1=progress)","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_xpass_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit xPass Model using XGBoost — fit_xpass_model","text":"List fitted model metadata","code":""},{"path":"https://peteowen1.github.io/panna/reference/fit_xpass_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fit xPass Model using XGBoost — fit_xpass_model","text":"","code":"if (FALSE) { # \\dontrun{ passes <- prepare_passes_for_xpass(spadl) xpass_model <- fit_xpass_model(passes) } # }"},{"path":"https://peteowen1.github.io/panna/reference/generate_panna_report.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate prediction report — generate_panna_report","title":"Generate prediction report — generate_panna_report","text":"Creates formatted summary panna ratings.","code":""},{"path":"https://peteowen1.github.io/panna/reference/generate_panna_report.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate prediction report — generate_panna_report","text":"","code":"generate_panna_report(panna_model, top_n = 10)"},{"path":"https://peteowen1.github.io/panna/reference/generate_panna_report.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate prediction report — generate_panna_report","text":"panna_model Fitted panna model top_n Number top/bottom players show","code":""},{"path":"https://peteowen1.github.io/panna/reference/generate_panna_report.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate prediction report — generate_panna_report","text":"Character string report","code":""},{"path":"https://peteowen1.github.io/panna/reference/generate_panna_report.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Generate prediction report — generate_panna_report","text":"","code":"if (FALSE) { # \\dontrun{ panna_model <- fit_panna_model(splint_data, player_features) report <- generate_panna_report(panna_model, top_n = 15) cat(report) } # }"},{"path":"https://peteowen1.github.io/panna/reference/get_big5_leagues.html","id":null,"dir":"Reference","previous_headings":"","what":"Big 5 European league configurations — get_big5_leagues","title":"Big 5 European league configurations — get_big5_leagues","text":"Big 5 European league configurations","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_big5_leagues.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Big 5 European league configurations — get_big5_leagues","text":"","code":"get_big5_leagues()"},{"path":"https://peteowen1.github.io/panna/reference/get_big5_leagues.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Big 5 European league configurations — get_big5_leagues","text":"Data frame league info","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_cache_dir.html","id":null,"dir":"Reference","previous_headings":"","what":"Get cache directory path — get_cache_dir","title":"Get cache directory path — get_cache_dir","text":"Get cache directory path","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_cache_dir.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get cache directory path — get_cache_dir","text":"","code":"get_cache_dir(create = TRUE)"},{"path":"https://peteowen1.github.io/panna/reference/get_cache_dir.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get cache directory path — get_cache_dir","text":"create Logical, whether create exist","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_cache_dir.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get cache directory path — get_cache_dir","text":"Path cache directory","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_cached_fbref_ids.html","id":null,"dir":"Reference","previous_headings":"","what":"Get cached match IDs for a league-season (fast batch version) — get_cached_fbref_ids","title":"Get cached match IDs for a league-season (fast batch version) — get_cached_fbref_ids","text":"Returns fully-cached match IDs league-season. match considered cached : 9 table type files exist (fast path Big 5 leagues), metadata tables_available field tables exist","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_cached_fbref_ids.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get cached match IDs for a league-season (fast batch version) — get_cached_fbref_ids","text":"","code":"get_cached_fbref_ids(league, season)"},{"path":"https://peteowen1.github.io/panna/reference/get_cached_fbref_ids.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get cached match IDs for a league-season (fast batch version) — get_cached_fbref_ids","text":"league League code season Season string","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_cached_fbref_ids.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get cached match IDs for a league-season (fast batch version) — get_cached_fbref_ids","text":"Character vector cached fbref_ids","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_cached_fbref_ids.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get cached match IDs for a league-season (fast batch version) — get_cached_fbref_ids","text":"Uses hierarchical path: {table_type}/{league}/{season}/{id}.rds","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_cached_match_urls.html","id":null,"dir":"Reference","previous_headings":"","what":"Get cached match URLs from metadata — get_cached_match_urls","title":"Get cached match URLs from metadata — get_cached_match_urls","text":"Reads cached metadata files league-season extracts match URLs. Useful re-scraping updating cached matches.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_cached_match_urls.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get cached match URLs from metadata — get_cached_match_urls","text":"","code":"get_cached_match_urls(league, season)"},{"path":"https://peteowen1.github.io/panna/reference/get_cached_match_urls.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get cached match URLs from metadata — get_cached_match_urls","text":"league League code (e.g., \"ENG\", \"ESP\") season Season string (e.g., \"2023-2024\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_cached_match_urls.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get cached match URLs from metadata — get_cached_match_urls","text":"Character vector match URLs","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_cached_match_urls.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get cached match URLs from metadata — get_cached_match_urls","text":"","code":"if (FALSE) { # \\dontrun{ urls <- get_cached_match_urls(\"ENG\", \"2023-2024\") length(urls)  # Number of cached matches } # }"},{"path":"https://peteowen1.github.io/panna/reference/get_cached_match_urls_legacy.html","id":null,"dir":"Reference","previous_headings":"","what":"Get already-scraped match URLs from legacy cache — get_cached_match_urls_legacy","title":"Get already-scraped match URLs from legacy cache — get_cached_match_urls_legacy","text":"Get already-scraped match URLs legacy cache","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_cached_match_urls_legacy.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get already-scraped match URLs from legacy cache — get_cached_match_urls_legacy","text":"","code":"get_cached_match_urls_legacy(data_type)"},{"path":"https://peteowen1.github.io/panna/reference/get_cached_match_urls_legacy.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get already-scraped match URLs from legacy cache — get_cached_match_urls_legacy","text":"data_type Type data check","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_cached_match_urls_legacy.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get already-scraped match URLs from legacy cache — get_cached_match_urls_legacy","text":"Character vector match URLs already cache","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_cached_understat_ids.html","id":null,"dir":"Reference","previous_headings":"","what":"Get cached Understat match IDs — get_cached_understat_ids","title":"Get cached Understat match IDs — get_cached_understat_ids","text":"Get cached Understat match IDs","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_cached_understat_ids.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get cached Understat match IDs — get_cached_understat_ids","text":"","code":"get_cached_understat_ids(league, season)"},{"path":"https://peteowen1.github.io/panna/reference/get_cached_understat_ids.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get cached Understat match IDs — get_cached_understat_ids","text":"league League code season Season string","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_cached_understat_ids.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get cached Understat match IDs — get_cached_understat_ids","text":"Character vector cached understat_ids","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_covariate_effects.html","id":null,"dir":"Reference","previous_headings":"","what":"Get covariate effects from fitted model — get_covariate_effects","title":"Get covariate effects from fitted model — get_covariate_effects","text":"Extracts coefficients game state covariates.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_covariate_effects.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get covariate effects from fitted model — get_covariate_effects","text":"","code":"get_covariate_effects(model, lambda = \"min\")"},{"path":"https://peteowen1.github.io/panna/reference/get_covariate_effects.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get covariate effects from fitted model — get_covariate_effects","text":"model Fitted RAPM model fit_rapm lambda lambda use","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_covariate_effects.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get covariate effects from fitted model — get_covariate_effects","text":"Named vector covariate coefficients","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_default_decay_params.html","id":null,"dir":"Reference","previous_headings":"","what":"Get default decay parameters for skill estimation — get_default_decay_params","title":"Get default decay parameters for skill estimation — get_default_decay_params","text":"Returns sensible default exponential decay rates (lambda) per stat category. Lambda controls quickly old observations lose influence: weight = exp(-lambda * days_since_match).","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_default_decay_params.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get default decay parameters for skill estimation — get_default_decay_params","text":"","code":"get_default_decay_params()"},{"path":"https://peteowen1.github.io/panna/reference/get_default_decay_params.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get default decay parameters for skill estimation — get_default_decay_params","text":"Named list elements: rate Lambda per-90 rate stats (~8 month half-life) efficiency Lambda efficiency/accuracy stats (~1 year half-life) xmetrics Lambda xG/xA/xPass metrics (~8 month half-life) prior_90s Gamma prior strength rate stats, equivalent 90s. Higher = shrinkage toward position mean. Default 2. prior_attempts Beta prior strength efficiency stats, equivalent attempts. Higher = shrinkage. Default 50.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_default_decay_params.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get default decay parameters for skill estimation — get_default_decay_params","text":"Half-life = ln(2) / lambda. Higher lambda = faster decay = recency bias.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_default_decay_params.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get default decay parameters for skill estimation — get_default_decay_params","text":"","code":"params <- get_default_decay_params() # Half-life in days: log(2) / params$rate"},{"path":"https://peteowen1.github.io/panna/reference/get_epv_feature_cols.html","id":null,"dir":"Reference","previous_headings":"","what":"Get EPV Model Feature Columns — get_epv_feature_cols","title":"Get EPV Model Feature Columns — get_epv_feature_cols","text":"Returns list feature columns used EPV model training. Uses shared constants ensure consistency create_epv_features().","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_epv_feature_cols.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get EPV Model Feature Columns — get_epv_feature_cols","text":"","code":"get_epv_feature_cols(include_sequence = TRUE, n_prev = 3)"},{"path":"https://peteowen1.github.io/panna/reference/get_epv_feature_cols.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get EPV Model Feature Columns — get_epv_feature_cols","text":"include_sequence Whether include sequence features (default TRUE) n_prev Number previous actions sequence features (default 3)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_epv_feature_cols.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get EPV Model Feature Columns — get_epv_feature_cols","text":"Character vector feature column names","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_comp_id.html","id":null,"dir":"Reference","previous_headings":"","what":"Get FBref competition ID — get_fbref_comp_id","title":"Get FBref competition ID — get_fbref_comp_id","text":"Looks FBref competition ID given league code.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_comp_id.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get FBref competition ID — get_fbref_comp_id","text":"","code":"get_fbref_comp_id(code)"},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_comp_id.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get FBref competition ID — get_fbref_comp_id","text":"code Character, league code (e.g., \"ENG\", \"WC\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_comp_id.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get FBref competition ID — get_fbref_comp_id","text":"Integer, FBref competition ID","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_comp_id.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get FBref competition ID — get_fbref_comp_id","text":"","code":"if (FALSE) { # \\dontrun{ get_fbref_comp_id(\"WC\")   # 1 } # }"},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_headers.html","id":null,"dir":"Reference","previous_headings":"","what":"Get browser headers for FBref requests — get_fbref_headers","title":"Get browser headers for FBref requests — get_fbref_headers","text":"Returns headers mimic real browser avoid Cloudflare blocking. Rotates different User-Agent strings safety.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_headers.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get browser headers for FBref requests — get_fbref_headers","text":"","code":"get_fbref_headers(referer = \"https://fbref.com/en/comps/\")"},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_headers.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get browser headers for FBref requests — get_fbref_headers","text":"referer Optional referer URL (default: FBref competitions page)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_headers.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get browser headers for FBref requests — get_fbref_headers","text":"Named character vector HTTP headers","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_match_cache_dir.html","id":null,"dir":"Reference","previous_headings":"","what":"Get FBref match cache directory — get_fbref_match_cache_dir","title":"Get FBref match cache directory — get_fbref_match_cache_dir","text":"Returns path using hierarchical structure: {pannadata_dir}/{table_type}/{league}/{season}/","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_match_cache_dir.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get FBref match cache directory — get_fbref_match_cache_dir","text":"","code":"get_fbref_match_cache_dir(   table_type = NULL,   league = NULL,   season = NULL,   create = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_match_cache_dir.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get FBref match cache directory — get_fbref_match_cache_dir","text":"table_type Optional table type subdirectory league Optional league subdirectory (new hierarchical structure) season Optional season subdirectory (new hierarchical structure) create Whether create directory missing (default TRUE)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_match_cache_dir.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get FBref match cache directory — get_fbref_match_cache_dir","text":"Path cache directory","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_schedule_url.html","id":null,"dir":"Reference","previous_headings":"","what":"Get FBref schedule URL — get_fbref_schedule_url","title":"Get FBref schedule URL — get_fbref_schedule_url","text":"Constructs FBref fixtures/schedule URL competition season.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_schedule_url.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get FBref schedule URL — get_fbref_schedule_url","text":"","code":"get_fbref_schedule_url(code, season)"},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_schedule_url.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get FBref schedule URL — get_fbref_schedule_url","text":"code Character, league code (e.g., \"ENG\", \"WC\") season Character, season (e.g., \"2023-2024\" \"2024\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_schedule_url.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get FBref schedule URL — get_fbref_schedule_url","text":"Character, full FBref schedule URL","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_schedule_url.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get FBref schedule URL — get_fbref_schedule_url","text":"","code":"if (FALSE) { # \\dontrun{ get_fbref_schedule_url(\"WC\", \"2022\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_session.html","id":null,"dir":"Reference","previous_headings":"","what":"Get or create FBref session — get_fbref_session","title":"Get or create FBref session — get_fbref_session","text":"Returns persistent httr session handle maintains cookies across requests, like real browser session.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_session.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get or create FBref session — get_fbref_session","text":"","code":"get_fbref_session(reset = FALSE)"},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_session.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get or create FBref session — get_fbref_session","text":"reset TRUE, creates new session (default FALSE)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_fbref_session.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get or create FBref session — get_fbref_session","text":"httr handle object","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_first_half_stoppage.html","id":null,"dir":"Reference","previous_headings":"","what":"Get first-half stoppage time from events — get_first_half_stoppage","title":"Get first-half stoppage time from events — get_first_half_stoppage","text":"Finds maximum added_time events minute 45.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_first_half_stoppage.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get first-half stoppage time from events — get_first_half_stoppage","text":"","code":"get_first_half_stoppage(events)"},{"path":"https://peteowen1.github.io/panna/reference/get_first_half_stoppage.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get first-half stoppage time from events — get_first_half_stoppage","text":"events Data frame minute optionally added_time columns","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_first_half_stoppage.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get first-half stoppage time from events — get_first_half_stoppage","text":"Integer, first-half stoppage minutes (0 none)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_first_half_stoppage_from_shots.html","id":null,"dir":"Reference","previous_headings":"","what":"Get first-half stoppage from shots data — get_first_half_stoppage_from_shots","title":"Get first-half stoppage from shots data — get_first_half_stoppage_from_shots","text":"Parses shot minute strings find max added_time minute 45.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_first_half_stoppage_from_shots.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get first-half stoppage from shots data — get_first_half_stoppage_from_shots","text":"","code":"get_first_half_stoppage_from_shots(shots)"},{"path":"https://peteowen1.github.io/panna/reference/get_first_half_stoppage_from_shots.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get first-half stoppage from shots data — get_first_half_stoppage_from_shots","text":"shots Data frame minute column (character, e.g., \"45+3\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_first_half_stoppage_from_shots.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get first-half stoppage from shots data — get_first_half_stoppage_from_shots","text":"Integer, first-half stoppage minutes (0 none)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_latest_release.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Release Info — get_latest_release","title":"Get Release Info — get_latest_release","text":"Fetches information GitHub release pannadata.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_latest_release.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Release Info — get_latest_release","text":"","code":"get_latest_release(repo = \"peteowen1/pannadata\", tag = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/get_latest_release.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Release Info — get_latest_release","text":"repo GitHub repository \"owner/repo\" format. tag Release tag fetch. Use \"fbref-latest\", \"understat-latest\", \"opta-latest\", NULL recent release.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_latest_release.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Release Info — get_latest_release","text":"List release information (tag_name, assets, etc.).","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_latest_release.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Release Info — get_latest_release","text":"","code":"if (FALSE) { # \\dontrun{ # Get FBref release release <- get_latest_release(tag = \"fbref-latest\") print(release$tag_name)  # Get most recent release release <- get_latest_release() } # }"},{"path":"https://peteowen1.github.io/panna/reference/get_league_max_ids.html","id":null,"dir":"Reference","previous_headings":"","what":"Get maximum cached ID for each league from manifest — get_league_max_ids","title":"Get maximum cached ID for each league from manifest — get_league_max_ids","text":"Get maximum cached ID league manifest","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_league_max_ids.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get maximum cached ID for each league from manifest — get_league_max_ids","text":"","code":"get_league_max_ids(manifest)"},{"path":"https://peteowen1.github.io/panna/reference/get_league_max_ids.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get maximum cached ID for each league from manifest — get_league_max_ids","text":"manifest Data frame load_understat_manifest","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_league_max_ids.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get maximum cached ID for each league from manifest — get_league_max_ids","text":"Named list max ID per league (NA data league)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_match_end_from_shots.html","id":null,"dir":"Reference","previous_headings":"","what":"Get match end from shots data — get_match_end_from_shots","title":"Get match end from shots data — get_match_end_from_shots","text":"Uses last shot determine match end time.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_match_end_from_shots.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get match end from shots data — get_match_end_from_shots","text":"","code":"get_match_end_from_shots(shots, first_half_stoppage = 0L)"},{"path":"https://peteowen1.github.io/panna/reference/get_match_end_from_shots.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get match end from shots data — get_match_end_from_shots","text":"shots Data frame minute column (character, e.g., \"90+4\") first_half_stoppage First half stoppage offset second half","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_match_end_from_shots.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get match end from shots data — get_match_end_from_shots","text":"Numeric match end minute (effective time)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_opta_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Opta Column Names — get_opta_columns","title":"Get Opta Column Names — get_opta_columns","text":"Returns column names available Opta data without loading full dataset.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_opta_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Opta Column Names — get_opta_columns","text":"","code":"get_opta_columns(   table_type = c(\"player_stats\", \"shots\", \"shot_events\", \"match_events\", \"events\",     \"lineups\") )"},{"path":"https://peteowen1.github.io/panna/reference/get_opta_columns.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Opta Column Names — get_opta_columns","text":"table_type One \"player_stats\", \"shots\", \"shot_events\", \"events\", \"lineups\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_opta_columns.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Opta Column Names — get_opta_columns","text":"Character vector column names.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_opta_columns.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Opta Column Names — get_opta_columns","text":"","code":"if (FALSE) { # \\dontrun{ # See all player stats columns get_opta_columns(\"player_stats\")  # See shot event columns (individual shots with x/y) get_opta_columns(\"shot_events\")  # See match event columns (ALL events with x/y) get_opta_columns(\"match_events\")  # See event columns (goals, cards, subs) get_opta_columns(\"events\")  # See lineup columns get_opta_columns(\"lineups\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/get_panna_ratings.html","id":null,"dir":"Reference","previous_headings":"","what":"Get panna ratings from fitted model — get_panna_ratings","title":"Get panna ratings from fitted model — get_panna_ratings","text":"Extracts final panna ratings fitted panna model object. Requires model fitted fit_panna_model.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_panna_ratings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get panna ratings from fitted model — get_panna_ratings","text":"","code":"get_panna_ratings(panna_model)"},{"path":"https://peteowen1.github.io/panna/reference/get_panna_ratings.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get panna ratings from fitted model — get_panna_ratings","text":"panna_model Fitted panna model fit_panna_model.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_panna_ratings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get panna ratings from fitted model — get_panna_ratings","text":"Data frame player panna ratings.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_panna_ratings.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get panna ratings from fitted model — get_panna_ratings","text":"generate ratings, run one pipeline scripts: Opta (15 leagues): source(\"data-raw/player-ratings-opta/run_pipeline_opta.R\") FBref (Big 5): source(\"data-raw/player-ratings-fbref/run_pipeline.R\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_panna_ratings.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get panna ratings from fitted model — get_panna_ratings","text":"","code":"if (FALSE) { # \\dontrun{ panna_model <- fit_panna_model(splint_data, player_features) ratings <- get_panna_ratings(panna_model) head(ratings) } # }"},{"path":"https://peteowen1.github.io/panna/reference/get_parquet_fbref_ids.html","id":null,"dir":"Reference","previous_headings":"","what":"Get match IDs from parquet file — get_parquet_fbref_ids","title":"Get match IDs from parquet file — get_parquet_fbref_ids","text":"Reads parquet file extracts unique match IDs. Results cached memory session avoid repeated file reads.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_parquet_fbref_ids.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get match IDs from parquet file — get_parquet_fbref_ids","text":"","code":"get_parquet_fbref_ids(table_type, league, season)"},{"path":"https://peteowen1.github.io/panna/reference/get_parquet_fbref_ids.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get match IDs from parquet file — get_parquet_fbref_ids","text":"table_type Table type (e.g., \"metadata\") league League code season Season string","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_parquet_fbref_ids.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get match IDs from parquet file — get_parquet_fbref_ids","text":"Character vector match IDs, NULL parquet","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_parquet_path.html","id":null,"dir":"Reference","previous_headings":"","what":"Get parquet file path for a league-season — get_parquet_path","title":"Get parquet file path for a league-season — get_parquet_path","text":"Returns path parquet files stored: {pannadata_dir}/{table_type}/{league}/{season}.parquet","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_parquet_path.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get parquet file path for a league-season — get_parquet_path","text":"","code":"get_parquet_path(table_type, league, season, create = FALSE)"},{"path":"https://peteowen1.github.io/panna/reference/get_parquet_path.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get parquet file path for a league-season — get_parquet_path","text":"table_type Table type (e.g., \"summary\", \"events\") league League code (e.g., \"ENG\") season Season string (e.g., \"2024-2025\") create TRUE, create parent directory missing","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_parquet_path.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get parquet file path for a league-season — get_parquet_path","text":"Path parquet file","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_pitch_zone.html","id":null,"dir":"Reference","previous_headings":"","what":"Determine Pitch Zone — get_pitch_zone","title":"Determine Pitch Zone — get_pitch_zone","text":"Assigns zone ID based pitch location. Uses 3x6 grid (18 zones).","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_pitch_zone.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Determine Pitch Zone — get_pitch_zone","text":"","code":"get_pitch_zone(x, y)"},{"path":"https://peteowen1.github.io/panna/reference/get_pitch_zone.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Determine Pitch Zone — get_pitch_zone","text":"x X coordinate (0-100) y Y coordinate (0-100)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_pitch_zone.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Determine Pitch Zone — get_pitch_zone","text":"Integer zone ID (1-18)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_pitch_zone.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Determine Pitch Zone — get_pitch_zone","text":"","code":"if (FALSE) { # \\dontrun{ get_pitch_zone(90, 20)   # Attacking third, left } # }"},{"path":"https://peteowen1.github.io/panna/reference/get_remote_parquet_cache.html","id":null,"dir":"Reference","previous_headings":"","what":"Get remote parquet cache directory — get_remote_parquet_cache","title":"Get remote parquet cache directory — get_remote_parquet_cache","text":"Downloads extracts parquet zip GitHub releases temp directory. Cached R session - subsequent calls return cached path.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_remote_parquet_cache.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get remote parquet cache directory — get_remote_parquet_cache","text":"","code":"get_remote_parquet_cache(   repo = \"peteowen1/pannadata\",   tag = \"latest\",   force = FALSE )"},{"path":"https://peteowen1.github.io/panna/reference/get_remote_parquet_cache.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get remote parquet cache directory — get_remote_parquet_cache","text":"repo GitHub repo (default: \"peteowen1/pannadata\") tag Release tag (default: \"latest\") force Re-download even cached","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_remote_parquet_cache.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get remote parquet cache directory — get_remote_parquet_cache","text":"Path extracted parquet directory","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_remote_tables.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Available Remote Tables — get_remote_tables","title":"Get Available Remote Tables — get_remote_tables","text":"Returns list parquet files available GitHub release. Useful discovering data available remote queries.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_remote_tables.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Available Remote Tables — get_remote_tables","text":"","code":"get_remote_tables()"},{"path":"https://peteowen1.github.io/panna/reference/get_remote_tables.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Available Remote Tables — get_remote_tables","text":"Character vector table names (without .parquet extension).","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_remote_tables.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Available Remote Tables — get_remote_tables","text":"","code":"if (FALSE) { # \\dontrun{ # See what tables are available remotely tables <- get_remote_tables() print(tables) } # }"},{"path":"https://peteowen1.github.io/panna/reference/get_seasons_since.html","id":null,"dir":"Reference","previous_headings":"","what":"Get all seasons since a start year — get_seasons_since","title":"Get all seasons since a start year — get_seasons_since","text":"Returns vector season strings start_year current season.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_seasons_since.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get all seasons since a start year — get_seasons_since","text":"","code":"get_seasons_since(start_year = 2017)"},{"path":"https://peteowen1.github.io/panna/reference/get_seasons_since.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get all seasons since a start year — get_seasons_since","text":"start_year First season start year (default 2017)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_seasons_since.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get all seasons since a start year — get_seasons_since","text":"Character vector season strings (e.g., \"2017-2018\", \"2018-2019\", ...)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_seasons_since.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get all seasons since a start year — get_seasons_since","text":"","code":"if (FALSE) { # \\dontrun{ get_seasons_since()  # From 2017 } # }"},{"path":"https://peteowen1.github.io/panna/reference/get_source_archive_name.html","id":null,"dir":"Reference","previous_headings":"","what":"Get archive filename for data source — get_source_archive_name","title":"Get archive filename for data source — get_source_archive_name","text":"Maps source type tar.gz archive filename.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_source_archive_name.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get archive filename for data source — get_source_archive_name","text":"","code":"get_source_archive_name(source_type)"},{"path":"https://peteowen1.github.io/panna/reference/get_source_archive_name.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get archive filename for data source — get_source_archive_name","text":"source_type One \"fbref\", \"understat\", \"opta\", \"\"","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_source_archive_name.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get archive filename for data source — get_source_archive_name","text":"Character archive filename (tar.gz)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_source_pattern.html","id":null,"dir":"Reference","previous_headings":"","what":"Get parquet file pattern for data source — get_source_pattern","title":"Get parquet file pattern for data source — get_source_pattern","text":"Returns regex pattern match parquet files source.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_source_pattern.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get parquet file pattern for data source — get_source_pattern","text":"","code":"get_source_pattern(source_type)"},{"path":"https://peteowen1.github.io/panna/reference/get_source_pattern.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get parquet file pattern for data source — get_source_pattern","text":"source_type One \"fbref\", \"understat\", \"\"","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_source_pattern.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get parquet file pattern for data source — get_source_pattern","text":"Character regex pattern","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_source_tag.html","id":null,"dir":"Reference","previous_headings":"","what":"Get release tag for data source — get_source_tag","title":"Get release tag for data source — get_source_tag","text":"Maps source type GitHub release tag name.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_source_tag.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get release tag for data source — get_source_tag","text":"","code":"get_source_tag(source_type)"},{"path":"https://peteowen1.github.io/panna/reference/get_source_tag.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get release tag for data source — get_source_tag","text":"source_type One \"fbref\", \"understat\", \"opta\", \"\"","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_source_tag.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get release tag for data source — get_source_tag","text":"Character release tag name","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_splint_players.html","id":null,"dir":"Reference","previous_headings":"","what":"Get players on pitch for a splint — get_splint_players","title":"Get players on pitch for a splint — get_splint_players","text":"Returns player IDs home away teams splint.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_splint_players.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get players on pitch for a splint — get_splint_players","text":"","code":"get_splint_players(splint_data, splint_id)"},{"path":"https://peteowen1.github.io/panna/reference/get_splint_players.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get players on pitch for a splint — get_splint_players","text":"splint_data Combined splint data create_all_splints splint_id Splint identifier","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_splint_players.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get players on pitch for a splint — get_splint_players","text":"List home_players away_players character vectors","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_spm_feature_importance.html","id":null,"dir":"Reference","previous_headings":"","what":"Get top SPM feature importance — get_spm_feature_importance","title":"Get top SPM feature importance — get_spm_feature_importance","text":"Identifies important features SPM model.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_spm_feature_importance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get top SPM feature importance — get_spm_feature_importance","text":"","code":"get_spm_feature_importance(model, n = 10, lambda = \"min\")"},{"path":"https://peteowen1.github.io/panna/reference/get_spm_feature_importance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get top SPM feature importance — get_spm_feature_importance","text":"model Fitted SPM model n Number top features return lambda lambda use","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_spm_feature_importance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get top SPM feature importance — get_spm_feature_importance","text":"Data frame top features absolute coefficient","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_stat_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Get column names for stat type — get_stat_columns","title":"Get column names for stat type — get_stat_columns","text":"Returns expected column names pannadata/FBref data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_stat_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get column names for stat type — get_stat_columns","text":"","code":"get_stat_columns(stat_type)"},{"path":"https://peteowen1.github.io/panna/reference/get_stat_columns.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get column names for stat type — get_stat_columns","text":"stat_type Type statistics","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_stat_columns.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get column names for stat type — get_stat_columns","text":"Character vector column names","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_stat_tiers.html","id":null,"dir":"Reference","previous_headings":"","what":"Get stat tiers for optimization — get_stat_tiers","title":"Get stat tiers for optimization — get_stat_tiers","text":"Classifies stats tiers optimization. Tier 1 stats get individual lambda optimization. Tier 2 stats share group lambda.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_stat_tiers.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get stat tiers for optimization — get_stat_tiers","text":"","code":"get_stat_tiers()"},{"path":"https://peteowen1.github.io/panna/reference/get_stat_tiers.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get stat tiers for optimization — get_stat_tiers","text":"Named list elements tier1 (individually optimized), tier2 (group optimized), efficiency (attempt-weighted group).","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_top_defensive.html","id":null,"dir":"Reference","previous_headings":"","what":"Get top defensive players — get_top_defensive","title":"Get top defensive players — get_top_defensive","text":"Returns players highest defensive contribution.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_top_defensive.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get top defensive players — get_top_defensive","text":"","code":"get_top_defensive(ratings, n = 10)"},{"path":"https://peteowen1.github.io/panna/reference/get_top_defensive.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get top defensive players — get_top_defensive","text":"ratings O/D ratings data frame n Number players","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_top_defensive.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get top defensive players — get_top_defensive","text":"Data frame top defensive players","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_top_defensive.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get top defensive players — get_top_defensive","text":"","code":"if (FALSE) { # \\dontrun{ od_result <- calculate_od_panna(rapm_data, spm_ratings) top_defenders <- get_top_defensive(od_result$ratings, n = 20) } # }"},{"path":"https://peteowen1.github.io/panna/reference/get_top_offensive.html","id":null,"dir":"Reference","previous_headings":"","what":"Get top offensive players — get_top_offensive","title":"Get top offensive players — get_top_offensive","text":"Returns players highest offensive contribution.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_top_offensive.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get top offensive players — get_top_offensive","text":"","code":"get_top_offensive(ratings, n = 10)"},{"path":"https://peteowen1.github.io/panna/reference/get_top_offensive.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get top offensive players — get_top_offensive","text":"ratings O/D ratings data frame n Number players","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_top_offensive.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get top offensive players — get_top_offensive","text":"Data frame top offensive players","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_top_offensive.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get top offensive players — get_top_offensive","text":"","code":"if (FALSE) { # \\dontrun{ od_result <- calculate_od_panna(rapm_data, spm_ratings) top_attackers <- get_top_offensive(od_result$ratings, n = 20) } # }"},{"path":"https://peteowen1.github.io/panna/reference/get_tournament_years.html","id":null,"dir":"Reference","previous_headings":"","what":"Get tournament years with available data — get_tournament_years","title":"Get tournament years with available data — get_tournament_years","text":"Returns years tournaments held (FBref data available).","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_tournament_years.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get tournament years with available data — get_tournament_years","text":"","code":"get_tournament_years(code)"},{"path":"https://peteowen1.github.io/panna/reference/get_tournament_years.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get tournament years with available data — get_tournament_years","text":"code Tournament code (e.g., \"WC\", \"EURO\", \"COPA_AMERICA\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_tournament_years.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get tournament years with available data — get_tournament_years","text":"Character vector years","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_tournament_years.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get tournament years with available data — get_tournament_years","text":"","code":"if (FALSE) { # \\dontrun{ get_tournament_years(\"EURO\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/get_understat_headers.html","id":null,"dir":"Reference","previous_headings":"","what":"Get browser headers for Understat requests — get_understat_headers","title":"Get browser headers for Understat requests — get_understat_headers","text":"Returns headers mimic real browser.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_headers.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get browser headers for Understat requests — get_understat_headers","text":"","code":"get_understat_headers(referer = \"https://understat.com/\")"},{"path":"https://peteowen1.github.io/panna/reference/get_understat_headers.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get browser headers for Understat requests — get_understat_headers","text":"referer Optional referer URL (default: Understat home)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_headers.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get browser headers for Understat requests — get_understat_headers","text":"Named character vector HTTP headers","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_league_url.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Understat league URL — get_understat_league_url","title":"Get Understat league URL — get_understat_league_url","text":"Constructs Understat league page URL competition season.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_league_url.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Understat league URL — get_understat_league_url","text":"","code":"get_understat_league_url(code, season)"},{"path":"https://peteowen1.github.io/panna/reference/get_understat_league_url.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Understat league URL — get_understat_league_url","text":"code Character, league code (e.g., \"ENG\", \"RUS\") season Character numeric, season year (e.g., \"2024\" 2024)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_league_url.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Understat league URL — get_understat_league_url","text":"Character, full Understat league URL","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_league_url.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Understat league URL — get_understat_league_url","text":"","code":"if (FALSE) { # \\dontrun{ get_understat_league_url(\"ESP\", \"2023\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/get_understat_match_url.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Understat match URL — get_understat_match_url","title":"Get Understat match URL — get_understat_match_url","text":"Constructs Understat match page URL given match ID.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_match_url.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Understat match URL — get_understat_match_url","text":"","code":"get_understat_match_url(understat_id)"},{"path":"https://peteowen1.github.io/panna/reference/get_understat_match_url.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Understat match URL — get_understat_match_url","text":"understat_id Numeric character, Understat match ID","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_match_url.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Understat match URL — get_understat_match_url","text":"Character, full Understat match URL","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_match_url.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Understat match URL — get_understat_match_url","text":"","code":"if (FALSE) { # \\dontrun{ get_understat_match_url(28988) } # }"},{"path":"https://peteowen1.github.io/panna/reference/get_understat_parquet_path.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Understat parquet file path — get_understat_parquet_path","title":"Get Understat parquet file path — get_understat_parquet_path","text":"Returns path using hierarchical structure: {pannadata_dir}/understat/{table_type}/{league}/{season}.parquet","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_parquet_path.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Understat parquet file path — get_understat_parquet_path","text":"","code":"get_understat_parquet_path(table_type, league, season, create = TRUE)"},{"path":"https://peteowen1.github.io/panna/reference/get_understat_parquet_path.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Understat parquet file path — get_understat_parquet_path","text":"table_type Table type (metadata, roster, shots, events) league League code season Season string create Whether create parent directory missing (default TRUE)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_parquet_path.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Understat parquet file path — get_understat_parquet_path","text":"Path parquet file","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_scripts.html","id":null,"dir":"Reference","previous_headings":"","what":"Get all script tags from Understat page — get_understat_scripts","title":"Get all script tags from Understat page — get_understat_scripts","text":"Extracts text content script tags.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_scripts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get all script tags from Understat page — get_understat_scripts","text":"","code":"get_understat_scripts(page)"},{"path":"https://peteowen1.github.io/panna/reference/get_understat_scripts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get all script tags from Understat page — get_understat_scripts","text":"page Parsed HTML document","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_scripts.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get all script tags from Understat page — get_understat_scripts","text":"Character vector script contents","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_seasons.html","id":null,"dir":"Reference","previous_headings":"","what":"Get available Understat seasons — get_understat_seasons","title":"Get available Understat seasons — get_understat_seasons","text":"Returns vector available seasons Understat data. Understat data 2014 onwards.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_seasons.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get available Understat seasons — get_understat_seasons","text":"","code":"get_understat_seasons(start_year = 2014)"},{"path":"https://peteowen1.github.io/panna/reference/get_understat_seasons.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get available Understat seasons — get_understat_seasons","text":"start_year First season year (default 2014)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_seasons.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get available Understat seasons — get_understat_seasons","text":"Character vector season years","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_seasons.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get available Understat seasons — get_understat_seasons","text":"","code":"if (FALSE) { # \\dontrun{ get_understat_seasons(2020) } # }"},{"path":"https://peteowen1.github.io/panna/reference/get_understat_session.html","id":null,"dir":"Reference","previous_headings":"","what":"Get or create Understat session — get_understat_session","title":"Get or create Understat session — get_understat_session","text":"Returns persistent httr session handle maintains cookies.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_session.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get or create Understat session — get_understat_session","text":"","code":"get_understat_session(reset = FALSE)"},{"path":"https://peteowen1.github.io/panna/reference/get_understat_session.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get or create Understat session — get_understat_session","text":"reset TRUE, creates new session (default FALSE)","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_session.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get or create Understat session — get_understat_session","text":"httr handle object","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_slug.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Understat URL slug — get_understat_slug","title":"Get Understat URL slug — get_understat_slug","text":"Looks Understat URL slug given league code.","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_slug.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Understat URL slug — get_understat_slug","text":"","code":"get_understat_slug(code)"},{"path":"https://peteowen1.github.io/panna/reference/get_understat_slug.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Understat URL slug — get_understat_slug","text":"code Character, league code (e.g., \"ENG\", \"RUS\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_slug.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get Understat URL slug — get_understat_slug","text":"Character, Understat URL slug","code":""},{"path":"https://peteowen1.github.io/panna/reference/get_understat_slug.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get Understat URL slug — get_understat_slug","text":"","code":"if (FALSE) { # \\dontrun{ get_understat_slug(\"RUS\")  # \"RFPL\" } # }"},{"path":"https://peteowen1.github.io/panna/reference/init_team_elos.html","id":null,"dir":"Reference","previous_headings":"","what":"Initialize Team Elo Ratings — init_team_elos","title":"Initialize Team Elo Ratings — init_team_elos","text":"Creates named vector initial Elo ratings teams.","code":""},{"path":"https://peteowen1.github.io/panna/reference/init_team_elos.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Initialize Team Elo Ratings — init_team_elos","text":"","code":"init_team_elos(teams, initial_elo = 1500)"},{"path":"https://peteowen1.github.io/panna/reference/init_team_elos.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Initialize Team Elo Ratings — init_team_elos","text":"teams Character vector team names initial_elo Starting Elo rating (default 1500)","code":""},{"path":"https://peteowen1.github.io/panna/reference/init_team_elos.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Initialize Team Elo Ratings — init_team_elos","text":"Named numeric vector Elo ratings","code":""},{"path":"https://peteowen1.github.io/panna/reference/inspect_skill.html","id":null,"dir":"Reference","previous_headings":"","what":"Inspect skill estimate breakdown for a single stat — inspect_skill","title":"Inspect skill estimate breakdown for a single stat — inspect_skill","text":"Shows full Bayesian decomposition every player: raw totals, career average, prior center, prior weight, decay-weighted evidence, final skill estimate.","code":""},{"path":"https://peteowen1.github.io/panna/reference/inspect_skill.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Inspect skill estimate breakdown for a single stat — inspect_skill","text":"","code":"inspect_skill(   stat_name,   match_stats,   decay_params = NULL,   target_date = Sys.Date() )"},{"path":"https://peteowen1.github.io/panna/reference/inspect_skill.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Inspect skill estimate breakdown for a single stat — inspect_skill","text":"stat_name Name stat (e.g. \"goals_p90\"). match_stats data.table compute_match_level_opta_stats(). decay_params Decay parameters list. target_date Date estimate skills . Default today.","code":""},{"path":"https://peteowen1.github.io/panna/reference/inspect_skill.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Inspect skill estimate breakdown for a single stat — inspect_skill","text":"data.table sorted skill estimate (descending), one row per player.","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_in_final_third.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if Coordinates are in Final Third — is_in_final_third","title":"Check if Coordinates are in Final Third — is_in_final_third","text":"Check Coordinates Final Third","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_in_final_third.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if Coordinates are in Final Third — is_in_final_third","text":"","code":"is_in_final_third(x, attacking = TRUE)"},{"path":"https://peteowen1.github.io/panna/reference/is_in_final_third.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if Coordinates are in Final Third — is_in_final_third","text":"x X coordinate (0-100) attacking TRUE, checks attacking final third (x > 67)","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_in_final_third.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if Coordinates are in Final Third — is_in_final_third","text":"Logical indicating final third","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_in_penalty_area.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if Coordinates are in Penalty Area — is_in_penalty_area","title":"Check if Coordinates are in Penalty Area — is_in_penalty_area","text":"Check Coordinates Penalty Area","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_in_penalty_area.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if Coordinates are in Penalty Area — is_in_penalty_area","text":"","code":"is_in_penalty_area(x, y, attacking = TRUE)"},{"path":"https://peteowen1.github.io/panna/reference/is_in_penalty_area.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if Coordinates are in Penalty Area — is_in_penalty_area","text":"x X coordinate (0-100) y Y coordinate (0-100) attacking TRUE, checks attacking penalty area (x > 83)","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_in_penalty_area.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if Coordinates are in Penalty Area — is_in_penalty_area","text":"Logical indicating penalty area","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_match_cached.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if match is cached — is_match_cached","title":"Check if match is cached — is_match_cached","text":"Checks match fully scraped. First checks RDS files, falls back checking parquet files (CI/CD environments parquet available).","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_match_cached.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if match is cached — is_match_cached","text":"","code":"is_match_cached(league, season, fbref_id, table_types = \"metadata\")"},{"path":"https://peteowen1.github.io/panna/reference/is_match_cached.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if match is cached — is_match_cached","text":"league League code season Season string fbref_id FBref match ID table_types Character vector table types (unused, kept compatibility)","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_match_cached.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if match is cached — is_match_cached","text":"Logical - TRUE match fully scraped","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_tournament_competition.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if competition uses tournament (year-only) format — is_tournament_competition","title":"Check if competition uses tournament (year-only) format — is_tournament_competition","text":"Check competition uses tournament (year-) format","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_tournament_competition.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if competition uses tournament (year-only) format — is_tournament_competition","text":"","code":"is_tournament_competition(code)"},{"path":"https://peteowen1.github.io/panna/reference/is_tournament_competition.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if competition uses tournament (year-only) format — is_tournament_competition","text":"code Character, competition code","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_tournament_competition.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if competition uses tournament (year-only) format — is_tournament_competition","text":"Logical, TRUE competition uses year-seasons","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_tournament_competition.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check if competition uses tournament (year-only) format — is_tournament_competition","text":"","code":"if (FALSE) { # \\dontrun{ is_tournament_competition(\"ENG\")   # FALSE } # }"},{"path":"https://peteowen1.github.io/panna/reference/is_understat_cached.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if Understat match is cached — is_understat_cached","title":"Check if Understat match is cached — is_understat_cached","text":"Check Understat match cached","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_understat_cached.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if Understat match is cached — is_understat_cached","text":"","code":"is_understat_cached(league, season, understat_id)"},{"path":"https://peteowen1.github.io/panna/reference/is_understat_cached.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if Understat match is cached — is_understat_cached","text":"league League code season Season string understat_id Understat match ID","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_understat_cached.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if Understat match is cached — is_understat_cached","text":"Logical - TRUE match scraped","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_understat_league.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if league is available on Understat — is_understat_league","title":"Check if league is available on Understat — is_understat_league","text":"Check league available Understat","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_understat_league.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if league is available on Understat — is_understat_league","text":"","code":"is_understat_league(code)"},{"path":"https://peteowen1.github.io/panna/reference/is_understat_league.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if league is available on Understat — is_understat_league","text":"code Character, league code","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_understat_league.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if league is available on Understat — is_understat_league","text":"Logical, TRUE league available Understat","code":""},{"path":"https://peteowen1.github.io/panna/reference/is_understat_league.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check if league is available on Understat — is_understat_league","text":"","code":"if (FALSE) { # \\dontrun{ is_understat_league(\"POR\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/label_actions_with_outcomes.html","id":null,"dir":"Reference","previous_headings":"","what":"Label Actions with Chain Outcomes — label_actions_with_outcomes","title":"Label Actions with Chain Outcomes — label_actions_with_outcomes","text":"Adds chain outcome labels action EPV model training. Optimized data.table merge.","code":""},{"path":"https://peteowen1.github.io/panna/reference/label_actions_with_outcomes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Label Actions with Chain Outcomes — label_actions_with_outcomes","text":"","code":"label_actions_with_outcomes(spadl_with_chains, chain_outcomes)"},{"path":"https://peteowen1.github.io/panna/reference/label_actions_with_outcomes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Label Actions with Chain Outcomes — label_actions_with_outcomes","text":"spadl_with_chains SPADL actions chain assignments chain_outcomes Chain-level outcomes classify_chain_outcomes()","code":""},{"path":"https://peteowen1.github.io/panna/reference/label_actions_with_outcomes.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Label Actions with Chain Outcomes — label_actions_with_outcomes","text":"SPADL actions outcome labels","code":""},{"path":"https://peteowen1.github.io/panna/reference/list_cached_matches.html","id":null,"dir":"Reference","previous_headings":"","what":"List cached matches — list_cached_matches","title":"List cached matches — list_cached_matches","text":"Scans hierarchical directory structure: {table_type}/{league}/{season}/{id}.rds","code":""},{"path":"https://peteowen1.github.io/panna/reference/list_cached_matches.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List cached matches — list_cached_matches","text":"","code":"list_cached_matches(table_type = \"metadata\", league = NULL, season = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/list_cached_matches.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List cached matches — list_cached_matches","text":"table_type Table type check league Optional league filter season Optional season filter","code":""},{"path":"https://peteowen1.github.io/panna/reference/list_cached_matches.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List cached matches — list_cached_matches","text":"Data frame league, season, fbref_id columns","code":""},{"path":"https://peteowen1.github.io/panna/reference/list_competitions.html","id":null,"dir":"Reference","previous_headings":"","what":"List competitions by type — list_competitions","title":"List competitions by type — list_competitions","text":"Returns competition codes filtered type.","code":""},{"path":"https://peteowen1.github.io/panna/reference/list_competitions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List competitions by type — list_competitions","text":"","code":"list_competitions(type = \"all\")"},{"path":"https://peteowen1.github.io/panna/reference/list_competitions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List competitions by type — list_competitions","text":"type Character, one \"league\", \"cup\", \"european\", \"national_team\", \"\"","code":""},{"path":"https://peteowen1.github.io/panna/reference/list_competitions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List competitions by type — list_competitions","text":"Character vector competition codes","code":""},{"path":"https://peteowen1.github.io/panna/reference/list_competitions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List competitions by type — list_competitions","text":"","code":"list_competitions(\"league\") #> [1] \"ENG\" \"ESP\" \"GER\" \"ITA\" \"FRA\" list_competitions(\"national_team\") #> [1] \"WC\"             \"EURO\"           \"COPA_AMERICA\"   \"AFCON\"          #> [5] \"NATIONS_LEAGUE\" \"GOLD_CUP\"       \"ASIAN_CUP\""},{"path":"https://peteowen1.github.io/panna/reference/list_opta_leagues.html","id":null,"dir":"Reference","previous_headings":"","what":"List Available Opta Leagues — list_opta_leagues","title":"List Available Opta Leagues — list_opta_leagues","text":"Returns data frame competitions available Opta data, metadata including name, country, type, tier.","code":""},{"path":"https://peteowen1.github.io/panna/reference/list_opta_leagues.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List Available Opta Leagues — list_opta_leagues","text":"","code":"list_opta_leagues(   type = NULL,   tier = NULL,   source = c(\"catalog\", \"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/list_opta_leagues.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List Available Opta Leagues — list_opta_leagues","text":"type Optional filter: \"league\", \"cup\", \"domestic_cup\", \"international\". tier Optional numeric filter competition tier (1 = top tier). source Data source: \"catalog\" (default) downloads catalog, \"remote\" alias \"catalog\", \"local\" scans local filesystem.","code":""},{"path":"https://peteowen1.github.io/panna/reference/list_opta_leagues.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List Available Opta Leagues — list_opta_leagues","text":"Data frame columns: code, name, country, type, tier, n_seasons, n_matches, panna_alias.","code":""},{"path":"https://peteowen1.github.io/panna/reference/list_opta_leagues.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List Available Opta Leagues — list_opta_leagues","text":"","code":"if (FALSE) { # \\dontrun{ # All competitions list_opta_leagues()  # Top-tier leagues only list_opta_leagues(tier = 1)  # Just cups list_opta_leagues(type = \"cup\")  # Scan local filesystem (no download) list_opta_leagues(source = \"local\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/list_opta_seasons.html","id":null,"dir":"Reference","previous_headings":"","what":"List Available Opta Seasons — list_opta_seasons","title":"List Available Opta Seasons — list_opta_seasons","text":"Returns available seasons given league Opta data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/list_opta_seasons.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List Available Opta Seasons — list_opta_seasons","text":"","code":"list_opta_seasons(league, source = c(\"catalog\", \"remote\", \"local\"))"},{"path":"https://peteowen1.github.io/panna/reference/list_opta_seasons.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List Available Opta Seasons — list_opta_seasons","text":"league League code (e.g., \"ENG\", \"EPL\", \"ESP\", \"La_Liga\"). source Data source: \"catalog\" (default) reads downloaded catalog, \"remote\" alias \"catalog\", \"local\" scans local filesystem. Falls back catalog local directory exist.","code":""},{"path":"https://peteowen1.github.io/panna/reference/list_opta_seasons.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List Available Opta Seasons — list_opta_seasons","text":"Character vector available seasons.","code":""},{"path":"https://peteowen1.github.io/panna/reference/list_opta_seasons.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List Available Opta Seasons — list_opta_seasons","text":"","code":"if (FALSE) { # \\dontrun{ list_opta_seasons(\"ENG\") list_opta_seasons(\"EPL\", source = \"local\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/list_understat_competitions.html","id":null,"dir":"Reference","previous_headings":"","what":"List Understat competitions — list_understat_competitions","title":"List Understat competitions — list_understat_competitions","text":"Returns available Understat competition codes.","code":""},{"path":"https://peteowen1.github.io/panna/reference/list_understat_competitions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List Understat competitions — list_understat_competitions","text":"","code":"list_understat_competitions()"},{"path":"https://peteowen1.github.io/panna/reference/list_understat_competitions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List Understat competitions — list_understat_competitions","text":"Character vector competition codes","code":""},{"path":"https://peteowen1.github.io/panna/reference/list_understat_competitions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List Understat competitions — list_understat_competitions","text":"","code":"list_understat_competitions() #> [1] \"ENG\" \"ESP\" \"GER\" \"ITA\" \"FRA\" \"RUS\""},{"path":"https://peteowen1.github.io/panna/reference/load_cached_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Load cached data for a specific type — load_cached_data","title":"Load cached data for a specific type — load_cached_data","text":"Load cached data specific type","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_cached_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load cached data for a specific type — load_cached_data","text":"","code":"load_cached_data(data_type)"},{"path":"https://peteowen1.github.io/panna/reference/load_cached_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load cached data for a specific type — load_cached_data","text":"data_type Type data (e.g., \"lineups\", \"events\", \"shooting\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_cached_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load cached data for a specific type — load_cached_data","text":"Data frame cached data, NULL none exists","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_defense.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Defense Data — load_defense","title":"Load Defense Data — load_defense","text":"Loads defensive statistics pannadata.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_defense.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Defense Data — load_defense","text":"","code":"load_defense(league = NULL, season = NULL, source = c(\"remote\", \"local\"))"},{"path":"https://peteowen1.github.io/panna/reference/load_defense.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Defense Data — load_defense","text":"league Optional league filter (e.g., \"ENG\", \"ESP\", \"GER\"). season Optional season filter (e.g., \"2023-2024\"). source Data source: \"remote\" (default) \"local\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_defense.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Defense Data — load_defense","text":"Data frame defensive statistics.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_defense.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Defense Data — load_defense","text":"","code":"if (FALSE) { # \\dontrun{ # Load all defensive data all_defense <- load_defense()  # Load France 2024-2025 defense stats fra_defense <- load_defense(league = \"FRA\", season = \"2024-2025\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_epv_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Load EPV Model — load_epv_model","title":"Load EPV Model — load_epv_model","text":"Loads pre-trained EPV model disk.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_epv_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load EPV Model — load_epv_model","text":"","code":"load_epv_model(path = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/load_epv_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load EPV Model — load_epv_model","text":"path Directory containing model. NULL, uses pannadata/opta/models/","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_epv_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load EPV Model — load_epv_model","text":"EPV model","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Events Data — load_events","title":"Load Events Data — load_events","text":"Loads match event data (goals, substitutions, cards, etc.) pannadata.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Events Data — load_events","text":"","code":"load_events(league = NULL, season = NULL, source = c(\"remote\", \"local\"))"},{"path":"https://peteowen1.github.io/panna/reference/load_events.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Events Data — load_events","text":"league Optional league filter (e.g., \"ENG\", \"ESP\", \"GER\"). season Optional season filter (e.g., \"2023-2024\"). source Data source: \"remote\" (default) \"local\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Events Data — load_events","text":"Data frame match events.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_events.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Events Data — load_events","text":"","code":"if (FALSE) { # \\dontrun{ # Load all events from remote all_events <- load_events()  # Load England 2024-2025 events eng_events <- load_events(league = \"ENG\", season = \"2024-2025\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_keeper.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Keeper Data — load_keeper","title":"Load Keeper Data — load_keeper","text":"Loads goalkeeper statistics pannadata.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_keeper.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Keeper Data — load_keeper","text":"","code":"load_keeper(league = NULL, season = NULL, source = c(\"remote\", \"local\"))"},{"path":"https://peteowen1.github.io/panna/reference/load_keeper.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Keeper Data — load_keeper","text":"league Optional league filter (e.g., \"ENG\", \"ESP\", \"GER\"). season Optional season filter (e.g., \"2023-2024\"). source Data source: \"remote\" (default) \"local\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_keeper.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Keeper Data — load_keeper","text":"Data frame goalkeeper statistics.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_keeper.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Keeper Data — load_keeper","text":"","code":"if (FALSE) { # \\dontrun{ # Load all goalkeeper data all_keepers <- load_keeper()  # Load Spain 2024-2025 keeper stats esp_keepers <- load_keeper(league = \"ESP\", season = \"2024-2025\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_match_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Load match table from cache — load_match_table","title":"Load match table from cache — load_match_table","text":"Loads hierarchical path: {table_type}/{league}/{season}/{id}.rds","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_match_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load match table from cache — load_match_table","text":"","code":"load_match_table(league, season, fbref_id, table_type)"},{"path":"https://peteowen1.github.io/panna/reference/load_match_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load match table from cache — load_match_table","text":"league League code season Season string fbref_id FBref match ID table_type Type table","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_match_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load match table from cache — load_match_table","text":"Data frame NULL cached","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Metadata — load_metadata","title":"Load Metadata — load_metadata","text":"Loads match metadata pannadata.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Metadata — load_metadata","text":"","code":"load_metadata(league = NULL, season = NULL, source = c(\"remote\", \"local\"))"},{"path":"https://peteowen1.github.io/panna/reference/load_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Metadata — load_metadata","text":"league Optional league filter (e.g., \"ENG\", \"ESP\", \"GER\"). season Optional season filter (e.g., \"2023-2024\"). source Data source: \"remote\" (default) \"local\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Metadata — load_metadata","text":"Data frame match metadata.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Metadata — load_metadata","text":"","code":"if (FALSE) { # \\dontrun{ # Load all match metadata all_meta <- load_metadata()  # Load Germany 2024-2025 metadata ger_meta <- load_metadata(league = \"GER\", season = \"2024-2025\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_big5.html","id":null,"dir":"Reference","previous_headings":"","what":"Load All Opta Data for Big 5 Leagues — load_opta_big5","title":"Load All Opta Data for Big 5 Leagues — load_opta_big5","text":"Convenience function load Opta stats Big 5 European leagues.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_big5.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load All Opta Data for Big 5 Leagues — load_opta_big5","text":"","code":"load_opta_big5(season = NULL, columns = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_big5.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load All Opta Data for Big 5 Leagues — load_opta_big5","text":"season Optional season filter. NULL, loads available seasons. columns Optional character vector columns select.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_big5.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load All Opta Data for Big 5 Leagues — load_opta_big5","text":"Data frame league column added.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_big5.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load All Opta Data for Big 5 Leagues — load_opta_big5","text":"","code":"if (FALSE) { # \\dontrun{ # Load all Big 5 data (warning: large!) big5 <- load_opta_big5()  # Load specific season across all leagues big5_2122 <- load_opta_big5(season = \"2021-2022\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Opta Match Events (Goals, Cards, Substitutions) — load_opta_events","title":"Load Opta Match Events (Goals, Cards, Substitutions) — load_opta_events","text":"Loads match events including goals, cards, substitutions timing. Useful creating splint boundaries RAPM calculations.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Opta Match Events (Goals, Cards, Substitutions) — load_opta_events","text":"","code":"load_opta_events(   league,   season = NULL,   columns = NULL,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_events.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Opta Match Events (Goals, Cards, Substitutions) — load_opta_events","text":"league League code. Accepts panna format (ENG, ESP, GER, ITA, FRA) Opta format (EPL, La_Liga, Bundesliga, Serie_A, Ligue_1). season Optional season filter (e.g., \"2021-2022\"). NULL, loads seasons. columns Optional character vector columns select. NULL, selects . source Data source: \"remote\" (default) downloads GitHub releases, \"local\" loads local files (requires prior pb_download_opta()).","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Opta Match Events (Goals, Cards, Substitutions) — load_opta_events","text":"Data frame match events columns: match_id: Match identifier event_type: goal, yellow_card, red_card, second_yellow, substitution minute, second: Time event team_id: Team involved player_id, player_name: Player involved player_on_id, player_on_name: Substitute coming (substitutions) player_off_id, player_off_name: Player leaving (substitutions) assist_player_id, assist_player_name: Assister (goals)","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_events.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Opta Match Events (Goals, Cards, Substitutions) — load_opta_events","text":"","code":"if (FALSE) { # \\dontrun{ # Load EPL match events epl_events <- load_opta_events(\"ENG\", season = \"2024-2025\")  # Filter to just red cards red_cards <- epl_events |>   dplyr::filter(event_type == \"red_card\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_fixtures.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Opta Fixture Data — load_opta_fixtures","title":"Load Opta Fixture Data — load_opta_fixtures","text":"Loads fixture data including played upcoming matches Opta. Fixtures saved scraper alongside match data include match status (Played, Fixture, Postponed).","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_fixtures.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Opta Fixture Data — load_opta_fixtures","text":"","code":"load_opta_fixtures(   league,   season = NULL,   columns = NULL,   status = NULL,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_fixtures.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Opta Fixture Data — load_opta_fixtures","text":"league League code. Accepts panna format (ENG, ESP, GER, ITA, FRA) Opta format (EPL, La_Liga, Bundesliga, Serie_A, Ligue_1). season Optional season filter (e.g., \"2021-2022\"). NULL, loads seasons. columns Optional character vector columns select. NULL, selects . status Optional match status filter (e.g., \"Fixture\", \"Played\", \"Postponed\"). NULL (default), returns statuses. source Data source: \"remote\" (default) downloads GitHub releases, \"local\" loads local files (requires prior pb_download_opta()).","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_fixtures.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Opta Fixture Data — load_opta_fixtures","text":"Data frame fixtures columns: match_id: Match identifier match_date: Scheduled/played date match_status: Fixture, Played, Postponed home_team, away_team: Team names home_team_id, away_team_id: Team IDs competition: Opta league code season: Season identifier","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_fixtures.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Opta Fixture Data — load_opta_fixtures","text":"","code":"if (FALSE) { # \\dontrun{ # Load all EPL fixtures epl_fix <- load_opta_fixtures(\"ENG\", season = \"2024-2025\")  # Load only upcoming matches upcoming <- load_opta_fixtures(\"ENG\", season = \"2024-2025\", status = \"Fixture\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_lineups.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Opta Lineup Data — load_opta_lineups","title":"Load Opta Lineup Data — load_opta_lineups","text":"Loads lineup information including starting XI, positions, minutes played. Useful assigning players time periods RAPM calculations.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_lineups.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Opta Lineup Data — load_opta_lineups","text":"","code":"load_opta_lineups(   league,   season = NULL,   columns = NULL,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_lineups.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Opta Lineup Data — load_opta_lineups","text":"league League code. Accepts panna format (ENG, ESP, GER, ITA, FRA) Opta format (EPL, La_Liga, Bundesliga, Serie_A, Ligue_1). season Optional season filter (e.g., \"2021-2022\"). NULL, loads seasons. columns Optional character vector columns select. NULL, selects . source Data source: \"remote\" (default) downloads GitHub releases, \"local\" loads local files (requires prior pb_download_opta()).","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_lineups.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Opta Lineup Data — load_opta_lineups","text":"Data frame lineup data columns: match_id, match_date: Match identifiers player_id, player_name: Player info team_id, team_name: Team info team_position: home away position: Goalkeeper, Defender, Midfielder, etc. position_side: Left, Right, Centre formation_place: 1-11 starters shirt_number: Jersey number is_starter: TRUE player started minutes_played: Total minutes played sub_on_minute: Minute substituted (0 started) sub_off_minute: Minute substituted (0 played full match)","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_lineups.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Opta Lineup Data — load_opta_lineups","text":"","code":"if (FALSE) { # \\dontrun{ # Load EPL lineups epl_lineups <- load_opta_lineups(\"ENG\", season = \"2024-2025\")  # Find starters with most minutes starters <- epl_lineups |>   dplyr::filter(is_starter) |>   dplyr::group_by(player_name, team_name) |>   dplyr::summarise(total_mins = sum(minutes_played)) } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_match_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Opta All Match Events (All Events with X/Y Coordinates) — load_opta_match_events","title":"Load Opta All Match Events (All Events with X/Y Coordinates) — load_opta_match_events","text":"Loads match events x/y coordinates Opta/TheAnalyst data. match typically ~2000 events including passes, tackles, aerials, dribbles, shots, . comprehensive event data available.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_match_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Opta All Match Events (All Events with X/Y Coordinates) — load_opta_match_events","text":"","code":"load_opta_match_events(   league,   season = NULL,   columns = NULL,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_match_events.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Opta All Match Events (All Events with X/Y Coordinates) — load_opta_match_events","text":"league League code. Accepts panna format (ENG, ESP, GER, ITA, FRA) Opta format (EPL, La_Liga, Bundesliga, Serie_A, Ligue_1). season Optional season filter (e.g., \"2021-2022\"). NULL, loads seasons. columns Optional character vector columns select. NULL, selects . source Data source: \"remote\" (default) downloads GitHub releases, \"local\" loads local files (requires prior pb_download_opta()).","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_match_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Opta All Match Events (All Events with X/Y Coordinates) — load_opta_match_events","text":"Data frame match events columns: match_id: Match identifier event_id: Unique event identifier type_id: Opta event type (1=pass, 3=dribble, 7=tackle, 13-16=shots, 44=aerial, etc.) player_id, player_name: Player involved team_id: Team performed action minute, second: Time event x, y: Start coordinates (0-100 scale) end_x, end_y: End coordinates passes/carries (0-100 scale) outcome: 1=successful, 0=unsuccessful period_id: 1=first half, 2=second half qualifier_json: Full qualifiers JSON string advanced analysis","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_match_events.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Opta All Match Events (All Events with X/Y Coordinates) — load_opta_match_events","text":"","code":"if (FALSE) { # \\dontrun{ # Load all EPL match events epl_events <- load_opta_match_events(\"ENG\", season = \"2024-2025\")  # Filter to just passes (type_id = 1) passes <- epl_events |>   dplyr::filter(type_id == 1)  # Build passing networks pass_counts <- passes |>   dplyr::filter(outcome == 1) |>   dplyr::count(match_id, player_id)  # Filter to tackles (type_id = 7) tackles <- epl_events |>   dplyr::filter(type_id == 7) } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_match_stats.html","id":null,"dir":"Reference","previous_headings":"","what":"Load pre-computed Opta match-level stats — load_opta_match_stats","title":"Load pre-computed Opta match-level stats — load_opta_match_stats","text":"Downloads queries opta_match_stats.parquet opta-latest GitHub release. file contains processed match-level player stats _p90 columns, produced estimated skills pipeline step 01 (~15 MB, ~100K rows).","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_match_stats.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load pre-computed Opta match-level stats — load_opta_match_stats","text":"","code":"load_opta_match_stats(   season = NULL,   columns = NULL,   source = c(\"remote\", \"local\"),   repo = \"peteowen1/pannadata\",   tag = \"opta-latest\" )"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_match_stats.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load pre-computed Opta match-level stats — load_opta_match_stats","text":"season Optional season filter end year (e.g., 2025). columns Optional character vector columns select. source Data source: \"remote\" (default) \"local\". repo GitHub repository (default: \"peteowen1/pannadata\"). tag Release tag (default: \"opta-latest\").","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_match_stats.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load pre-computed Opta match-level stats — load_opta_match_stats","text":"Data frame one row per player-match containing processed stats _p90 suffixes, player_id, player_name, match_date, total_minutes, etc.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_match_stats.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load pre-computed Opta match-level stats — load_opta_match_stats","text":"","code":"if (FALSE) { # \\dontrun{ # Load all match stats ms <- load_opta_match_stats()  # Use with player_skill_profile for full diagnostic output player_skill_profile(\"H. Kane\", match_stats = ms) } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_shot_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Opta Shot Events (Individual Shots with Coordinates) — load_opta_shot_events","title":"Load Opta Shot Events (Individual Shots with Coordinates) — load_opta_shot_events","text":"Loads individual shot events x/y coordinates Opta/TheAnalyst data. row single shot location, outcome, body part, situation. Useful xG modeling includes shot coordinates.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_shot_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Opta Shot Events (Individual Shots with Coordinates) — load_opta_shot_events","text":"","code":"load_opta_shot_events(   league,   season = NULL,   columns = NULL,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_shot_events.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Opta Shot Events (Individual Shots with Coordinates) — load_opta_shot_events","text":"league League code. Accepts panna format (ENG, ESP, GER, ITA, FRA) Opta format (EPL, La_Liga, Bundesliga, Serie_A, Ligue_1). season Optional season filter (e.g., \"2021-2022\"). NULL, loads seasons. columns Optional character vector columns select. NULL, selects . source Data source: \"remote\" (default) downloads GitHub releases, \"local\" loads local files (requires prior pb_download_opta()).","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_shot_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Opta Shot Events (Individual Shots with Coordinates) — load_opta_shot_events","text":"Data frame shot events columns: match_id: Match identifier event_id: Unique event identifier player_id, player_name: Shooter info team_id: Team took shot minute, second: Time shot x, y: Shot coordinates (0-100 scale) outcome: 1=target, 0=target is_goal: Whether shot resulted goal type_id: 13=saved, 14=post, 15=miss, 16=goal body_part: Head, LeftFoot, RightFoot situation: OpenPlay, SetPiece, Corner, Penalty big_chance: TRUE big chance","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_shot_events.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Opta Shot Events (Individual Shots with Coordinates) — load_opta_shot_events","text":"","code":"if (FALSE) { # \\dontrun{ # Load EPL shot events with coordinates epl_shots <- load_opta_shot_events(\"ENG\", season = \"2024-2025\")  # Analyze shots by location library(ggplot2) ggplot(epl_shots, aes(x = x, y = y, color = is_goal)) +   geom_point(alpha = 0.5) } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_shots.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Opta Shot Data — load_opta_shots","title":"Load Opta Shot Data — load_opta_shots","text":"Loads aggregated shot statistics per player per match Opta data. Includes shot locations, body parts, big chance metrics.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_shots.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Opta Shot Data — load_opta_shots","text":"","code":"load_opta_shots(   league,   season = NULL,   columns = NULL,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_shots.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Opta Shot Data — load_opta_shots","text":"league League code. Accepts panna format (ENG, ESP, GER, ITA, FRA) Opta format (EPL, La_Liga, Bundesliga, Serie_A, Ligue_1). season Optional season filter (e.g., \"2021-2022\"). NULL, loads seasons. columns Optional character vector columns select. NULL, selects . source Data source: \"remote\" (default) downloads GitHub releases, \"local\" loads local files (requires prior pb_download_opta()).","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_shots.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Opta Shot Data — load_opta_shots","text":"Data frame shot statistics.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_shots.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Opta Shot Data — load_opta_shots","text":"","code":"if (FALSE) { # \\dontrun{ # Load all EPL shot data epl_shots <- load_opta_shots(\"ENG\")  # Load specific season shots_2122 <- load_opta_shots(\"ENG\", season = \"2021-2022\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_skills.html","id":null,"dir":"Reference","previous_headings":"","what":"Load pre-computed Opta skill estimates — load_opta_skills","title":"Load pre-computed Opta skill estimates — load_opta_skills","text":"Downloads queries opta_skills.parquet opta-latest GitHub release. file contains Bayesian decay-weighted skill estimates produced estimated skills pipeline (~15K player-seasons, ~2-3 MB).","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_skills.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load pre-computed Opta skill estimates — load_opta_skills","text":"","code":"load_opta_skills(   season = NULL,   columns = NULL,   source = c(\"remote\", \"local\"),   repo = \"peteowen1/pannadata\",   tag = \"opta-latest\" )"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_skills.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load pre-computed Opta skill estimates — load_opta_skills","text":"season Optional season filter end year (e.g., 2025 2024-2025 season). columns Optional character vector columns select. source Data source: \"remote\" (default, downloads GitHub) \"local\" (reads opta_data_dir()). repo GitHub repository (default: \"peteowen1/pannadata\"). tag Release tag (default: \"opta-latest\").","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_skills.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load pre-computed Opta skill estimates — load_opta_skills","text":"Data frame one row per player-season containing skill estimates, player metadata (player_id, player_name, primary_position), context columns (season_end_year, weighted_90s, total_minutes).","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_skills.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load pre-computed Opta skill estimates — load_opta_skills","text":"","code":"if (FALSE) { # \\dontrun{ # Load all skills skills <- load_opta_skills()  # Load specific season skills_2025 <- load_opta_skills(season = 2025)  # Use with player_skill_profile player_skill_profile(\"H. Kane\", skills = skills) } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_stats.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Opta Player Stats — load_opta_stats","title":"Load Opta Player Stats — load_opta_stats","text":"Loads player-level match statistics Opta/TheAnalyst data. Contains 263 columns including Opta-exclusive stats like progressiveCarries, possWonDef3rd, touchesInOppBox, bigChanceCreated, etc.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_stats.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Opta Player Stats — load_opta_stats","text":"","code":"load_opta_stats(   league,   season = NULL,   columns = NULL,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_stats.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Opta Player Stats — load_opta_stats","text":"league League code. Accepts panna format (ENG, ESP, GER, ITA, FRA) Opta format (EPL, La_Liga, Bundesliga, Serie_A, Ligue_1). season Optional season filter (e.g., \"2021-2022\"). NULL, loads seasons. columns Optional character vector columns select. NULL, selects . source Data source: \"remote\" (default) downloads GitHub releases, \"local\" loads local files (requires prior pb_download_opta()).","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_stats.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Opta Player Stats — load_opta_stats","text":"Data frame player statistics.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_stats.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Opta Player Stats — load_opta_stats","text":"","code":"if (FALSE) { # \\dontrun{ # Load EPL data (downloads automatically from GitHub) epl <- load_opta_stats(\"ENG\")  # Load from local files (requires pb_download_opta() first) epl_local <- load_opta_stats(\"ENG\", season = \"2021-2022\", source = \"local\")  # Load specific columns only epl_basic <- load_opta_stats(\"ENG\", columns = c(   \"match_id\", \"player_name\", \"team_name\", \"minsPlayed\",   \"goals\", \"totalScoringAtt\", \"progressiveCarries\" ))  # Load all Big 5 leagues big5 <- data.table::rbindlist(lapply(c(\"ENG\", \"ESP\", \"GER\", \"ITA\", \"FRA\"), load_opta_stats)) } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Internal function to load Opta table data — load_opta_table","title":"Internal function to load Opta table data — load_opta_table","text":"Internal function load Opta table data","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Internal function to load Opta table data — load_opta_table","text":"","code":"load_opta_table(table_type, league, season, columns, source = \"local\")"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Internal function to load Opta table data — load_opta_table","text":"table_type Table type: \"player_stats\", \"shots\", \"shot_events\", \"events\", \"match_events\", \"lineups\", \"fixtures\". league League code season Optional season filter columns Optional columns select source \"local\" \"remote\"","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Internal function to load Opta table data — load_opta_table","text":"Data frame","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_xmetrics.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Opta xG/xA/xPass Player Metrics — load_opta_xmetrics","title":"Load Opta xG/xA/xPass Player Metrics — load_opta_xmetrics","text":"Loads pre-computed player-level xG, xA, xPass metrics parquet files. generated 03_calculate_player_xmetrics.R pipeline script applies trained xG/xPass models Opta event data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_xmetrics.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Opta xG/xA/xPass Player Metrics — load_opta_xmetrics","text":"","code":"load_opta_xmetrics(league, season = NULL, columns = NULL, source = c(\"local\"))"},{"path":"https://peteowen1.github.io/panna/reference/load_opta_xmetrics.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Opta xG/xA/xPass Player Metrics — load_opta_xmetrics","text":"league League code (e.g., \"ENG\", \"EPL\"). season Optional season filter (e.g., \"2024-2025\"). columns Optional character vector columns select. source Data source: \"local\" supported (xmetrics pipeline-generated, available GitHub releases).","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_xmetrics.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Opta xG/xA/xPass Player Metrics — load_opta_xmetrics","text":"Data frame player xmetrics including xg, npxg, xa, xpass stats.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_opta_xmetrics.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Opta xG/xA/xPass Player Metrics — load_opta_xmetrics","text":"","code":"if (FALSE) { # \\dontrun{ # Load EPL xmetrics epl_xm <- load_opta_xmetrics(\"ENG\", season = \"2024-2025\")  # Top xG players head(epl_xm[order(-epl_xm$xg), c(\"player_name\", \"team_name\", \"xg\", \"goals\")]) } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_passing.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Passing Data — load_passing","title":"Load Passing Data — load_passing","text":"Loads passing statistics pannadata.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_passing.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Passing Data — load_passing","text":"","code":"load_passing(league = NULL, season = NULL, source = c(\"remote\", \"local\"))"},{"path":"https://peteowen1.github.io/panna/reference/load_passing.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Passing Data — load_passing","text":"league Optional league filter (e.g., \"ENG\", \"ESP\", \"GER\"). season Optional season filter (e.g., \"2023-2024\"). source Data source: \"remote\" (default) \"local\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_passing.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Passing Data — load_passing","text":"Data frame passing statistics.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_passing.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Passing Data — load_passing","text":"","code":"if (FALSE) { # \\dontrun{ # Load all passing data all_passing <- load_passing()  # Load Italy 2024-2025 passing ita_passing <- load_passing(league = \"ITA\", season = \"2024-2025\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_possession.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Possession Data — load_possession","title":"Load Possession Data — load_possession","text":"Loads possession statistics pannadata.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_possession.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Possession Data — load_possession","text":"","code":"load_possession(league = NULL, season = NULL, source = c(\"remote\", \"local\"))"},{"path":"https://peteowen1.github.io/panna/reference/load_possession.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Possession Data — load_possession","text":"league Optional league filter (e.g., \"ENG\", \"ESP\", \"GER\"). season Optional season filter (e.g., \"2023-2024\"). source Data source: \"remote\" (default) \"local\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_possession.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Possession Data — load_possession","text":"Data frame possession statistics.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_possession.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Possession Data — load_possession","text":"","code":"if (FALSE) { # \\dontrun{ # Load all possession data all_possession <- load_possession()  # Load England 2024-2025 possession stats eng_poss <- load_possession(league = \"ENG\", season = \"2024-2025\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_predictions.html","id":null,"dir":"Reference","previous_headings":"","what":"Load match predictions — load_predictions","title":"Load match predictions — load_predictions","text":"Loads match predictions local cache downloads GitHub Releases.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_predictions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load match predictions — load_predictions","text":"","code":"load_predictions(source = c(\"remote\", \"local\"), filter_future = FALSE)"},{"path":"https://peteowen1.github.io/panna/reference/load_predictions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load match predictions — load_predictions","text":"source Data source: \"local\" loads pannadata/predictions/ (errors found), \"remote\" always downloads latest GitHub release first. filter_future TRUE, returns matches match_date >= today.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_predictions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load match predictions — load_predictions","text":"Data frame match predictions.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_predictions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load match predictions — load_predictions","text":"","code":"if (FALSE) { # \\dontrun{ # Load from remote (always downloads latest) preds <- load_predictions(source = \"remote\")  # Load only future matches preds <- load_predictions(source = \"remote\", filter_future = TRUE)  # Load from local cache preds <- load_predictions(source = \"local\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_shots.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Shots Data — load_shots","title":"Load Shots Data — load_shots","text":"Loads shot-level data expected goals (xG) pannadata.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_shots.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Shots Data — load_shots","text":"","code":"load_shots(league = NULL, season = NULL, source = c(\"remote\", \"local\"))"},{"path":"https://peteowen1.github.io/panna/reference/load_shots.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Shots Data — load_shots","text":"league Optional league filter (e.g., \"ENG\", \"ESP\", \"GER\"). season Optional season filter (e.g., \"2023-2024\"). source Data source: \"remote\" (default) \"local\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_shots.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Shots Data — load_shots","text":"Data frame shot data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_shots.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Shots Data — load_shots","text":"","code":"if (FALSE) { # \\dontrun{ # Load all shots from remote all_shots <- load_shots()  # Load Spain 2023-2024 shots esp_shots <- load_shots(league = \"ESP\", season = \"2023-2024\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Summary Data — load_summary","title":"Load Summary Data — load_summary","text":"Loads player summary statistics pannadata. Uses DuckDB query parquet files - filtering happens query time.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Summary Data — load_summary","text":"","code":"load_summary(league = NULL, season = NULL, source = c(\"remote\", \"local\"))"},{"path":"https://peteowen1.github.io/panna/reference/load_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Summary Data — load_summary","text":"league Optional league filter (e.g., \"ENG\", \"ESP\", \"GER\"). season Optional season filter (e.g., \"2023-2024\"). source Data source: \"remote\" (default) downloads GitHub, \"local\" uses local parquet files.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Summary Data — load_summary","text":"Data frame player summary statistics.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_summary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Summary Data — load_summary","text":"","code":"if (FALSE) { # \\dontrun{ # Load all summary data from remote all_summary <- load_summary()  # Load England 2023-2024 only (efficient - filters in SQL) eng_2023 <- load_summary(league = \"ENG\", season = \"2023-2024\")  # Load from local files local_data <- load_summary(source = \"local\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_table_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Internal function to load table data — load_table_data","title":"Internal function to load table data — load_table_data","text":"Common implementation load_* functions. remote loading, first tries individual parquet files (fast). exist (404), falls back ZIP-based loading.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_table_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Internal function to load table data — load_table_data","text":"","code":"load_table_data(table_type, league, season, source)"},{"path":"https://peteowen1.github.io/panna/reference/load_table_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Internal function to load table data — load_table_data","text":"table_type type table load (e.g., \"summary\", \"events\") league Optional league filter season Optional season filter source \"remote\" \"local\"","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_table_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Internal function to load table data — load_table_data","text":"Data frame","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_manifest.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Understat manifest from parquet file — load_understat_manifest","title":"Load Understat manifest from parquet file — load_understat_manifest","text":"manifest tracks scraped match IDs league season.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_manifest.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Understat manifest from parquet file — load_understat_manifest","text":"","code":"load_understat_manifest(path)"},{"path":"https://peteowen1.github.io/panna/reference/load_understat_manifest.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Understat manifest from parquet file — load_understat_manifest","text":"path Path manifest parquet file","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_manifest.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Understat manifest from parquet file — load_understat_manifest","text":"Data frame columns: match_id, league, season, scraped_at","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_metadata.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Understat Metadata — load_understat_metadata","title":"Load Understat Metadata — load_understat_metadata","text":"Loads match metadata Understat including teams, scores, xG totals.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_metadata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Understat Metadata — load_understat_metadata","text":"","code":"load_understat_metadata(   league = NULL,   season = NULL,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/load_understat_metadata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Understat Metadata — load_understat_metadata","text":"league Optional league filter (e.g., \"ENG\", \"ESP\", \"RUS\"). season Optional season filter (e.g., \"2024\" 2024). Note: Understat uses single year format, YYYY-YYYY. source Data source: \"remote\" (default) downloads GitHub, \"local\" uses local parquet/RDS files.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_metadata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Understat Metadata — load_understat_metadata","text":"Data frame match metadata Understat.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_metadata.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Understat Metadata — load_understat_metadata","text":"","code":"if (FALSE) { # \\dontrun{ # Load all Understat metadata from remote all_meta <- load_understat_metadata()  # Load Germany 2024 only ger_2024 <- load_understat_metadata(league = \"GER\", season = \"2024\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_understat_roster.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Understat Roster Data — load_understat_roster","title":"Load Understat Roster Data — load_understat_roster","text":"Loads player statistics Understat matches. Includes xG, xA, xG chain, xG buildup, advanced metrics.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_roster.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Understat Roster Data — load_understat_roster","text":"","code":"load_understat_roster(   league = NULL,   season = NULL,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/load_understat_roster.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Understat Roster Data — load_understat_roster","text":"league Optional league filter (e.g., \"ENG\", \"ESP\", \"RUS\"). season Optional season filter (e.g., \"2024\" 2024). Note: Understat uses single year format, YYYY-YYYY. source Data source: \"remote\" (default) downloads GitHub, \"local\" uses local parquet/RDS files.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_roster.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Understat Roster Data — load_understat_roster","text":"Data frame player statistics Understat.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_roster.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Understat Roster Data — load_understat_roster","text":"","code":"if (FALSE) { # \\dontrun{ # Load all Understat roster data from remote all_roster <- load_understat_roster()  # Load England 2024 only eng_2024 <- load_understat_roster(league = \"ENG\", season = \"2024\")  # Load from local files local_data <- load_understat_roster(source = \"local\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_understat_shots.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Understat Shots Data — load_understat_shots","title":"Load Understat Shots Data — load_understat_shots","text":"Loads shot-level data xG Understat matches. row represents single shot coordinates, xG, outcome.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_shots.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Understat Shots Data — load_understat_shots","text":"","code":"load_understat_shots(   league = NULL,   season = NULL,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/load_understat_shots.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Understat Shots Data — load_understat_shots","text":"league Optional league filter (e.g., \"ENG\", \"ESP\", \"RUS\"). season Optional season filter (e.g., \"2024\" 2024). Note: Understat uses single year format, YYYY-YYYY. source Data source: \"remote\" (default) downloads GitHub, \"local\" uses local parquet/RDS files.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_shots.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Understat Shots Data — load_understat_shots","text":"Data frame shot data Understat.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_shots.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Understat Shots Data — load_understat_shots","text":"","code":"if (FALSE) { # \\dontrun{ # Load all Understat shots from remote all_shots <- load_understat_shots()  # Load Spain 2023 only esp_2023 <- load_understat_shots(league = \"ESP\", season = \"2023\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/load_understat_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Understat data from parquet cache — load_understat_table","title":"Load Understat data from parquet cache — load_understat_table","text":"Load Understat data parquet cache","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Understat data from parquet cache — load_understat_table","text":"","code":"load_understat_table(league, season, understat_id = NULL, table_type)"},{"path":"https://peteowen1.github.io/panna/reference/load_understat_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Understat data from parquet cache — load_understat_table","text":"league League code season Season string understat_id Optional specific match ID load table_type Type table","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Understat data from parquet cache — load_understat_table","text":"Data frame NULL cached","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_table_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Internal function to load Understat table data — load_understat_table_data","title":"Internal function to load Understat table data — load_understat_table_data","text":"Common implementation load_understat_* functions. Handles remote (GitHub releases) local (parquet/RDS) sources.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_table_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Internal function to load Understat table data — load_understat_table_data","text":"","code":"load_understat_table_data(table_type, league, season, source)"},{"path":"https://peteowen1.github.io/panna/reference/load_understat_table_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Internal function to load Understat table data — load_understat_table_data","text":"table_type type Understat table (roster, shots, metadata) league Optional league filter season Optional season filter (single year format) source \"remote\" \"local\"","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_understat_table_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Internal function to load Understat table data — load_understat_table_data","text":"Data frame","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_xg_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Pre-trained xG Model — load_xg_model","title":"Load Pre-trained xG Model — load_xg_model","text":"Loads xG model saved RDS file downloads GitHub releases.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_xg_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Pre-trained xG Model — load_xg_model","text":"","code":"load_xg_model(path = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/load_xg_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Pre-trained xG Model — load_xg_model","text":"path Path model RDS file. NULL, attempts download releases.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_xg_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Pre-trained xG Model — load_xg_model","text":"Fitted xG model","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_xpass_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Load Pre-trained xPass Model — load_xpass_model","title":"Load Pre-trained xPass Model — load_xpass_model","text":"Loads xPass model saved RDS file.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_xpass_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load Pre-trained xPass Model — load_xpass_model","text":"","code":"load_xpass_model(path = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/load_xpass_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load Pre-trained xPass Model — load_xpass_model","text":"path Path model RDS file. NULL, uses default location.","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_xpass_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load Pre-trained xPass Model — load_xpass_model","text":"Fitted xPass model","code":""},{"path":"https://peteowen1.github.io/panna/reference/load_xpass_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Load Pre-trained xPass Model — load_xpass_model","text":"","code":"if (FALSE) { # \\dontrun{ # Load from default pannadata location xpass_model <- load_xpass_model()  # Load from a specific path xpass_model <- load_xpass_model(\"path/to/xpass_model.rds\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/make_match_filename.html","id":null,"dir":"Reference","previous_headings":"","what":"Create match filename for caching — make_match_filename","title":"Create match filename for caching — make_match_filename","text":"hierarchical structure, filename just fbref_id. League season encoded directory path.","code":""},{"path":"https://peteowen1.github.io/panna/reference/make_match_filename.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create match filename for caching — make_match_filename","text":"","code":"make_match_filename(fbref_id)"},{"path":"https://peteowen1.github.io/panna/reference/make_match_filename.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create match filename for caching — make_match_filename","text":"fbref_id FBref match ID (8-char hex)","code":""},{"path":"https://peteowen1.github.io/panna/reference/make_match_filename.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create match filename for caching — make_match_filename","text":"Filename string (without path)","code":""},{"path":"https://peteowen1.github.io/panna/reference/map_opta_action_type.html","id":null,"dir":"Reference","previous_headings":"","what":"Map Opta Type ID to SPADL Action Type — map_opta_action_type","title":"Map Opta Type ID to SPADL Action Type — map_opta_action_type","text":"Map Opta Type ID SPADL Action Type","code":""},{"path":"https://peteowen1.github.io/panna/reference/map_opta_action_type.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Map Opta Type ID to SPADL Action Type — map_opta_action_type","text":"","code":"map_opta_action_type(type_id, qualifiers = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/map_opta_action_type.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Map Opta Type ID to SPADL Action Type — map_opta_action_type","text":"type_id Vector Opta type_id values qualifiers Parsed qualifier information (optional)","code":""},{"path":"https://peteowen1.github.io/panna/reference/map_opta_action_type.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Map Opta Type ID to SPADL Action Type — map_opta_action_type","text":"Character vector SPADL action types","code":""},{"path":"https://peteowen1.github.io/panna/reference/map_opta_bodypart.html","id":null,"dir":"Reference","previous_headings":"","what":"Map Opta Events to Body Part — map_opta_bodypart","title":"Map Opta Events to Body Part — map_opta_bodypart","text":"Map Opta Events Body Part","code":""},{"path":"https://peteowen1.github.io/panna/reference/map_opta_bodypart.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Map Opta Events to Body Part — map_opta_bodypart","text":"","code":"map_opta_bodypart(type_id, qualifiers = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/map_opta_bodypart.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Map Opta Events to Body Part — map_opta_bodypart","text":"type_id Vector Opta type_id values qualifiers Parsed qualifier information (optional)","code":""},{"path":"https://peteowen1.github.io/panna/reference/map_opta_bodypart.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Map Opta Events to Body Part — map_opta_bodypart","text":"Character vector body parts: \"foot\", \"head\", \"\"","code":""},{"path":"https://peteowen1.github.io/panna/reference/merge_duel_rows.html","id":null,"dir":"Reference","previous_headings":"","what":"Merge Duplicate Duel Rows — merge_duel_rows","title":"Merge Duplicate Duel Rows — merge_duel_rows","text":"Opta records participants duel separate rows (winner loser perspectives). function merges single rows, keeping winner's row adding opponent information loser's row. Fully vectorized data.table speed.","code":""},{"path":"https://peteowen1.github.io/panna/reference/merge_duel_rows.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Merge Duplicate Duel Rows — merge_duel_rows","text":"","code":"merge_duel_rows(dt)"},{"path":"https://peteowen1.github.io/panna/reference/merge_duel_rows.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Merge Duplicate Duel Rows — merge_duel_rows","text":"dt Data.table SPADL format duel actions (modified place)","code":""},{"path":"https://peteowen1.github.io/panna/reference/merge_duel_rows.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Merge Duplicate Duel Rows — merge_duel_rows","text":"Data.table merged duel rows new columns: opponent_player_id - Player lost duel (NA non-duels) opponent_player_name - Name opponent","code":""},{"path":"https://peteowen1.github.io/panna/reference/merge_processed_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Merge all processed data — merge_processed_data","title":"Merge all processed data — merge_processed_data","text":"Combines processed data sources unified datasets.","code":""},{"path":"https://peteowen1.github.io/panna/reference/merge_processed_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Merge all processed data — merge_processed_data","text":"","code":"merge_processed_data(processed_data)"},{"path":"https://peteowen1.github.io/panna/reference/merge_processed_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Merge all processed data — merge_processed_data","text":"processed_data List processed data frames","code":""},{"path":"https://peteowen1.github.io/panna/reference/merge_processed_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Merge all processed data — merge_processed_data","text":"List merged data frames","code":""},{"path":"https://peteowen1.github.io/panna/reference/migrate_metadata_tables_available.html","id":null,"dir":"Reference","previous_headings":"","what":"Migrate old metadata files to include tables_available field — migrate_metadata_tables_available","title":"Migrate old metadata files to include tables_available field — migrate_metadata_tables_available","text":"Updates metadata files created tables_available field added. Checks table types actually exist cache updates metadata accordingly.","code":""},{"path":"https://peteowen1.github.io/panna/reference/migrate_metadata_tables_available.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Migrate old metadata files to include tables_available field — migrate_metadata_tables_available","text":"","code":"migrate_metadata_tables_available(league = NULL, season = NULL, verbose = TRUE)"},{"path":"https://peteowen1.github.io/panna/reference/migrate_metadata_tables_available.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Migrate old metadata files to include tables_available field — migrate_metadata_tables_available","text":"league Optional league filter season Optional season filter verbose Print progress (default TRUE)","code":""},{"path":"https://peteowen1.github.io/panna/reference/migrate_metadata_tables_available.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Migrate old metadata files to include tables_available field — migrate_metadata_tables_available","text":"Number metadata files updated","code":""},{"path":"https://peteowen1.github.io/panna/reference/migrate_metadata_tables_available.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Migrate old metadata files to include tables_available field — migrate_metadata_tables_available","text":"Uses hierarchical path: {table_type}/{league}/{season}/{id}.rds","code":""},{"path":"https://peteowen1.github.io/panna/reference/migrate_metadata_tables_available.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Migrate old metadata files to include tables_available field — migrate_metadata_tables_available","text":"","code":"if (FALSE) { # \\dontrun{ # Migrate all old metadata migrate_metadata_tables_available()  # Migrate only ENG 2017-2018 migrate_metadata_tables_available(league = \"ENG\", season = \"2017-2018\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/normalize_epv_features.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalize Features for Model — normalize_epv_features","title":"Normalize Features for Model — normalize_epv_features","text":"Applies standardization numeric features.","code":""},{"path":"https://peteowen1.github.io/panna/reference/normalize_epv_features.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalize Features for Model — normalize_epv_features","text":"","code":"normalize_epv_features(features, feature_cols = NULL, means = NULL, sds = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/normalize_epv_features.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Normalize Features for Model — normalize_epv_features","text":"features Feature data frame feature_cols Columns normalize means Optional pre-computed means sds Optional pre-computed standard deviations","code":""},{"path":"https://peteowen1.github.io/panna/reference/normalize_epv_features.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalize Features for Model — normalize_epv_features","text":"List normalized features, means, sds","code":""},{"path":"https://peteowen1.github.io/panna/reference/normalize_spadl_coordinates.html","id":null,"dir":"Reference","previous_headings":"","what":"Normalize SPADL Coordinates — normalize_spadl_coordinates","title":"Normalize SPADL Coordinates — normalize_spadl_coordinates","text":"WARNING: function uses heuristic work well Opta's team-relative coordinate system. EPV modeling, use normalize_direction=FALSE (default) preserve Opta's native coordinates team's actions perspective.","code":""},{"path":"https://peteowen1.github.io/panna/reference/normalize_spadl_coordinates.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normalize SPADL Coordinates — normalize_spadl_coordinates","text":"","code":"normalize_spadl_coordinates(dt)"},{"path":"https://peteowen1.github.io/panna/reference/normalize_spadl_coordinates.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Normalize SPADL Coordinates — normalize_spadl_coordinates","text":"dt Data.table SPADL format (modified place)","code":""},{"path":"https://peteowen1.github.io/panna/reference/normalize_spadl_coordinates.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normalize SPADL Coordinates — normalize_spadl_coordinates","text":"Data.table normalized coordinates (object, modified)","code":""},{"path":"https://peteowen1.github.io/panna/reference/normalize_spadl_coordinates.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Normalize SPADL Coordinates — normalize_spadl_coordinates","text":"Attempts flip coordinates teams attack toward x=100. Uses mean position per team/period heuristic, fails teams similar mean positions coordinates team-relative.","code":""},{"path":"https://peteowen1.github.io/panna/reference/opta_data_dir.html","id":null,"dir":"Reference","previous_headings":"","what":"Get or Set Opta Data Directory — opta_data_dir","title":"Get or Set Opta Data Directory — opta_data_dir","text":"Returns path Opta data directory within pannadata. Uses pannadata/data/opta/ base path.","code":""},{"path":"https://peteowen1.github.io/panna/reference/opta_data_dir.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get or Set Opta Data Directory — opta_data_dir","text":"","code":"opta_data_dir(path = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/opta_data_dir.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get or Set Opta Data Directory — opta_data_dir","text":"path Optional path set Opta data directory.","code":""},{"path":"https://peteowen1.github.io/panna/reference/opta_data_dir.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get or Set Opta Data Directory — opta_data_dir","text":"Character path Opta data directory.","code":""},{"path":"https://peteowen1.github.io/panna/reference/opta_data_dir.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get or Set Opta Data Directory — opta_data_dir","text":"","code":"if (FALSE) { # \\dontrun{ # Get current path (auto-detected from pannadata) opta_data_dir()  # Set explicit path opta_data_dir(\"C:/path/to/pannadata/data/opta\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/optimize_all_priors.html","id":null,"dir":"Reference","previous_headings":"","what":"Optimize prior strengths for all stats — optimize_all_priors","title":"Optimize prior strengths for all stats — optimize_all_priors","text":"Finds optimal Bayesian prior strength per stat. Rate stats get per-stat prior_90s, efficiency stats get per-stat prior_attempts. Results stored decay_params$stat_priors.","code":""},{"path":"https://peteowen1.github.io/panna/reference/optimize_all_priors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Optimize prior strengths for all stats — optimize_all_priors","text":"","code":"optimize_all_priors(   match_stats,   decay_params = NULL,   stat_tiers = NULL,   optimize_lambda = TRUE,   optimize_quantile = FALSE,   sample_n = 500,   n_cores = 1,   verbose = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/optimize_all_priors.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Optimize prior strengths for all stats — optimize_all_priors","text":"match_stats data.table compute_match_level_opta_stats(). decay_params Base decay parameters (provides lambda values). stat_tiers Output get_stat_tiers(), NULL defaults. optimize_lambda TRUE, jointly optimizes per-stat decay lambda. optimize_quantile TRUE, jointly optimizes per-stat prior center quantile. sample_n Max players sample per stat (default 500). n_cores Number cores parallel optimization. Default 1 (sequential). verbose Print progress.","code":""},{"path":"https://peteowen1.github.io/panna/reference/optimize_all_priors.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Optimize prior strengths for all stats — optimize_all_priors","text":"Updated decay_params stat_priors element: named numeric vector mapping stat names optimal prior strengths.","code":""},{"path":"https://peteowen1.github.io/panna/reference/optimize_stat_prior.html","id":null,"dir":"Reference","previous_headings":"","what":"Optimize Bayesian prior strength for a single stat — optimize_stat_prior","title":"Optimize Bayesian prior strength for a single stat — optimize_stat_prior","text":"Finds optimal prior strength (prior_90s rate stats, prior_attempts efficiency stats) minimizes next-match prediction MSE using Gamma-Poisson Beta-Binomial posterior.","code":""},{"path":"https://peteowen1.github.io/panna/reference/optimize_stat_prior.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Optimize Bayesian prior strength for a single stat — optimize_stat_prior","text":"","code":"optimize_stat_prior(   match_stats = NULL,   stat_name,   lambda = 0.003,   pos_mean = NULL,   is_efficiency = FALSE,   denom_col = NULL,   prior_bounds = NULL,   lambda_bounds = NULL,   quantile_bounds = NULL,   optimize_lambda = FALSE,   optimize_quantile = FALSE,   pos_multipliers = NULL,   min_history = 5,   sample_n = 500,   seed = 42,   precomputed = NULL )"},{"path":"https://peteowen1.github.io/panna/reference/optimize_stat_prior.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Optimize Bayesian prior strength for a single stat — optimize_stat_prior","text":"match_stats data.table match-level stats. stat_name Name stat column optimize. lambda Decay rate use. Default 0.003. pos_mean Population mean stat (prior center). NULL, computed minutes-weighted mean data. is_efficiency TRUE, uses Beta-Binomial attempt-weighting. denom_col Denominator column efficiency stats. prior_bounds Numeric vector length 2: search range prior strength. Default c(0.1, 100) rate stats, c(0.1, 500) efficiency. lambda_bounds Numeric vector length 2: search range decay lambda. Default c(0, 0.02). used optimize_lambda = TRUE. quantile_bounds Numeric vector length 2: search range prior center quantile. Default c(0.3, 0.7). used optimize_quantile = TRUE. optimize_lambda TRUE, jointly optimizes decay rate lambda alongside prior strength using L-BFGS-B. optimize_quantile TRUE, jointly optimizes prior center quantile alongside prior strength. pos_multipliers Named list position multipliers compute_position_multipliers(). min_history Minimum prior matches prediction count. sample_n Max number players sample (speed). seed Random seed player sampling. precomputed Precomputed player splits optimize_all_priors(), NULL compute scratch.","code":""},{"path":"https://peteowen1.github.io/panna/reference/optimize_stat_prior.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Optimize Bayesian prior strength for a single stat — optimize_stat_prior","text":"list stat, optimal_prior, mse, n_predictions.","code":""},{"path":"https://peteowen1.github.io/panna/reference/panna-package.html","id":null,"dir":"Reference","previous_headings":"","what":"panna: Player Rating System for Football Using RAPM and SPM Methods — panna-package","title":"panna: Player Rating System for Football Using RAPM and SPM Methods — panna-package","text":"Implements player ratings football (soccer) using Regularized Adjusted Plus-Minus ('RAPM') combined Statistical Plus-Minus ('SPM') Bayesian prior. Analyses time segments constant lineups ('splints') estimate player's contribution expected goals ('xG') differential. Provides offensive defensive rating decomposition across multiple data sources including 'FBref', 'Opta', 'Understat'.","code":""},{"path":[]},{"path":"https://peteowen1.github.io/panna/reference/panna-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"panna: Player Rating System for Football Using RAPM and SPM Methods — panna-package","text":"Maintainer: Pete Owen pete.owen1@hotmail.co.uk [copyright holder]","code":""},{"path":"https://peteowen1.github.io/panna/reference/pannadata_dir.html","id":null,"dir":"Reference","previous_headings":"","what":"Get or set pannadata directory — pannadata_dir","title":"Get or set pannadata directory — pannadata_dir","text":"Gets sets base directory parquet/RDS data storage.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pannadata_dir.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get or set pannadata directory — pannadata_dir","text":"","code":"pannadata_dir(path = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/pannadata_dir.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get or set pannadata directory — pannadata_dir","text":"path Optional new path set. NULL, returns current path.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pannadata_dir.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get or set pannadata directory — pannadata_dir","text":"Current pannadata directory path (invisibly setting)","code":""},{"path":"https://peteowen1.github.io/panna/reference/pannadata_dir.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get or set pannadata directory — pannadata_dir","text":"Resolution order (first match wins): Explicitly set via pannadata_dir(\"path\") PANNADATA_DIR environment variable ../pannadata/data exists (pannaverse developers) R's standard user data directory via tools::R_user_dir(\"panna\", \"data\") default (R_user_dir) gives OS-appropriate persistent storage: Windows: C:/Users//AppData/Local/R/panna/data Mac: ~/Library/Application Support/org.R-project.R/panna/data Linux: ~/.local/share/R/panna/data","code":""},{"path":"https://peteowen1.github.io/panna/reference/pannadata_dir.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get or set pannadata directory — pannadata_dir","text":"","code":"# Get current path pannadata_dir() #> [1] \"/home/runner/.local/share/R/panna\"  # Set custom path pannadata_dir(\"~/my/football/data\")"},{"path":"https://peteowen1.github.io/panna/reference/parse_event_minute.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse event minute from time string — parse_event_minute","title":"Parse event minute from time string — parse_event_minute","text":"Handles formats like \"45+2\" (45 plus 2 minutes stoppage time).","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_event_minute.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse event minute from time string — parse_event_minute","text":"","code":"parse_event_minute(time_str)"},{"path":"https://peteowen1.github.io/panna/reference/parse_event_minute.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse event minute from time string — parse_event_minute","text":"time_str Character vector event times","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_event_minute.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse event minute from time string — parse_event_minute","text":"Numeric vector minutes","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_match_page.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse all tables from FBref match page — parse_match_page","title":"Parse all tables from FBref match page — parse_match_page","text":"Extracts available stat tables match page.","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_match_page.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse all tables from FBref match page — parse_match_page","text":"","code":"parse_match_page(page, match_url)"},{"path":"https://peteowen1.github.io/panna/reference/parse_match_page.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse all tables from FBref match page — parse_match_page","text":"page Parsed HTML document match_url Original match URL","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_match_page.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse all tables from FBref match page — parse_match_page","text":"List containing metadata parsed tables","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_opta_qualifiers.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse Opta Qualifiers JSON — parse_opta_qualifiers","title":"Parse Opta Qualifiers JSON — parse_opta_qualifiers","text":"Extracts qualifier information qualifier_json column. Opta JSON format dictionary keys qualifier IDs: {\"108\":null,\"55\":\"145\",\"28\":null,...}","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_opta_qualifiers.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse Opta Qualifiers JSON — parse_opta_qualifiers","text":"","code":"parse_opta_qualifiers(dt)"},{"path":"https://peteowen1.github.io/panna/reference/parse_opta_qualifiers.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse Opta Qualifiers JSON — parse_opta_qualifiers","text":"dt Data.table qualifier_json column (modified place)","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_opta_qualifiers.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse Opta Qualifiers JSON — parse_opta_qualifiers","text":"Data.table parsed qualifier columns added","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_opta_qualifiers.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Parse Opta Qualifiers JSON — parse_opta_qualifiers","text":"Uses fast regex-based extraction instead JSON parsing.","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_shot_minute.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse shot minute strings — parse_shot_minute","title":"Parse shot minute strings — parse_shot_minute","text":"Converts shot minute strings like \"90+4\" minute added_time components.","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_shot_minute.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse shot minute strings — parse_shot_minute","text":"","code":"parse_shot_minute(minute_str)"},{"path":"https://peteowen1.github.io/panna/reference/parse_shot_minute.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse shot minute strings — parse_shot_minute","text":"minute_str Character vector minute strings (e.g., \"45\", \"90+4\", \"45+1\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_shot_minute.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse shot minute strings — parse_shot_minute","text":"Data frame columns: minute (numeric), added_time (numeric)","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_stats_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse FBref stats table with multi-row headers — parse_stats_table","title":"Parse FBref stats table with multi-row headers — parse_stats_table","text":"Handles complex header structure FBref stats tables. Uses multiple parsing strategies handle different table structures (lower-league cup matches different HTML structure).","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_stats_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse FBref stats table with multi-row headers — parse_stats_table","text":"","code":"parse_stats_table(page, table_id)"},{"path":"https://peteowen1.github.io/panna/reference/parse_stats_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse FBref stats table with multi-row headers — parse_stats_table","text":"page Parsed HTML document table_id ID table parse","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_stats_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse FBref stats table with multi-row headers — parse_stats_table","text":"Data frame parsed stats, NULL table found","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_understat_json.html","id":null,"dir":"Reference","previous_headings":"","what":"Parse and clean Understat JSON string — parse_understat_json","title":"Parse and clean Understat JSON string — parse_understat_json","text":"Unescapes hex unicode characters fixes JSON formatting issues. Understat uses \\xNN hex escapes need converted unicode.","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_understat_json.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Parse and clean Understat JSON string — parse_understat_json","text":"","code":"parse_understat_json(json_str)"},{"path":"https://peteowen1.github.io/panna/reference/parse_understat_json.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Parse and clean Understat JSON string — parse_understat_json","text":"json_str Raw JSON string Understat","code":""},{"path":"https://peteowen1.github.io/panna/reference/parse_understat_json.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Parse and clean Understat JSON string — parse_understat_json","text":"Cleaned JSON string","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Download data from GitHub Releases — pb_download_data","title":"Download data from GitHub Releases — pb_download_data","text":"Downloads pannadata.zip file GitHub Release extracts local pannadata directory.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download data from GitHub Releases — pb_download_data","text":"","code":"pb_download_data(   repo = \"peteowen1/pannadata\",   tag = \"latest\",   dest = NULL,   overwrite = TRUE,   show_progress = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/pb_download_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download data from GitHub Releases — pb_download_data","text":"repo GitHub repository \"owner/repo\" format (default: \"peteowen1/pannadata\") tag Release tag download (default: \"latest\") dest Destination directory (default: pannadata_dir()) overwrite Overwrite existing files (default: TRUE) show_progress Show download progress (default: TRUE)","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download data from GitHub Releases — pb_download_data","text":"Invisible path destination directory","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_data.html","id":"deprecation-notice","dir":"Reference","previous_headings":"","what":"Deprecation Notice","title":"Download data from GitHub Releases — pb_download_data","text":"loading data, prefer new DuckDB-based functions efficient: load_summary(), load_events(), load_shots(), etc. download needed filter via SQL function still useful downloading complete dataset local development.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download data from GitHub Releases — pb_download_data","text":"","code":"if (FALSE) { # \\dontrun{ # Download all data pb_download_data()  # Download to custom location pb_download_data(dest = \"my/data/path\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/pb_download_epv_models.html","id":null,"dir":"Reference","previous_headings":"","what":"Download EPV Models from GitHub Releases — pb_download_epv_models","title":"Download EPV Models from GitHub Releases — pb_download_epv_models","text":"Downloads pre-trained EPV models GitHub releases.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_epv_models.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download EPV Models from GitHub Releases — pb_download_epv_models","text":"","code":"pb_download_epv_models(   repo = \"peteowen1/pannadata\",   tag = \"epv-models\",   dest = NULL )"},{"path":"https://peteowen1.github.io/panna/reference/pb_download_epv_models.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download EPV Models from GitHub Releases — pb_download_epv_models","text":"repo GitHub repository (default: peteowen1/pannadata) tag Release tag (default: epv-models) dest Destination directory. NULL, uses pannadata/opta/models/","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_epv_models.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download EPV Models from GitHub Releases — pb_download_epv_models","text":"Invisibly returns path models","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_opta.html","id":null,"dir":"Reference","previous_headings":"","what":"Download Opta Data to Local Directory — pb_download_opta","title":"Download Opta Data to Local Directory — pb_download_opta","text":"Downloads consolidated Opta parquet files GitHub releases local pannadata/data/opta/ directory. Match events excluded (large single file) - use load_opta_match_events(source = \"remote\") load -demand per-league release files.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_opta.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download Opta Data to Local Directory — pb_download_opta","text":"","code":"pb_download_opta(   repo = \"peteowen1/pannadata\",   tag = \"opta-latest\",   dest = NULL )"},{"path":"https://peteowen1.github.io/panna/reference/pb_download_opta.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download Opta Data to Local Directory — pb_download_opta","text":"repo GitHub repository \"owner/repo\" format. tag Release tag (default: \"opta-latest\"). dest Destination directory. NULL, uses pannadata_dir()/opta.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_opta.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download Opta Data to Local Directory — pb_download_opta","text":"Invisibly returns path installed data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_opta.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download Opta Data to Local Directory — pb_download_opta","text":"","code":"if (FALSE) { # \\dontrun{ # Download latest Opta data to pannadata/data/opta/ pb_download_opta()  # Then load with: load_opta_stats(\"ENG\", season = \"2024-2025\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/pb_download_parquet.html","id":null,"dir":"Reference","previous_headings":"","what":"Download parquet files from GitHub Releases — pb_download_parquet","title":"Download parquet files from GitHub Releases — pb_download_parquet","text":"Downloads parquet zip file GitHub Release extracts .","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_parquet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download parquet files from GitHub Releases — pb_download_parquet","text":"","code":"pb_download_parquet(   repo = \"peteowen1/pannadata\",   tag = \"latest\",   dest = NULL,   verbose = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/pb_download_parquet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download parquet files from GitHub Releases — pb_download_parquet","text":"repo GitHub repository \"owner/repo\" format tag Release tag (default: \"latest\") dest Destination directory (default: pannadata_dir()) verbose Print progress messages","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_parquet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download parquet files from GitHub Releases — pb_download_parquet","text":"Invisible path destination directory","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_parquet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download parquet files from GitHub Releases — pb_download_parquet","text":"","code":"if (FALSE) { # \\dontrun{ pb_download_parquet() pb_download_parquet(dest = \"~/football-data\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/pb_download_predictions.html","id":null,"dir":"Reference","previous_headings":"","what":"Download match predictions from GitHub Releases — pb_download_predictions","title":"Download match predictions from GitHub Releases — pb_download_predictions","text":"Downloads predictions.parquet predictions-latest release peteowen1/pannadata.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_predictions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download match predictions from GitHub Releases — pb_download_predictions","text":"","code":"pb_download_predictions(   repo = \"peteowen1/pannadata\",   tag = \"predictions-latest\",   dest = NULL )"},{"path":"https://peteowen1.github.io/panna/reference/pb_download_predictions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download match predictions from GitHub Releases — pb_download_predictions","text":"repo GitHub repository \"owner/repo\" format. tag Release tag (default: \"predictions-latest\"). dest Destination directory. NULL, uses pannadata_dir()/predictions.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_predictions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download match predictions from GitHub Releases — pb_download_predictions","text":"Invisibly returns path downloaded file.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_predictions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download match predictions from GitHub Releases — pb_download_predictions","text":"","code":"if (FALSE) { # \\dontrun{ pb_download_predictions() } # }"},{"path":"https://peteowen1.github.io/panna/reference/pb_download_source.html","id":null,"dir":"Reference","previous_headings":"","what":"Download parquet files by source type — pb_download_source","title":"Download parquet files by source type — pb_download_source","text":"Downloads parquet files source-specific GitHub releases.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_source.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download parquet files by source type — pb_download_source","text":"","code":"pb_download_source(   source_type = c(\"fbref\", \"understat\", \"opta\", \"all\"),   repo = \"peteowen1/pannadata\",   dest = NULL,   verbose = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/pb_download_source.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download parquet files by source type — pb_download_source","text":"source_type Data source: \"fbref\", \"understat\", \"\" repo GitHub repository \"owner/repo\" format dest Destination directory (default: pannadata_dir()) verbose Print progress messages","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_source.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download parquet files by source type — pb_download_source","text":"Invisible path destination directory","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_download_source.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download parquet files by source type — pb_download_source","text":"","code":"if (FALSE) { # \\dontrun{ # Download FBref data only pb_download_source(\"fbref\")  # Download Understat data only pb_download_source(\"understat\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/pb_list_data.html","id":null,"dir":"Reference","previous_headings":"","what":"List files in GitHub Release — pb_list_data","title":"List files in GitHub Release — pb_list_data","text":"Shows files available GitHub Release.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_list_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List files in GitHub Release — pb_list_data","text":"","code":"pb_list_data(repo = \"peteowen1/pannadata\", tag = \"latest\")"},{"path":"https://peteowen1.github.io/panna/reference/pb_list_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List files in GitHub Release — pb_list_data","text":"repo GitHub repository \"owner/repo\" format tag Release tag (default: \"latest\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_list_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List files in GitHub Release — pb_list_data","text":"Data frame file information","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_list_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List files in GitHub Release — pb_list_data","text":"","code":"if (FALSE) { # \\dontrun{ pb_list_data() } # }"},{"path":"https://peteowen1.github.io/panna/reference/pb_list_sources.html","id":null,"dir":"Reference","previous_headings":"","what":"List releases by source type — pb_list_sources","title":"List releases by source type — pb_list_sources","text":"Shows available releases different data sources.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_list_sources.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List releases by source type — pb_list_sources","text":"","code":"pb_list_sources(repo = \"peteowen1/pannadata\")"},{"path":"https://peteowen1.github.io/panna/reference/pb_list_sources.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"List releases by source type — pb_list_sources","text":"repo GitHub repository \"owner/repo\" format","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_list_sources.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List releases by source type — pb_list_sources","text":"Data frame release information source","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_list_sources.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"List releases by source type — pb_list_sources","text":"","code":"if (FALSE) { # \\dontrun{ pb_list_sources() } # }"},{"path":"https://peteowen1.github.io/panna/reference/pb_status.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if local data is in sync with GitHub Releases — pb_status","title":"Check if local data is in sync with GitHub Releases — pb_status","text":"Compares local data count release.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_status.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if local data is in sync with GitHub Releases — pb_status","text":"","code":"pb_status(repo = \"peteowen1/pannadata\", tag = \"latest\", source = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/pb_status.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if local data is in sync with GitHub Releases — pb_status","text":"repo GitHub repository \"owner/repo\" format tag Release tag (default: \"latest\") source Source directory (default: pannadata_dir())","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_status.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if local data is in sync with GitHub Releases — pb_status","text":"List sync status information","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_status.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Check if local data is in sync with GitHub Releases — pb_status","text":"","code":"if (FALSE) { # \\dontrun{ status <- pb_status() status$remote$exists status$local$n_files } # }"},{"path":"https://peteowen1.github.io/panna/reference/pb_sync_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Sync local data with GitHub Releases — pb_sync_data","title":"Sync local data with GitHub Releases — pb_sync_data","text":"Convenience function uploads local data GitHub Releases. replaces existing data release.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_sync_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sync local data with GitHub Releases — pb_sync_data","text":"","code":"pb_sync_data(repo = \"peteowen1/pannadata\", tag = \"latest\", source = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/pb_sync_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sync local data with GitHub Releases — pb_sync_data","text":"repo GitHub repository \"owner/repo\" format tag Release tag (default: \"latest\") source Source directory (default: pannadata_dir())","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_sync_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sync local data with GitHub Releases — pb_sync_data","text":"Invisible NULL","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_sync_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Sync local data with GitHub Releases — pb_sync_data","text":"","code":"if (FALSE) { # \\dontrun{ pb_sync_data() } # }"},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_consolidated.html","id":null,"dir":"Reference","previous_headings":"","what":"Upload Consolidated Parquet Files to GitHub Releases — pb_upload_consolidated","title":"Upload Consolidated Parquet Files to GitHub Releases — pb_upload_consolidated","text":"Uploads individual consolidated parquet files GitHub release. enables fast remote queries via query_remote_parquet().","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_consolidated.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Upload Consolidated Parquet Files to GitHub Releases — pb_upload_consolidated","text":"","code":"pb_upload_consolidated(   source_dir = NULL,   repo = \"peteowen1/pannadata\",   tag = \"fbref-latest\",   verbose = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_consolidated.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Upload Consolidated Parquet Files to GitHub Releases — pb_upload_consolidated","text":"source_dir Directory containing consolidated parquet files. Defaults pannadata_dir()/consolidated. repo GitHub repository \"owner/repo\" format. tag Release tag upload . verbose Print progress messages.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_consolidated.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Upload Consolidated Parquet Files to GitHub Releases — pb_upload_consolidated","text":"Invisible data frame upload results.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_consolidated.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Upload Consolidated Parquet Files to GitHub Releases — pb_upload_consolidated","text":"","code":"if (FALSE) { # \\dontrun{ # Build and upload consolidated parquets build_consolidated_parquet() pb_upload_consolidated() } # }"},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Upload data to GitHub Releases — pb_upload_data","title":"Upload data to GitHub Releases — pb_upload_data","text":"Zips local data directory uploads GitHub Release. Creates release exist.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Upload data to GitHub Releases — pb_upload_data","text":"","code":"pb_upload_data(repo = \"peteowen1/pannadata\", tag = \"latest\", source = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Upload data to GitHub Releases — pb_upload_data","text":"repo GitHub repository \"owner/repo\" format (default: \"peteowen1/pannadata\") tag Release tag upload (default: \"latest\") source Source directory containing 'data' folder (default: pannadata_dir())","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Upload data to GitHub Releases — pb_upload_data","text":"Invisible path uploaded zip file","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Upload data to GitHub Releases — pb_upload_data","text":"","code":"if (FALSE) { # \\dontrun{ # Upload all data pb_upload_data() } # }"},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_parquet.html","id":null,"dir":"Reference","previous_headings":"","what":"Upload parquet files to GitHub Releases — pb_upload_parquet","title":"Upload parquet files to GitHub Releases — pb_upload_parquet","text":"Uploads parquet files (RDS) GitHub Release. preferred upload method efficient storage.","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_parquet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Upload parquet files to GitHub Releases — pb_upload_parquet","text":"","code":"pb_upload_parquet(   repo = \"peteowen1/pannadata\",   tag = \"latest\",   source = NULL,   verbose = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_parquet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Upload parquet files to GitHub Releases — pb_upload_parquet","text":"repo GitHub repository \"owner/repo\" format tag Release tag (default: \"latest\") source Source directory containing data folder (default: pannadata_dir()) verbose Print progress messages","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_parquet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Upload parquet files to GitHub Releases — pb_upload_parquet","text":"Invisible data frame uploaded file info","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_parquet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Upload parquet files to GitHub Releases — pb_upload_parquet","text":"","code":"if (FALSE) { # \\dontrun{ pb_upload_parquet() } # }"},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_source.html","id":null,"dir":"Reference","previous_headings":"","what":"Upload parquet files by source type — pb_upload_source","title":"Upload parquet files by source type — pb_upload_source","text":"Uploads parquet files source-specific GitHub releases. \"fbref\": FBref data fbref-latest tag \"understat\": Understat data understat-latest tag \"\": data latest tag (legacy behavior)","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_source.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Upload parquet files by source type — pb_upload_source","text":"","code":"pb_upload_source(   source_type = c(\"fbref\", \"understat\", \"opta\", \"all\"),   repo = \"peteowen1/pannadata\",   source = NULL,   verbose = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_source.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Upload parquet files by source type — pb_upload_source","text":"source_type Data source: \"fbref\", \"understat\", \"\" repo GitHub repository \"owner/repo\" format source Source directory containing data folder (default: pannadata_dir()) verbose Print progress messages","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_source.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Upload parquet files by source type — pb_upload_source","text":"Invisible data frame uploaded file info","code":""},{"path":"https://peteowen1.github.io/panna/reference/pb_upload_source.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Upload parquet files by source type — pb_upload_source","text":"","code":"if (FALSE) { # \\dontrun{ # Upload FBref data only pb_upload_source(\"fbref\")  # Upload Understat data only pb_upload_source(\"understat\")  # Upload all data (legacy) pb_upload_source(\"all\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/per_90.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculate minutes per 90 — per_90","title":"Calculate minutes per 90 — per_90","text":"Calculate minutes per 90","code":""},{"path":"https://peteowen1.github.io/panna/reference/per_90.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculate minutes per 90 — per_90","text":"","code":"per_90(stat, minutes)"},{"path":"https://peteowen1.github.io/panna/reference/per_90.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculate minutes per 90 — per_90","text":"stat Statistic value (counting stat) minutes Minutes played","code":""},{"path":"https://peteowen1.github.io/panna/reference/per_90.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculate minutes per 90 — per_90","text":"Statistic per 90 minutes","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_defense.html","id":null,"dir":"Reference","previous_headings":"","what":"FBref Player Defense Statistics — player_fbref_defense","title":"FBref Player Defense Statistics — player_fbref_defense","text":"Aggregate defensive statistics FBref data. Returns totals per-90 rates.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_defense.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"FBref Player Defense Statistics — player_fbref_defense","text":"","code":"player_fbref_defense(   player = NULL,   league = NULL,   season = NULL,   min_minutes = 450,   by_team = FALSE,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_defense.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"FBref Player Defense Statistics — player_fbref_defense","text":"player Character. Player name filter (case-insensitive partial match). NULL returns players. league Character. Filter league code (ENG, ESP, GER, ITA, FRA). season Character. Filter season (e.g., \"2024-2025\"). min_minutes Integer. Minimum minutes inclusion (default 450). by_team Logical. TRUE, aggregate player team separately. FALSE (default), aggregate across teams show common team. source Character. \"remote\" (default) \"local\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_defense.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"FBref Player Defense Statistics — player_fbref_defense","text":"Data frame columns: player, team, matches, minutes, tackles, tackles_won, interceptions, blocks, clearances, errors, tackles_per90, interceptions_per90, blocks_per90, tackle_win_pct","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_defense.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"FBref Player Defense Statistics — player_fbref_defense","text":"","code":"if (FALSE) { # \\dontrun{ player_fbref_defense(league = \"ENG\", season = \"2024-2025\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_keeper.html","id":null,"dir":"Reference","previous_headings":"","what":"FBref Player Keeper Statistics — player_fbref_keeper","title":"FBref Player Keeper Statistics — player_fbref_keeper","text":"Aggregate goalkeeper statistics FBref data. Returns totals rates.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_keeper.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"FBref Player Keeper Statistics — player_fbref_keeper","text":"","code":"player_fbref_keeper(   player = NULL,   league = NULL,   season = NULL,   min_minutes = 450,   by_team = FALSE,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_keeper.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"FBref Player Keeper Statistics — player_fbref_keeper","text":"player Character. Player name filter (case-insensitive partial match). NULL returns players. league Character. Filter league code (ENG, ESP, GER, ITA, FRA). season Character. Filter season (e.g., \"2024-2025\"). min_minutes Integer. Minimum minutes inclusion (default 450). by_team Logical. TRUE, aggregate player team separately. FALSE (default), aggregate across teams show common team. source Character. \"remote\" (default) \"local\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_keeper.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"FBref Player Keeper Statistics — player_fbref_keeper","text":"Data frame columns: player, team, matches, minutes, shots_on_target_against, saves, goals_against, clean_sheets, save_pct, goals_against_per90, clean_sheet_pct","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_keeper.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"FBref Player Keeper Statistics — player_fbref_keeper","text":"","code":"if (FALSE) { # \\dontrun{ player_fbref_keeper(league = \"ENG\", season = \"2024-2025\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_passing.html","id":null,"dir":"Reference","previous_headings":"","what":"FBref Player Passing Statistics — player_fbref_passing","title":"FBref Player Passing Statistics — player_fbref_passing","text":"Aggregate passing statistics FBref data. Returns totals per-90 rates.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_passing.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"FBref Player Passing Statistics — player_fbref_passing","text":"","code":"player_fbref_passing(   player = NULL,   league = NULL,   season = NULL,   min_minutes = 450,   by_team = FALSE,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_passing.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"FBref Player Passing Statistics — player_fbref_passing","text":"player Character. Player name filter (case-insensitive partial match). NULL returns players. league Character. Filter league code (ENG, ESP, GER, ITA, FRA). season Character. Filter season (e.g., \"2024-2025\"). min_minutes Integer. Minimum minutes inclusion (default 450). by_team Logical. TRUE, aggregate player team separately. FALSE (default), aggregate across teams show common team. source Character. \"remote\" (default) \"local\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_passing.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"FBref Player Passing Statistics — player_fbref_passing","text":"Data frame columns: player, team, matches, minutes, passes_completed, passes_attempted, pass_pct, progressive_passes, key_passes, passes_into_final_third, passes_into_penalty_area, crosses, passes_per90, progressive_passes_per90, key_passes_per90","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_passing.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"FBref Player Passing Statistics — player_fbref_passing","text":"","code":"if (FALSE) { # \\dontrun{ player_fbref_passing(league = \"ENG\", season = \"2024-2025\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"FBref Player Summary Statistics — player_fbref_summary","title":"FBref Player Summary Statistics — player_fbref_summary","text":"Aggregate offensive statistics FBref data. Returns totals per-90 rates. Includes xG metrics StatsBomb.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"FBref Player Summary Statistics — player_fbref_summary","text":"","code":"player_fbref_summary(   player = NULL,   league = NULL,   season = NULL,   min_minutes = 450,   by_team = FALSE,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"FBref Player Summary Statistics — player_fbref_summary","text":"player Character. Player name filter (case-insensitive partial match). NULL returns players. league Character. Filter league code (ENG, ESP, GER, ITA, FRA). season Character. Filter season (e.g., \"2024-2025\"). min_minutes Integer. Minimum minutes inclusion (default 450). by_team Logical. TRUE, aggregate player team separately. FALSE (default), aggregate across teams show common team. source Character. \"remote\" (default) \"local\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"FBref Player Summary Statistics — player_fbref_summary","text":"Data frame columns: player, team, matches, minutes, goals, assists, shots, shots_on_target, xg, npxg, xag, sca, gca, goals_minus_xg, goals_per90, xg_per90, npxg_per90, xag_per90","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_fbref_summary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"FBref Player Summary Statistics — player_fbref_summary","text":"","code":"if (FALSE) { # \\dontrun{ # Get all players with 450+ minutes player_fbref_summary(league = \"ENG\", season = \"2024-2025\")  # Get specific player player_fbref_summary(player = \"Salah\", league = \"ENG\")  # Group by team (useful for players who transferred) player_fbref_summary(league = \"ENG\", season = \"2024-2025\", by_team = TRUE) } # }"},{"path":"https://peteowen1.github.io/panna/reference/player_opta_defense.html","id":null,"dir":"Reference","previous_headings":"","what":"Opta Player Defense Statistics — player_opta_defense","title":"Opta Player Defense Statistics — player_opta_defense","text":"Aggregate defensive statistics Opta data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_defense.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Opta Player Defense Statistics — player_opta_defense","text":"","code":"player_opta_defense(   player = NULL,   league = NULL,   season = NULL,   min_minutes = 450,   by_team = FALSE,   source = c(\"local\", \"remote\") )"},{"path":"https://peteowen1.github.io/panna/reference/player_opta_defense.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Opta Player Defense Statistics — player_opta_defense","text":"player Character. Player name filter (case-insensitive partial match). league Character. League code (ENG, ESP, GER, ITA, FRA). season Character. Season (e.g., \"2024-2025\"). min_minutes Integer. Minimum minutes inclusion (default 450). by_team Logical. TRUE, aggregate player team separately. source Character. \"local\" (default) \"remote\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_defense.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Opta Player Defense Statistics — player_opta_defense","text":"Data frame player defensive statistics.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_keeper.html","id":null,"dir":"Reference","previous_headings":"","what":"Opta Player Keeper Statistics — player_opta_keeper","title":"Opta Player Keeper Statistics — player_opta_keeper","text":"Aggregate goalkeeper statistics Opta data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_keeper.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Opta Player Keeper Statistics — player_opta_keeper","text":"","code":"player_opta_keeper(   player = NULL,   league = NULL,   season = NULL,   min_minutes = 450,   by_team = FALSE,   source = c(\"local\", \"remote\") )"},{"path":"https://peteowen1.github.io/panna/reference/player_opta_keeper.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Opta Player Keeper Statistics — player_opta_keeper","text":"player Character. Player name filter (case-insensitive partial match). league Character. League code (ENG, ESP, GER, ITA, FRA). season Character. Season (e.g., \"2024-2025\"). min_minutes Integer. Minimum minutes inclusion (default 450). by_team Logical. TRUE, aggregate player team separately. source Character. \"local\" (default) \"remote\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_keeper.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Opta Player Keeper Statistics — player_opta_keeper","text":"Data frame columns: player, team, matches, minutes, saves, saves_ibox, saves_obox, goals_conceded, goals_conceded_ibox, shots_conceded_ibox, shots_conceded_obox, clean_sheets, diving_saves, high_claims, punches, big_chance_saves, shots_conceded, save_pct, goals_against_per90, shots_conceded_per90, clean_sheet_pct","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_passing.html","id":null,"dir":"Reference","previous_headings":"","what":"Opta Player Passing Statistics — player_opta_passing","title":"Opta Player Passing Statistics — player_opta_passing","text":"Aggregate passing statistics Opta data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_passing.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Opta Player Passing Statistics — player_opta_passing","text":"","code":"player_opta_passing(   player = NULL,   league = NULL,   season = NULL,   min_minutes = 450,   by_team = FALSE,   source = c(\"local\", \"remote\") )"},{"path":"https://peteowen1.github.io/panna/reference/player_opta_passing.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Opta Player Passing Statistics — player_opta_passing","text":"player Character. Player name filter (case-insensitive partial match). league Character. League code (ENG, ESP, GER, ITA, FRA). season Character. Season (e.g., \"2024-2025\"). min_minutes Integer. Minimum minutes inclusion (default 450). by_team Logical. TRUE, aggregate player team separately. source Character. \"local\" (default) \"remote\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_passing.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Opta Player Passing Statistics — player_opta_passing","text":"Data frame player passing statistics.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_possession.html","id":null,"dir":"Reference","previous_headings":"","what":"Opta Player Possession Statistics — player_opta_possession","title":"Opta Player Possession Statistics — player_opta_possession","text":"Aggregate possession carrying statistics Opta data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_possession.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Opta Player Possession Statistics — player_opta_possession","text":"","code":"player_opta_possession(   player = NULL,   league = NULL,   season = NULL,   min_minutes = 450,   by_team = FALSE,   source = c(\"local\", \"remote\") )"},{"path":"https://peteowen1.github.io/panna/reference/player_opta_possession.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Opta Player Possession Statistics — player_opta_possession","text":"player Character. Player name filter (case-insensitive partial match). league Character. League code (ENG, ESP, GER, ITA, FRA). season Character. Season (e.g., \"2024-2025\"). min_minutes Integer. Minimum minutes inclusion (default 450). by_team Logical. TRUE, aggregate player team separately. source Character. \"local\" (default) \"remote\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_possession.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Opta Player Possession Statistics — player_opta_possession","text":"Data frame player possession statistics.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_setpiece.html","id":null,"dir":"Reference","previous_headings":"","what":"Opta Player Set Piece Statistics — player_opta_setpiece","title":"Opta Player Set Piece Statistics — player_opta_setpiece","text":"Aggregate set piece statistics Opta data. Includes corners, free kicks, penalties, set piece involvement.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_setpiece.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Opta Player Set Piece Statistics — player_opta_setpiece","text":"","code":"player_opta_setpiece(   player = NULL,   league = NULL,   season = NULL,   min_minutes = 450,   by_team = FALSE,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/player_opta_setpiece.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Opta Player Set Piece Statistics — player_opta_setpiece","text":"player Character. Player name filter (case-insensitive partial match). league Character. League code (ENG, ESP, GER, ITA, FRA). season Character. Season string (e.g., \"2024-2025\"). min_minutes Integer. Minimum minutes inclusion. by_team Logical. TRUE, aggregate player team. source Character. \"remote\" (default) \"local\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_setpiece.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Opta Player Set Piece Statistics — player_opta_setpiece","text":"Data frame set piece statistics.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_shots.html","id":null,"dir":"Reference","previous_headings":"","what":"Opta Player Shooting Statistics — player_opta_shots","title":"Opta Player Shooting Statistics — player_opta_shots","text":"Aggregate shooting statistics Opta data. Includes shot volume, shot locations, finishing body part, big chances.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_shots.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Opta Player Shooting Statistics — player_opta_shots","text":"","code":"player_opta_shots(   player = NULL,   league = NULL,   season = NULL,   min_minutes = 450,   by_team = FALSE,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/player_opta_shots.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Opta Player Shooting Statistics — player_opta_shots","text":"player Character. Player name filter (case-insensitive partial match). league Character. League code (ENG, ESP, GER, ITA, FRA). season Character. Season string (e.g., \"2024-2025\"). min_minutes Integer. Minimum minutes inclusion. by_team Logical. TRUE, aggregate player team. source Character. \"remote\" (default) \"local\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_shots.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Opta Player Shooting Statistics — player_opta_shots","text":"Data frame shooting statistics.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Opta Player Summary Statistics — player_opta_summary","title":"Opta Player Summary Statistics — player_opta_summary","text":"Aggregate basic statistics Opta data. Returns totals per-90 rates. Note: Opta xG data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Opta Player Summary Statistics — player_opta_summary","text":"","code":"player_opta_summary(   player = NULL,   league = NULL,   season = NULL,   min_minutes = 450,   by_team = FALSE,   source = c(\"local\", \"remote\") )"},{"path":"https://peteowen1.github.io/panna/reference/player_opta_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Opta Player Summary Statistics — player_opta_summary","text":"player Character. Player name filter (case-insensitive partial match). league Character. League code (ENG, ESP, GER, ITA, FRA). season Character. Season (e.g., \"2024-2025\"). min_minutes Integer. Minimum minutes inclusion (default 450). by_team Logical. TRUE, aggregate player team separately. source Character. \"local\" (default) \"remote\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Opta Player Summary Statistics — player_opta_summary","text":"Data frame player summary statistics.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_summary.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Opta Player Summary Statistics — player_opta_summary","text":"","code":"if (FALSE) { # \\dontrun{ player_opta_summary(league = \"ENG\", season = \"2024-2025\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/player_opta_xg.html","id":null,"dir":"Reference","previous_headings":"","what":"Opta Player xG and xA Statistics — player_opta_xg","title":"Opta Player xG and xA Statistics — player_opta_xg","text":"Aggregate shooting assisting statistics xG/xA trained Opta xG model. Requires pre-computed xmetrics parquet files.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_xg.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Opta Player xG and xA Statistics — player_opta_xg","text":"","code":"player_opta_xg(   player = NULL,   league = NULL,   season = NULL,   min_minutes = 450,   by_team = FALSE,   source = c(\"local\", \"remote\") )"},{"path":"https://peteowen1.github.io/panna/reference/player_opta_xg.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Opta Player xG and xA Statistics — player_opta_xg","text":"player Character. Player name filter (case-insensitive partial match). league Character. League code (ENG, ESP, GER, ITA, FRA). season Character. Season (e.g., \"2024-2025\"). min_minutes Integer. Minimum minutes inclusion (default 450). by_team Logical. TRUE, aggregate player team separately. source Character. \"local\" (default) \"remote\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_xg.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Opta Player xG and xA Statistics — player_opta_xg","text":"Data frame xG/xA statistics per player.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_xg.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Opta Player xG and xA Statistics — player_opta_xg","text":"","code":"if (FALSE) { # \\dontrun{ # Top xG in EPL player_opta_xg(league = \"ENG\", season = \"2024-2025\")  # Specific player player_opta_xg(\"B. Saka\", league = \"ENG\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/player_opta_xpass.html","id":null,"dir":"Reference","previous_headings":"","what":"Opta Player xPass Statistics — player_opta_xpass","title":"Opta Player xPass Statistics — player_opta_xpass","text":"Aggregate passing statistics xPass (expected pass completion) trained model. Shows passing volume, accuracy, overperformance.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_xpass.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Opta Player xPass Statistics — player_opta_xpass","text":"","code":"player_opta_xpass(   player = NULL,   league = NULL,   season = NULL,   min_minutes = 450,   by_team = FALSE,   source = c(\"local\", \"remote\") )"},{"path":"https://peteowen1.github.io/panna/reference/player_opta_xpass.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Opta Player xPass Statistics — player_opta_xpass","text":"player Character. Player name filter (case-insensitive partial match). league Character. League code (ENG, ESP, GER, ITA, FRA). season Character. Season (e.g., \"2024-2025\"). min_minutes Integer. Minimum minutes inclusion (default 450). by_team Logical. TRUE, aggregate player team separately. source Character. \"local\" (default) \"remote\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_xpass.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Opta Player xPass Statistics — player_opta_xpass","text":"Data frame xPass statistics per player.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_opta_xpass.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Opta Player xPass Statistics — player_opta_xpass","text":"","code":"if (FALSE) { # \\dontrun{ # Top xPass overperformers player_opta_xpass(league = \"ENG\", season = \"2024-2025\")  # Specific player player_opta_xpass(\"B. Saka\", league = \"ENG\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/player_profile.html","id":null,"dir":"Reference","previous_headings":"","what":"Player Profile - Combined Statistics Across Sources — player_profile","title":"Player Profile - Combined Statistics Across Sources — player_profile","text":"Combines key statistics FBref, Opta, Understat single consolidated data frame one row per player-season-league. Merges useful columns source.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_profile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Player Profile - Combined Statistics Across Sources — player_profile","text":"","code":"player_profile(   player,   league = NULL,   season = NULL,   min_minutes = 450,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/player_profile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Player Profile - Combined Statistics Across Sources — player_profile","text":"player Character. Player name filter (case-insensitive partial match). Required. league Character. Filter league code (ENG, ESP, GER, ITA, FRA). NULL returns leagues. season Character. Filter FBref season format (e.g., \"2024-2025\"). NULL returns seasons. min_minutes Integer. Minimum minutes inclusion (default 450). source Character. \"remote\" (default) \"local\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_profile.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Player Profile - Combined Statistics Across Sources — player_profile","text":"Data frame one row per player-season-league containing: Identity: player, team, league, season, minutes FBref: goals, assists, xg, npxg, xag, sca, gca, passes_completed, pass_pct, progressive_passes, key_passes Opta: progressive_carries, final_third_entries, pen_area_entries, big_chances_created (available) Understat: xg_chain, xg_buildup (available)","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_profile.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Player Profile - Combined Statistics Across Sources — player_profile","text":"","code":"if (FALSE) { # \\dontrun{ # Full profile for a player player_profile(\"Saka\", league = \"ENG\")  # Specific season player_profile(\"Salah\", league = \"ENG\", season = \"2024-2025\")  # All Big 5 leagues player_profile(\"Mbappe\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/player_skill_profile.html","id":null,"dir":"Reference","previous_headings":"","what":"Generate a player's estimated skill profile — player_skill_profile","title":"Generate a player's estimated skill profile — player_skill_profile","text":"Returns clean summary player's current estimated skills: per-stat skill estimates, league averages, percentile ranks, confidence levels. Groups stats category easy interpretation.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_skill_profile.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generate a player's estimated skill profile — player_skill_profile","text":"","code":"player_skill_profile(   player_name,   match_stats = NULL,   decay_params = NULL,   date = Sys.Date(),   min_weighted_90s = 5,   skills = NULL,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/player_skill_profile.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generate a player's estimated skill profile — player_skill_profile","text":"player_name Character string player name profile. Supports exact names (\"H. Kane\"), abbreviations (\"H.Kane\"), surnames (\"Kane\"), accent-insensitive input (\"Mbappe\"). match_stats data.table compute_match_level_opta_stats(). provided, runs full skill estimation raw data. omitted (skills also NULL), downloads pre-computed skills instead. decay_params Decay parameters list. used match_stats provided. date Date estimate skills (default today). used match_stats provided. min_weighted_90s Regression threshold. used match_stats provided. skills Pre-computed skills data.table estimate_player_skills() load_opta_skills(). provided, skips estimation uses directly. source Data source auto-loading: \"remote\" (default) \"local\". used match_stats skills NULL.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_skill_profile.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generate a player's estimated skill profile — player_skill_profile","text":"data.table columns: category, stat, type, skill, raw_avg, league_avg, league_pct, pos_avg, pos_pct, n90, w90, attempts, w_attempts.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_skill_profile.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Generate a player's estimated skill profile — player_skill_profile","text":"called without match_stats skills, automatically loads pre-computed skill estimates via load_opta_skills() (~2-3 MB download). covers 15 Opta leagues across available seasons.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_understat_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Understat Player Summary Statistics — player_understat_summary","title":"Understat Player Summary Statistics — player_understat_summary","text":"Aggregate statistics Understat data. Includes Understat's xG model.","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_understat_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Understat Player Summary Statistics — player_understat_summary","text":"","code":"player_understat_summary(   player = NULL,   league = NULL,   season = NULL,   min_minutes = 450,   by_team = FALSE,   source = c(\"remote\", \"local\") )"},{"path":"https://peteowen1.github.io/panna/reference/player_understat_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Understat Player Summary Statistics — player_understat_summary","text":"player Character. Player name filter. league Character. League code (ENG, ESP, GER, ITA, FRA, RUS). season Character. Season Understat format (e.g., \"2024\"). min_minutes Integer. Minimum minutes inclusion. by_team Logical. TRUE, aggregate player team. source Character. \"remote\" (default) \"local\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/player_understat_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Understat Player Summary Statistics — player_understat_summary","text":"Data frame player statistics including xG, xA, xGChain, xGBuildup.","code":""},{"path":"https://peteowen1.github.io/panna/reference/predict_epv_probs.html","id":null,"dir":"Reference","previous_headings":"","what":"Predict EPV Values — predict_epv_probs","title":"Predict EPV Values — predict_epv_probs","text":"Gets predictions EPV model. \"goal\" method returns multinomial probabilities, \"xg\" method returns expected next xG value.","code":""},{"path":"https://peteowen1.github.io/panna/reference/predict_epv_probs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predict EPV Values — predict_epv_probs","text":"","code":"predict_epv_probs(model, features)"},{"path":"https://peteowen1.github.io/panna/reference/predict_epv_probs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predict EPV Values — predict_epv_probs","text":"model EPV model fit_epv_model() features EPV features","code":""},{"path":"https://peteowen1.github.io/panna/reference/predict_epv_probs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Predict EPV Values — predict_epv_probs","text":"\"goal\": data frame p_team_scores, p_opponent_scores, p_nobody_scores \"xg\": data frame expected_xg","code":""},{"path":"https://peteowen1.github.io/panna/reference/predict_match.html","id":null,"dir":"Reference","previous_headings":"","what":"Predict Match Outcome Probabilities — predict_match","title":"Predict Match Outcome Probabilities — predict_match","text":"Given fitted goals outcome models, predicts P(H), P(D), P() expected goals set matches.","code":""},{"path":"https://peteowen1.github.io/panna/reference/predict_match.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predict Match Outcome Probabilities — predict_match","text":"","code":"predict_match(   goals_home_model,   goals_away_model,   outcome_model,   X_goals,   X_outcome )"},{"path":"https://peteowen1.github.io/panna/reference/predict_match.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predict Match Outcome Probabilities — predict_match","text":"goals_home_model Fitted XGBoost Poisson model home goals goals_away_model Fitted XGBoost Poisson model away goals outcome_model Fitted XGBoost multinomial model X_goals Feature matrix goals models X_outcome Feature matrix outcome model (without goal predictions)","code":""},{"path":"https://peteowen1.github.io/panna/reference/predict_match.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Predict Match Outcome Probabilities — predict_match","text":"Data frame pred_home_goals, pred_away_goals, prob_H, prob_D, prob_A","code":""},{"path":"https://peteowen1.github.io/panna/reference/predict_xg.html","id":null,"dir":"Reference","previous_headings":"","what":"Predict xG for Shots — predict_xg","title":"Predict xG for Shots — predict_xg","text":"Applies trained xG model predict goal probability shots.","code":""},{"path":"https://peteowen1.github.io/panna/reference/predict_xg.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predict xG for Shots — predict_xg","text":"","code":"predict_xg(xg_model, shot_features)"},{"path":"https://peteowen1.github.io/panna/reference/predict_xg.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predict xG for Shots — predict_xg","text":"xg_model Fitted xG model fit_xg_model() shot_features Data frame shot features (format training)","code":""},{"path":"https://peteowen1.github.io/panna/reference/predict_xg.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Predict xG for Shots — predict_xg","text":"Vector xG predictions (probabilities)","code":""},{"path":"https://peteowen1.github.io/panna/reference/predict_xg.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Predict xG for Shots — predict_xg","text":"","code":"if (FALSE) { # \\dontrun{ xg_model <- fit_xg_model(training_shots) new_shots <- prepare_shots_for_xg(new_shot_events) xg_pred <- predict_xg(xg_model, new_shots) } # }"},{"path":"https://peteowen1.github.io/panna/reference/predict_xpass.html","id":null,"dir":"Reference","previous_headings":"","what":"Predict Pass Completion Probability — predict_xpass","title":"Predict Pass Completion Probability — predict_xpass","text":"Applies trained xPass model predict completion probability passes.","code":""},{"path":"https://peteowen1.github.io/panna/reference/predict_xpass.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Predict Pass Completion Probability — predict_xpass","text":"","code":"predict_xpass(xpass_model, pass_features)"},{"path":"https://peteowen1.github.io/panna/reference/predict_xpass.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Predict Pass Completion Probability — predict_xpass","text":"xpass_model Fitted xPass model fit_xpass_model() pass_features Data frame pass features","code":""},{"path":"https://peteowen1.github.io/panna/reference/predict_xpass.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Predict Pass Completion Probability — predict_xpass","text":"Vector xPass predictions (probabilities)","code":""},{"path":"https://peteowen1.github.io/panna/reference/predict_xpass.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Predict Pass Completion Probability — predict_xpass","text":"","code":"if (FALSE) { # \\dontrun{ xpass_model <- load_xpass_model() pass_features <- prepare_passes_for_xpass(spadl_actions) xpass_pred <- predict_xpass(xpass_model, pass_features) } # }"},{"path":"https://peteowen1.github.io/panna/reference/prepare_od_scatter_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Create O/D scatter plot data — prepare_od_scatter_data","title":"Create O/D scatter plot data — prepare_od_scatter_data","text":"Prepares data visualizing offensive vs defensive ratings.","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_od_scatter_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create O/D scatter plot data — prepare_od_scatter_data","text":"","code":"prepare_od_scatter_data(ratings)"},{"path":"https://peteowen1.github.io/panna/reference/prepare_od_scatter_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create O/D scatter plot data — prepare_od_scatter_data","text":"ratings O/D ratings data frame","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_od_scatter_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create O/D scatter plot data — prepare_od_scatter_data","text":"Data frame ready ggplot2","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_opta_events_for_splints.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare Opta Events for Splint Creation — prepare_opta_events_for_splints","title":"Prepare Opta Events for Splint Creation — prepare_opta_events_for_splints","text":"Converts Opta event data format expected splint creation functions. Opta events : event_type (goal, substitution, red_card, yellow_card), minute, second, team_id, player_id, etc.","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_opta_events_for_splints.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare Opta Events for Splint Creation — prepare_opta_events_for_splints","text":"","code":"prepare_opta_events_for_splints(opta_events, match_results = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/prepare_opta_events_for_splints.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare Opta Events for Splint Creation — prepare_opta_events_for_splints","text":"opta_events Data frame load_opta_events() match_results Data frame home_team, away_team, team_id mapping","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_opta_events_for_splints.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare Opta Events for Splint Creation — prepare_opta_events_for_splints","text":"Data frame columns: match_id, minute, added_time, event_type, is_goal, is_sub, is_red_card, is_home, player_id, player_name","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_opta_lineups_for_splints.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare Opta Lineups for Splint Creation — prepare_opta_lineups_for_splints","title":"Prepare Opta Lineups for Splint Creation — prepare_opta_lineups_for_splints","text":"Converts Opta lineup data format expected splint creation functions. Opta lineups : is_starter, minutes_played, sub_on_minute, sub_off_minute.","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_opta_lineups_for_splints.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare Opta Lineups for Splint Creation — prepare_opta_lineups_for_splints","text":"","code":"prepare_opta_lineups_for_splints(opta_lineups)"},{"path":"https://peteowen1.github.io/panna/reference/prepare_opta_lineups_for_splints.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare Opta Lineups for Splint Creation — prepare_opta_lineups_for_splints","text":"opta_lineups Data frame load_opta_lineups()","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_opta_lineups_for_splints.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare Opta Lineups for Splint Creation — prepare_opta_lineups_for_splints","text":"Data frame columns: match_id, player_id, player_name, team, is_home, is_starter, minutes, on_minute, off_minute","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_opta_shots_for_splints.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare Opta Shot Events for Splint xG Calculation — prepare_opta_shots_for_splints","title":"Prepare Opta Shot Events for Splint xG Calculation — prepare_opta_shots_for_splints","text":"Converts Opta shot event data format expected splint xG calculation. Note: Opta API provide xG values directly - must calculated x/y coordinates using xG model, goals can used proxy.","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_opta_shots_for_splints.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare Opta Shot Events for Splint xG Calculation — prepare_opta_shots_for_splints","text":"","code":"prepare_opta_shots_for_splints(   opta_shot_events,   use_goals_as_xg = FALSE,   match_results = NULL )"},{"path":"https://peteowen1.github.io/panna/reference/prepare_opta_shots_for_splints.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare Opta Shot Events for Splint xG Calculation — prepare_opta_shots_for_splints","text":"opta_shot_events Data frame load_opta_shot_events() use_goals_as_xg Logical. TRUE, use is_goal xG (1 goal, 0 otherwise). fallback xG model available. Default FALSE. match_results Optional data frame home_team, team_id mapping","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_opta_shots_for_splints.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare Opta Shot Events for Splint xG Calculation — prepare_opta_shots_for_splints","text":"Data frame columns: match_id, minute, team, player_id, player_name, xg, is_goal, is_penalty","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_passes_for_xpass.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare Pass Data for xPass Model — prepare_passes_for_xpass","title":"Prepare Pass Data for xPass Model — prepare_passes_for_xpass","text":"Creates features pass completion probability modeling SPADL actions. Optimized data.table fast processing.","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_passes_for_xpass.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare Pass Data for xPass Model — prepare_passes_for_xpass","text":"","code":"prepare_passes_for_xpass(spadl_actions)"},{"path":"https://peteowen1.github.io/panna/reference/prepare_passes_for_xpass.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare Pass Data for xPass Model — prepare_passes_for_xpass","text":"spadl_actions SPADL actions data frame pass events","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_passes_for_xpass.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare Pass Data for xPass Model — prepare_passes_for_xpass","text":"Data frame pass features: start_x, start_y: Pass origin coordinates end_x, end_y: Pass destination coordinates pass_distance: Euclidean distance pass_angle: Angle pass relative goal direction is_forward: Pass moves toward opponent goal is_progressive: Significant forward movement start_zone, end_zone: Pitch zones crosses_midfield: Pass crosses halfway line into_penalty_area: Pass ends penalty area into_final_third: Pass ends final third pass_type_*: Pass type indicators completed: Target variable (1 = successful pass)","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_passes_for_xpass.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prepare Pass Data for xPass Model — prepare_passes_for_xpass","text":"","code":"if (FALSE) { # \\dontrun{ spadl <- convert_opta_to_spadl(events) pass_features <- prepare_passes_for_xpass(spadl) } # }"},{"path":"https://peteowen1.github.io/panna/reference/prepare_passes_for_xpass_minimal.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare Minimal Pass Features — prepare_passes_for_xpass_minimal","title":"Prepare Minimal Pass Features — prepare_passes_for_xpass_minimal","text":"Creates minimal features xPass prediction SPADL data. Used internally features already prepared. Optimized data.table fast processing.","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_passes_for_xpass_minimal.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare Minimal Pass Features — prepare_passes_for_xpass_minimal","text":"","code":"prepare_passes_for_xpass_minimal(passes)"},{"path":"https://peteowen1.github.io/panna/reference/prepare_passes_for_xpass_minimal.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare Minimal Pass Features — prepare_passes_for_xpass_minimal","text":"passes SPADL pass actions","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_passes_for_xpass_minimal.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare Minimal Pass Features — prepare_passes_for_xpass_minimal","text":"Data frame pass features","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_rapm_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare RAPM data for model fitting — prepare_rapm_data","title":"Prepare RAPM data for model fitting — prepare_rapm_data","text":"Creates design matrix covariates ridge regression. primary RAPM data preparation function.","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_rapm_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare RAPM data for model fitting — prepare_rapm_data","text":"","code":"prepare_rapm_data(   splint_data,   min_minutes = 90,   target_type = c(\"xg\", \"goals\"),   include_covariates = TRUE,   include_league = NULL,   include_season = NULL )"},{"path":"https://peteowen1.github.io/panna/reference/prepare_rapm_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare RAPM data for model fitting — prepare_rapm_data","text":"splint_data Combined splint data create_all_splints min_minutes Minimum minutes player inclusion target_type Type target variable: \"xg\" non-penalty xG (default), \"goals\" actual goals scored. Use \"goals\" shots data unavailable. include_covariates Whether include game state covariates include_league Whether include league dummies (multi-league) include_season Whether include season dummies","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_rapm_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare RAPM data for model fitting — prepare_rapm_data","text":"List model inputs","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_shots_for_xg.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare Shot Data for xG Model — prepare_shots_for_xg","title":"Prepare Shot Data for xG Model — prepare_shots_for_xg","text":"Prepares Opta shot event data features needed xG modeling.","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_shots_for_xg.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare Shot Data for xG Model — prepare_shots_for_xg","text":"","code":"prepare_shots_for_xg(shot_events)"},{"path":"https://peteowen1.github.io/panna/reference/prepare_shots_for_xg.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare Shot Data for xG Model — prepare_shots_for_xg","text":"shot_events Data frame load_opta_shot_events()","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_shots_for_xg.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare Shot Data for xG Model — prepare_shots_for_xg","text":"Data frame xG features: x, y: Shot coordinates (normalized) distance_to_goal: Distance shot goal center angle_to_goal: Visible angle goal is_header: Binary indicator headed shots is_big_chance: Binary indicator big chances is_penalty: Binary indicator penalties is_direct_freekick: Binary direct free kicks shot_type_*: One-hot encoded shot types is_goal: Target variable (1 = goal)","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_shots_for_xg.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Prepare Shot Data for xG Model — prepare_shots_for_xg","text":"","code":"if (FALSE) { # \\dontrun{ shots <- load_opta_shot_events(\"ENG\", \"2024-2025\") shot_features <- prepare_shots_for_xg(shots) } # }"},{"path":"https://peteowen1.github.io/panna/reference/prepare_spm_regression_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Prepare SPM regression data — prepare_spm_regression_data","title":"Prepare SPM regression data — prepare_spm_regression_data","text":"Joins player features RAPM ratings SPM model fitting.","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_spm_regression_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prepare SPM regression data — prepare_spm_regression_data","text":"","code":"prepare_spm_regression_data(player_features, rapm_ratings)"},{"path":"https://peteowen1.github.io/panna/reference/prepare_spm_regression_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prepare SPM regression data — prepare_spm_regression_data","text":"player_features Data frame create_player_feature_matrix rapm_ratings Data frame extract_rapm_coefficients","code":""},{"path":"https://peteowen1.github.io/panna/reference/prepare_spm_regression_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prepare SPM regression data — prepare_spm_regression_data","text":"Data frame ready SPM regression","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_advanced_stats.html","id":null,"dir":"Reference","previous_headings":"","what":"Process advanced match stats — process_advanced_stats","title":"Process advanced match stats — process_advanced_stats","text":"Cleans advanced player stats data. Uses data.table speed large datasets.","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_advanced_stats.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Process advanced match stats — process_advanced_stats","text":"","code":"process_advanced_stats(stats, results, stat_type = \"summary\")"},{"path":"https://peteowen1.github.io/panna/reference/process_advanced_stats.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Process advanced match stats — process_advanced_stats","text":"stats Data frame advanced match stats results Processed match results match IDs stat_type type stats processed","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_advanced_stats.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Process advanced match stats — process_advanced_stats","text":"Cleaned data frame advanced stats","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_all_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Process all raw data — process_all_data","title":"Process all raw data — process_all_data","text":"Master function process collected data. Supports per-component caching avoid reprocessing crashes.","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_all_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Process all raw data — process_all_data","text":"","code":"process_all_data(   raw_data,   show_progress = TRUE,   cache_dir = NULL,   raw_data_mtime = NULL )"},{"path":"https://peteowen1.github.io/panna/reference/process_all_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Process all raw data — process_all_data","text":"raw_data List raw data pannadata show_progress Logical, whether show progress bar (default TRUE) cache_dir Optional directory per-component caching. provided, component cached separately reprocessed raw data changed. raw_data_mtime Optional modification time raw data file cache invalidation. provided cache_dir set, components reprocessed.","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_all_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Process all raw data — process_all_data","text":"List processed data frames","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_match_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Process match events — process_match_events","title":"Process match events — process_match_events","text":"Cleans event data (goals, substitutions) timing.","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_match_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Process match events — process_match_events","text":"","code":"process_match_events(events, results)"},{"path":"https://peteowen1.github.io/panna/reference/process_match_events.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Process match events — process_match_events","text":"events Data frame match events results Processed match results match IDs","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_match_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Process match events — process_match_events","text":"Cleaned data frame match events","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_match_lineups.html","id":null,"dir":"Reference","previous_headings":"","what":"Process match lineups — process_match_lineups","title":"Process match lineups — process_match_lineups","text":"Cleans lineup data extracts player information. Uses data.table speed large datasets.","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_match_lineups.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Process match lineups — process_match_lineups","text":"","code":"process_match_lineups(lineups, results)"},{"path":"https://peteowen1.github.io/panna/reference/process_match_lineups.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Process match lineups — process_match_lineups","text":"lineups Data frame match lineups results Processed match results match IDs","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_match_lineups.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Process match lineups — process_match_lineups","text":"Cleaned data frame player lineup info","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_match_results.html","id":null,"dir":"Reference","previous_headings":"","what":"Process and clean match results — process_match_results","title":"Process and clean match results — process_match_results","text":"Cleans match results data adds derived columns.","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_match_results.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Process and clean match results — process_match_results","text":"","code":"process_match_results(results)"},{"path":"https://peteowen1.github.io/panna/reference/process_match_results.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Process and clean match results — process_match_results","text":"results Data frame match results","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_match_results.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Process and clean match results — process_match_results","text":"Cleaned data frame standardized columns","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_shooting_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Process shooting data — process_shooting_data","title":"Process shooting data — process_shooting_data","text":"Cleans shot-level data xG values.","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_shooting_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Process shooting data — process_shooting_data","text":"","code":"process_shooting_data(shooting, results)"},{"path":"https://peteowen1.github.io/panna/reference/process_shooting_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Process shooting data — process_shooting_data","text":"shooting Data frame shot data results Processed match results match IDs","code":""},{"path":"https://peteowen1.github.io/panna/reference/process_shooting_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Process shooting data — process_shooting_data","text":"Cleaned data frame shot data","code":""},{"path":"https://peteowen1.github.io/panna/reference/progress_msg.html","id":null,"dir":"Reference","previous_headings":"","what":"Print progress message — progress_msg","title":"Print progress message — progress_msg","text":"Print progress message","code":""},{"path":"https://peteowen1.github.io/panna/reference/progress_msg.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print progress message — progress_msg","text":"","code":"progress_msg(message, verbose = TRUE)"},{"path":"https://peteowen1.github.io/panna/reference/progress_msg.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print progress message — progress_msg","text":"message Message print verbose Whether print","code":""},{"path":"https://peteowen1.github.io/panna/reference/progress_msg.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print progress message — progress_msg","text":"NULL (invisibly)","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_local_parquet.html","id":null,"dir":"Reference","previous_headings":"","what":"Query Local Parquet with SQL — query_local_parquet","title":"Query Local Parquet with SQL — query_local_parquet","text":"Queries local parquet files using DuckDB SQL. enables efficient filtering without loading entire datasets R memory.","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_local_parquet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Query Local Parquet with SQL — query_local_parquet","text":"","code":"query_local_parquet(table_type, sql_template, league = NULL, season = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/query_local_parquet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Query Local Parquet with SQL — query_local_parquet","text":"table_type Table type (e.g., \"summary\", \"events\", \"shots\") sql_template SQL query template {table} placeholder. placeholder replaced appropriate file pattern. league Optional league filter narrow parquet files searched. season Optional season filter narrow parquet files searched.","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_local_parquet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Query Local Parquet with SQL — query_local_parquet","text":"Data frame query results.","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_local_parquet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Query Local Parquet with SQL — query_local_parquet","text":"","code":"if (FALSE) { # \\dontrun{ # Query summary data for England sql <- \"SELECT * FROM {table} WHERE league = 'ENG'\" eng_data <- query_local_parquet(\"summary\", sql, league = \"ENG\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/query_local_understat_parquet.html","id":null,"dir":"Reference","previous_headings":"","what":"Query Local Understat Parquet — query_local_understat_parquet","title":"Query Local Understat Parquet — query_local_understat_parquet","text":"Queries local Understat parquet files using DuckDB SQL.","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_local_understat_parquet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Query Local Understat Parquet — query_local_understat_parquet","text":"","code":"query_local_understat_parquet(   table_type,   sql_template,   league = NULL,   season = NULL )"},{"path":"https://peteowen1.github.io/panna/reference/query_local_understat_parquet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Query Local Understat Parquet — query_local_understat_parquet","text":"table_type Table type (metadata, roster, shots, events) sql_template SQL query template {table} placeholder league Optional league filter season Optional season filter","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_local_understat_parquet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Query Local Understat Parquet — query_local_understat_parquet","text":"Data frame query results","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_remote_opta_match_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Download and query remote Opta match events (per-league files) — query_remote_opta_match_events","title":"Download and query remote Opta match events (per-league files) — query_remote_opta_match_events","text":"Match events large single consolidated file, stored per-league files (events_{league}.parquet) release. function downloads per-league file queries DuckDB.","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_remote_opta_match_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download and query remote Opta match events (per-league files) — query_remote_opta_match_events","text":"","code":"query_remote_opta_match_events(   opta_league,   season = NULL,   columns = NULL,   repo = \"peteowen1/pannadata\",   tag = \"opta-latest\" )"},{"path":"https://peteowen1.github.io/panna/reference/query_remote_opta_match_events.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download and query remote Opta match events (per-league files) — query_remote_opta_match_events","text":"opta_league League code Opta format (EPL, La_Liga, etc.) season Optional season filter (e.g., \"2021-2022\") columns Optional columns select repo GitHub repository tag Release tag","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_remote_opta_match_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download and query remote Opta match events (per-league files) — query_remote_opta_match_events","text":"Data frame query results","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_remote_opta_parquet.html","id":null,"dir":"Reference","previous_headings":"","what":"Query remote Opta parquet data — query_remote_opta_parquet","title":"Query remote Opta parquet data — query_remote_opta_parquet","text":"Downloads individual consolidated Opta files GitHub releases queries using DuckDB. table type single consolidated file (e.g., opta_player_stats.parquet) cached session.","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_remote_opta_parquet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Query remote Opta parquet data — query_remote_opta_parquet","text":"","code":"query_remote_opta_parquet(   table_type,   opta_league,   season = NULL,   columns = NULL,   repo = \"peteowen1/pannadata\",   tag = \"opta-latest\" )"},{"path":"https://peteowen1.github.io/panna/reference/query_remote_opta_parquet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Query remote Opta parquet data — query_remote_opta_parquet","text":"table_type Table type (player_stats, shots, shot_events, events, lineups, fixtures) opta_league League code Opta format (EPL, La_Liga, etc.) season Optional season filter (e.g., \"2021-2022\") columns Optional columns select repo GitHub repository (default: \"peteowen1/pannadata\") tag Release tag (default: \"opta-latest\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_remote_opta_parquet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Query remote Opta parquet data — query_remote_opta_parquet","text":"Data frame query results","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_remote_parquet.html","id":null,"dir":"Reference","previous_headings":"","what":"Query Remote Parquet with SQL (Primary Method) — query_remote_parquet","title":"Query Remote Parquet with SQL (Primary Method) — query_remote_parquet","text":"Downloads parquet file GitHub releases temp file, runs SQL query using DuckDB. much faster downloading entire ZIP files : Download done optimized HTTP DuckDB queries local file (network latency per query) filtered/aggregated results come R memory","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_remote_parquet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Query Remote Parquet with SQL (Primary Method) — query_remote_parquet","text":"","code":"query_remote_parquet(   table_name,   sql_template,   release = NULL,   tag = \"fbref-latest\" )"},{"path":"https://peteowen1.github.io/panna/reference/query_remote_parquet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Query Remote Parquet with SQL (Primary Method) — query_remote_parquet","text":"table_name Character. Name parquet file (without .parquet). sql_template Character. SQL query template {table} placeholder. release Optional. Release info get_latest_release(). tag Character. GitHub release tag download . Defaults \"fbref-latest\".","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_remote_parquet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Query Remote Parquet with SQL (Primary Method) — query_remote_parquet","text":"Data frame query results.","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_remote_parquet.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Query Remote Parquet with SQL (Primary Method) — query_remote_parquet","text":"","code":"if (FALSE) { # \\dontrun{ # Load all summary data sql <- \"SELECT * FROM {table}\" result <- query_remote_parquet(\"summary\", sql)  # Load filtered data (filtering happens in SQL, not R!) sql <- \"SELECT * FROM {table} WHERE league = 'ENG' AND season = '2023-2024'\" eng_2023 <- query_remote_parquet(\"summary\", sql) } # }"},{"path":"https://peteowen1.github.io/panna/reference/query_remote_understat_parquet.html","id":null,"dir":"Reference","previous_headings":"","what":"Query Remote Understat Parquet — query_remote_understat_parquet","title":"Query Remote Understat Parquet — query_remote_understat_parquet","text":"Downloads Understat parquet file GitHub releases queries .","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_remote_understat_parquet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Query Remote Understat Parquet — query_remote_understat_parquet","text":"","code":"query_remote_understat_parquet(table_name, sql_template)"},{"path":"https://peteowen1.github.io/panna/reference/query_remote_understat_parquet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Query Remote Understat Parquet — query_remote_understat_parquet","text":"table_name Full table name including understat_ prefix sql_template SQL query template {table} placeholder","code":""},{"path":"https://peteowen1.github.io/panna/reference/query_remote_understat_parquet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Query Remote Understat Parquet — query_remote_understat_parquet","text":"Data frame query results","code":""},{"path":"https://peteowen1.github.io/panna/reference/rank_players_panna.html","id":null,"dir":"Reference","previous_headings":"","what":"Rank players by panna rating — rank_players_panna","title":"Rank players by panna rating — rank_players_panna","text":"Returns ranked list players.","code":""},{"path":"https://peteowen1.github.io/panna/reference/rank_players_panna.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Rank players by panna rating — rank_players_panna","text":"","code":"rank_players_panna(ratings, top_n = NULL, position = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/rank_players_panna.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Rank players by panna rating — rank_players_panna","text":"ratings Data frame panna ratings top_n Number top players show position Optional position filter","code":""},{"path":"https://peteowen1.github.io/panna/reference/rank_players_panna.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Rank players by panna rating — rank_players_panna","text":"Data frame ranked players","code":""},{"path":"https://peteowen1.github.io/panna/reference/rank_players_panna.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Rank players by panna rating — rank_players_panna","text":"","code":"if (FALSE) { # \\dontrun{ ratings <- get_panna_ratings(panna_model) top_20 <- rank_players_panna(ratings, top_n = 20) forwards <- rank_players_panna(ratings, top_n = 10, position = \"FW\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/rename_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Rename columns using a mapping — rename_columns","title":"Rename columns using a mapping — rename_columns","text":"Renames columns data frame based named vector mapping. mapping format : c(new_name1 = \"old_name1\", new_name2 = \"old_name2\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/rename_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Rename columns using a mapping — rename_columns","text":"","code":"rename_columns(data, mapping)"},{"path":"https://peteowen1.github.io/panna/reference/rename_columns.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Rename columns using a mapping — rename_columns","text":"data Data frame mapping Named character vector names new column names values existing column names rename","code":""},{"path":"https://peteowen1.github.io/panna/reference/rename_columns.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Rename columns using a mapping — rename_columns","text":"Data frame renamed columns","code":""},{"path":"https://peteowen1.github.io/panna/reference/rename_columns.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Rename columns using a mapping — rename_columns","text":"","code":"if (FALSE) { # \\dontrun{ df <- data.frame(a = 1, b = 2) rename_columns(df, c(x = \"a\", y = \"b\")) } # }"},{"path":"https://peteowen1.github.io/panna/reference/report_season_ranges.html","id":null,"dir":"Reference","previous_headings":"","what":"Report season ranges for all data types — report_season_ranges","title":"Report season ranges for all data types — report_season_ranges","text":"Prints summary table showing min/max seasons data component.","code":""},{"path":"https://peteowen1.github.io/panna/reference/report_season_ranges.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Report season ranges for all data types — report_season_ranges","text":"","code":"report_season_ranges(data)"},{"path":"https://peteowen1.github.io/panna/reference/report_season_ranges.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Report season ranges for all data types — report_season_ranges","text":"data List data frames pannadata","code":""},{"path":"https://peteowen1.github.io/panna/reference/report_season_ranges.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Report season ranges for all data types — report_season_ranges","text":"Invisible data frame season range info","code":""},{"path":"https://peteowen1.github.io/panna/reference/reset_fbref_session.html","id":null,"dir":"Reference","previous_headings":"","what":"Reset FBref session — reset_fbref_session","title":"Reset FBref session — reset_fbref_session","text":"Clears cookies creates fresh session. Use changing VPN/IP.","code":""},{"path":"https://peteowen1.github.io/panna/reference/reset_fbref_session.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Reset FBref session — reset_fbref_session","text":"","code":"reset_fbref_session()"},{"path":"https://peteowen1.github.io/panna/reference/reset_understat_session.html","id":null,"dir":"Reference","previous_headings":"","what":"Reset Understat session — reset_understat_session","title":"Reset Understat session — reset_understat_session","text":"Clears cookies creates fresh session.","code":""},{"path":"https://peteowen1.github.io/panna/reference/reset_understat_session.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Reset Understat session — reset_understat_session","text":"","code":"reset_understat_session()"},{"path":"https://peteowen1.github.io/panna/reference/safe_divide.html","id":null,"dir":"Reference","previous_headings":"","what":"Safe division handling division by zero — safe_divide","title":"Safe division handling division by zero — safe_divide","text":"Safe division handling division zero","code":""},{"path":"https://peteowen1.github.io/panna/reference/safe_divide.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Safe division handling division by zero — safe_divide","text":"","code":"safe_divide(x, y, default = 0)"},{"path":"https://peteowen1.github.io/panna/reference/safe_divide.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Safe division handling division by zero — safe_divide","text":"x Numerator y Denominator default Value return denominator zero (default: 0)","code":""},{"path":"https://peteowen1.github.io/panna/reference/safe_divide.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Safe division handling division by zero — safe_divide","text":"x / y, default y zero","code":""},{"path":"https://peteowen1.github.io/panna/reference/safe_divide.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Safe division handling division by zero — safe_divide","text":"","code":"safe_divide(10, 2) #> [1] 5 safe_divide(10, 0) #> [1] 0 safe_divide(10, 0, default = NA) #> [1] NA"},{"path":"https://peteowen1.github.io/panna/reference/save_cached_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Save data to cache — save_cached_data","title":"Save data to cache — save_cached_data","text":"Save data cache","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_cached_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save data to cache — save_cached_data","text":"","code":"save_cached_data(data, data_type)"},{"path":"https://peteowen1.github.io/panna/reference/save_cached_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save data to cache — save_cached_data","text":"data Data frame cache data_type Type data","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_epv_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Save EPV Model — save_epv_model","title":"Save EPV Model — save_epv_model","text":"Saves trained EPV model disk.","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_epv_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save EPV Model — save_epv_model","text":"","code":"save_epv_model(epv_model, path = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/save_epv_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save EPV Model — save_epv_model","text":"epv_model EPV model fit_epv_model() path Directory save model. NULL, uses pannadata/opta/models/","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_epv_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save EPV Model — save_epv_model","text":"Invisibly returns path","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_match_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Save match table to cache — save_match_table","title":"Save match table to cache — save_match_table","text":"Saves hierarchical path: {table_type}/{league}/{season}/{id}.rds","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_match_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save match table to cache — save_match_table","text":"","code":"save_match_table(data, league, season, fbref_id, table_type)"},{"path":"https://peteowen1.github.io/panna/reference/save_match_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save match table to cache — save_match_table","text":"data Data frame save league League code season Season string fbref_id FBref match ID table_type Type table","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_match_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save match table to cache — save_match_table","text":"Invisible path saved file","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_understat_manifest.html","id":null,"dir":"Reference","previous_headings":"","what":"Save Understat manifest to parquet file — save_understat_manifest","title":"Save Understat manifest to parquet file — save_understat_manifest","text":"Save Understat manifest parquet file","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_understat_manifest.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save Understat manifest to parquet file — save_understat_manifest","text":"","code":"save_understat_manifest(manifest, path)"},{"path":"https://peteowen1.github.io/panna/reference/save_understat_manifest.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save Understat manifest to parquet file — save_understat_manifest","text":"manifest Data frame manifest data path Path save manifest parquet file","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_understat_manifest.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save Understat manifest to parquet file — save_understat_manifest","text":"Invisible path saved file","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_understat_table.html","id":null,"dir":"Reference","previous_headings":"","what":"Save Understat match table to parquet cache — save_understat_table","title":"Save Understat match table to parquet cache — save_understat_table","text":"Appends match data existing parquet file creates new one. Matches identified understat_id avoid duplicates. Uses temp file + rename avoid Windows file locking issues.","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_understat_table.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save Understat match table to parquet cache — save_understat_table","text":"","code":"save_understat_table(data, league, season, table_type)"},{"path":"https://peteowen1.github.io/panna/reference/save_understat_table.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save Understat match table to parquet cache — save_understat_table","text":"data Data frame save (single match) league League code season Season string table_type Type table (metadata, roster, shots)","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_understat_table.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save Understat match table to parquet cache — save_understat_table","text":"Invisible path saved file","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_xg_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Save xG Model — save_xg_model","title":"Save xG Model — save_xg_model","text":"Saves trained xG model RDS file.","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_xg_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save xG Model — save_xg_model","text":"","code":"save_xg_model(xg_model, path = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/save_xg_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save xG Model — save_xg_model","text":"xg_model Fitted xG model fit_xg_model() path Path save model. NULL, saves pannadata/opta/models/","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_xg_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save xG Model — save_xg_model","text":"Invisibly returns path","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_xpass_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Save xPass Model — save_xpass_model","title":"Save xPass Model — save_xpass_model","text":"Saves trained xPass model RDS file.","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_xpass_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save xPass Model — save_xpass_model","text":"","code":"save_xpass_model(xpass_model, path = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/save_xpass_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save xPass Model — save_xpass_model","text":"xpass_model Fitted xPass model path Path save. NULL, saves pannadata/opta/models/","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_xpass_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save xPass Model — save_xpass_model","text":"Invisibly returns path","code":""},{"path":"https://peteowen1.github.io/panna/reference/save_xpass_model.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Save xPass Model — save_xpass_model","text":"","code":"if (FALSE) { # \\dontrun{ xpass_model <- fit_xpass_model(pass_features) save_xpass_model(xpass_model) save_xpass_model(xpass_model, path = \"models/my_xpass_model.rds\") } # }"},{"path":"https://peteowen1.github.io/panna/reference/scrape_comp_season.html","id":null,"dir":"Reference","previous_headings":"","what":"Scrape a competition-season — scrape_comp_season","title":"Scrape a competition-season — scrape_comp_season","text":"Scrapes matches competition-season, either cache FBref. Handles fixture fetching, caching logic, progress reporting.","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_comp_season.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scrape a competition-season — scrape_comp_season","text":"","code":"scrape_comp_season(   comp,   season,   table_types,   delay,   force_rescrape,   max_matches = Inf )"},{"path":"https://peteowen1.github.io/panna/reference/scrape_comp_season.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Scrape a competition-season — scrape_comp_season","text":"comp Competition code (e.g., \"ENG\", \"UCL\") season Season string (e.g., \"2023-2024\") table_types Character vector table types scrape delay Seconds requests force_rescrape TRUE, ignore cache rescrape max_matches Maximum matches scrape (default Inf)","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_comp_season.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Scrape a competition-season — scrape_comp_season","text":"Number matches scraped (tracking session totals)","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_comp_season.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Scrape a competition-season — scrape_comp_season","text":"","code":"if (FALSE) { # \\dontrun{ n <- scrape_comp_season(\"ENG\", \"2023-2024\",                         table_types = c(\"summary\", \"events\"),                         delay = 5, force_rescrape = FALSE) } # }"},{"path":"https://peteowen1.github.io/panna/reference/scrape_fbref_matches.html","id":null,"dir":"Reference","previous_headings":"","what":"Scrape FBref match data directly — scrape_fbref_matches","title":"Scrape FBref match data directly — scrape_fbref_matches","text":"Master function scraping match-level data FBref. Uses direct HTTP requests browser headers bypass Cloudflare. Implements polite scraping rate limiting incremental caching.","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_fbref_matches.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scrape FBref match data directly — scrape_fbref_matches","text":"","code":"scrape_fbref_matches(   match_urls,   league,   season,   table_types = c(\"summary\", \"passing\", \"passing_types\", \"defense\", \"possession\", \"misc\",     \"keeper\", \"shots\", \"events\", \"metadata\"),   delay = 5,   use_cache = TRUE,   verbose = TRUE,   max_matches = Inf )"},{"path":"https://peteowen1.github.io/panna/reference/scrape_fbref_matches.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Scrape FBref match data directly — scrape_fbref_matches","text":"match_urls Character vector FBref match URLs league League code file naming (e.g., \"ENG\", \"ESP\", \"GER\", \"ITA\", \"FRA\") season Season string file naming (e.g., \"2024-2025\") table_types Character vector table types scrape. Options: \"summary\", \"passing\", \"passing_types\", \"defense\", \"possession\", \"misc\", \"keeper\", \"shots\", \"metadata\" Default: delay Seconds requests (default 5, minimum 3) use_cache Whether use/update cache (default TRUE) verbose Print progress messages (default TRUE) max_matches Maximum number matches scrape (default Inf )","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_fbref_matches.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Scrape FBref match data directly — scrape_fbref_matches","text":"List containing data frames table type: metadata Match metadata (teams, scores, IDs, manager, captain, venue, etc.) summary Player summary stats passing Passing stats defense Defensive stats possession Possession stats shots Shot data events Match events timeline (goals, cards, substitutions)","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_fbref_matches.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Scrape FBref match data directly — scrape_fbref_matches","text":"","code":"if (FALSE) { # \\dontrun{ urls <- c(   \"https://fbref.com/en/matches/12c8079e/Girona-Rayo-Vallecano-August-15-2025-La-Liga\" ) data <- scrape_fbref_matches(urls, league = \"ESP\", season = \"2025-2026\") data$summary  # Player stats data$shots    # Shot-level data data$events   # Match timeline } # }"},{"path":"https://peteowen1.github.io/panna/reference/scrape_fixtures.html","id":null,"dir":"Reference","previous_headings":"","what":"Scrape match URLs from fixtures page — scrape_fixtures","title":"Scrape match URLs from fixtures page — scrape_fixtures","text":"Fetches league's fixtures page extracts match URLs.","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_fixtures.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scrape match URLs from fixtures page — scrape_fixtures","text":"","code":"scrape_fixtures(league, season, completed_only = TRUE)"},{"path":"https://peteowen1.github.io/panna/reference/scrape_fixtures.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Scrape match URLs from fixtures page — scrape_fixtures","text":"league League code (e.g., \"ENG\", \"ESP\") season Season string (e.g., \"2024-2025\") completed_only TRUE, return matches scores (default TRUE)","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_fixtures.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Scrape match URLs from fixtures page — scrape_fixtures","text":"Data frame match_url, home_team, away_team, date columns","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_fixtures.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Scrape match URLs from fixtures page — scrape_fixtures","text":"","code":"if (FALSE) { # \\dontrun{ fixtures <- scrape_fixtures(\"ENG\", \"2024-2025\") head(fixtures) } # }"},{"path":"https://peteowen1.github.io/panna/reference/scrape_match_events.html","id":null,"dir":"Reference","previous_headings":"","what":"Scrape match events timeline from FBref page — scrape_match_events","title":"Scrape match events timeline from FBref page — scrape_match_events","text":"Parses events wrap section extract goals, cards, substitutions precise minute information.","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_match_events.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scrape match events timeline from FBref page — scrape_match_events","text":"","code":"scrape_match_events(page, match_url)"},{"path":"https://peteowen1.github.io/panna/reference/scrape_match_events.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Scrape match events timeline from FBref page — scrape_match_events","text":"page Parsed HTML document match_url Original match URL ID extraction","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_match_events.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Scrape match events timeline from FBref page — scrape_match_events","text":"Data frame event timeline, NULL events found","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_fixtures.html","id":null,"dir":"Reference","previous_headings":"","what":"Scrape fixtures from Understat league page — scrape_understat_fixtures","title":"Scrape fixtures from Understat league page — scrape_understat_fixtures","text":"Gets list matches Understat IDs league season.","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_fixtures.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scrape fixtures from Understat league page — scrape_understat_fixtures","text":"","code":"scrape_understat_fixtures(league, season, completed_only = TRUE)"},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_fixtures.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Scrape fixtures from Understat league page — scrape_understat_fixtures","text":"league League code (e.g., \"ENG\", \"ESP\") season Season year (e.g., 2024 \"2024\") completed_only TRUE, return completed matches (default TRUE)","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_fixtures.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Scrape fixtures from Understat league page — scrape_understat_fixtures","text":"Data frame match info including understat_id, NULL data extracted (expected current Understat site structure)","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_fixtures.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"Scrape fixtures from Understat league page — scrape_understat_fixtures","text":"2024, Understat loads fixture data via JavaScript. function return NULL data initial HTML response. Use scrape_understat_match_range() alternative scrape matches ID range, use RSelenium/chromote JS-rendered content.","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_fixtures.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Scrape fixtures from Understat league page — scrape_understat_fixtures","text":"","code":"if (FALSE) { # \\dontrun{ # This will likely return NULL due to JS-loaded content fixtures <- scrape_understat_fixtures(\"ENG\", 2024)  # Alternative: use match ID range results <- scrape_understat_match_range(28900, 28910, \"ENG\", 2024) } # }"},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_match.html","id":null,"dir":"Reference","previous_headings":"","what":"Scrape single Understat match — scrape_understat_match","title":"Scrape single Understat match — scrape_understat_match","text":"Fetches parses match data Understat. Uses HTML page metadata events, API endpoint roster shots data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_match.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scrape single Understat match — scrape_understat_match","text":"","code":"scrape_understat_match(understat_id, league, season, save_cache = TRUE)"},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_match.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Scrape single Understat match — scrape_understat_match","text":"understat_id Understat match ID league League code (caching) season Season (caching) save_cache Whether save cache (default TRUE)","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_match.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Scrape single Understat match — scrape_understat_match","text":"List metadata, events, roster, shots data frames","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_match.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Scrape single Understat match — scrape_understat_match","text":"","code":"if (FALSE) { # \\dontrun{ match_data <- scrape_understat_match(28988, \"ENG\", 2024) print(match_data$metadata)   # Match info, xG totals print(match_data$events)     # Goals, subs, cards timeline print(match_data$roster)     # Player stats (xG, xA, etc.) print(match_data$shots)      # Shot-level xG } # }"},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_match_range.html","id":null,"dir":"Reference","previous_headings":"","what":"Scrape matches by Understat ID range — scrape_understat_match_range","title":"Scrape matches by Understat ID range — scrape_understat_match_range","text":"Iteratively scrapes matches within given ID range. useful fixture lists obtained directly (since Understat loads via JS).","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_match_range.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scrape matches by Understat ID range — scrape_understat_match_range","text":"","code":"scrape_understat_match_range(   start_id,   end_id,   league,   season,   delay = 3,   skip_invalid = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_match_range.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Scrape matches by Understat ID range — scrape_understat_match_range","text":"start_id Starting match ID end_id Ending match ID (inclusive) league League code caching (e.g., \"ENG\") season Season caching (e.g., 2024) delay Seconds requests (default 3) skip_invalid TRUE (default), silently skip invalid match IDs","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_match_range.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Scrape matches by Understat ID range — scrape_understat_match_range","text":"List match results (metadata , roster/shots require JS)","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_match_range.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Scrape matches by Understat ID range — scrape_understat_match_range","text":"Understat match IDs sequential integers. Recent seasons tend higher IDs. example, 2024-25 Premier League matches ~28000 range.","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_match_range.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Scrape matches by Understat ID range — scrape_understat_match_range","text":"","code":"if (FALSE) { # \\dontrun{ # Scrape 10 matches starting from ID 28900 results <- scrape_understat_match_range(28900, 28909, \"ENG\", 2024)  # Extract just the metadata metadata <- dplyr::bind_rows(lapply(results, function(x) x$metadata)) } # }"},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_matches.html","id":null,"dir":"Reference","previous_headings":"","what":"Scrape multiple Understat matches — scrape_understat_matches","title":"Scrape multiple Understat matches — scrape_understat_matches","text":"Scrapes multiple matches rate limiting caching.","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_matches.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scrape multiple Understat matches — scrape_understat_matches","text":"","code":"scrape_understat_matches(   understat_ids,   league,   season,   delay_seconds = 3,   skip_cached = TRUE,   max_matches = NULL )"},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_matches.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Scrape multiple Understat matches — scrape_understat_matches","text":"understat_ids Vector Understat match IDs league League code season Season delay_seconds Delay requests (default 3) skip_cached Skip already cached matches (default TRUE) max_matches Maximum matches scrape (default NULL = )","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_matches.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Scrape multiple Understat matches — scrape_understat_matches","text":"List counts scraped, cached, failed matches","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_season.html","id":null,"dir":"Reference","previous_headings":"","what":"Scrape full Understat season — scrape_understat_season","title":"Scrape full Understat season — scrape_understat_season","text":"Scrapes matches league-season, first fetching fixtures.","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_season.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Scrape full Understat season — scrape_understat_season","text":"","code":"scrape_understat_season(   league,   season,   delay_seconds = 3,   skip_cached = TRUE,   max_matches = NULL )"},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_season.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Scrape full Understat season — scrape_understat_season","text":"league League code (e.g., \"ENG\") season Season year (e.g., 2024) delay_seconds Delay requests (default 3) skip_cached Skip already cached matches (default TRUE) max_matches Maximum matches scrape (default NULL = )","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_season.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Scrape full Understat season — scrape_understat_season","text":"List counts scraped, cached, failed matches","code":""},{"path":"https://peteowen1.github.io/panna/reference/scrape_understat_season.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Scrape full Understat season — scrape_understat_season","text":"","code":"if (FALSE) { # \\dontrun{ # Scrape all 2024 Premier League matches from Understat scrape_understat_season(\"ENG\", 2024)  # Scrape with limit for testing scrape_understat_season(\"ENG\", 2024, max_matches = 5) } # }"},{"path":"https://peteowen1.github.io/panna/reference/smart_scrape_understat.html","id":null,"dir":"Reference","previous_headings":"","what":"Smart scrape Understat with per-league tracking — smart_scrape_understat","title":"Smart scrape Understat with per-league tracking — smart_scrape_understat","text":"Scrapes Understat matches using per-league max ID tracking. league scanned independently max ID, handles interleaved nature Understat match IDs across leagues.","code":""},{"path":"https://peteowen1.github.io/panna/reference/smart_scrape_understat.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Smart scrape Understat with per-league tracking — smart_scrape_understat","text":"","code":"smart_scrape_understat(   manifest_path,   leagues = c(\"RUS\", \"ENG\", \"ESP\", \"FRA\", \"ITA\", \"GER\"),   lookback = 20,   max_misses = 50,   delay = 3,   verbose = TRUE )"},{"path":"https://peteowen1.github.io/panna/reference/smart_scrape_understat.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Smart scrape Understat with per-league tracking — smart_scrape_understat","text":"manifest_path Path manifest parquet file leagues Character vector leagues scrape (default: 6) lookback Number IDs look back max (handles gaps) max_misses Stop scanning league many consecutive misses delay Seconds requests verbose Print progress messages","code":""},{"path":"https://peteowen1.github.io/panna/reference/smart_scrape_understat.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Smart scrape Understat with per-league tracking — smart_scrape_understat","text":"Data frame scraping results (match_id, league, status)","code":""},{"path":"https://peteowen1.github.io/panna/reference/smart_scrape_understat.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Smart scrape Understat with per-league tracking — smart_scrape_understat","text":"","code":"if (FALSE) { # \\dontrun{ # Run smart scraper results <- smart_scrape_understat(   manifest_path = \"data/understat-manifest.parquet\",   lookback = 20,   max_misses = 50,   delay = 3 )  # Check results table(results$league, results$status) } # }"},{"path":"https://peteowen1.github.io/panna/reference/split_od_contributions.html","id":null,"dir":"Reference","previous_headings":"","what":"Split O/D contributions from existing ratings — split_od_contributions","title":"Split O/D contributions from existing ratings — split_od_contributions","text":"Approximates O/D split overall panna feature data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/split_od_contributions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Split O/D contributions from existing ratings — split_od_contributions","text":"","code":"split_od_contributions(panna_ratings, player_features)"},{"path":"https://peteowen1.github.io/panna/reference/split_od_contributions.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Split O/D contributions from existing ratings — split_od_contributions","text":"panna_ratings Overall panna ratings player_features Player features offensive/defensive stats","code":""},{"path":"https://peteowen1.github.io/panna/reference/split_od_contributions.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Split O/D contributions from existing ratings — split_od_contributions","text":"Data frame estimated O-panna D-panna","code":""},{"path":"https://peteowen1.github.io/panna/reference/split_od_contributions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Split O/D contributions from existing ratings — split_od_contributions","text":"","code":"if (FALSE) { # \\dontrun{ features <- create_player_feature_matrix(processed_data) od_ratings <- split_od_contributions(panna_ratings, features) head(od_ratings[, c(\"player_name\", \"panna\", \"o_panna\", \"d_panna\")]) } # }"},{"path":"https://peteowen1.github.io/panna/reference/split_pass_credit.html","id":null,"dir":"Reference","previous_headings":"","what":"Split Pass Credit (Legacy Helper) — split_pass_credit","title":"Split Pass Credit (Legacy Helper) — split_pass_credit","text":"Splits pass EPV passer receiver based difficulty. Splits EPV credit passer receiver based pass difficulty. Harder passes (lower xPass) give credit passer.","code":""},{"path":"https://peteowen1.github.io/panna/reference/split_pass_credit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Split Pass Credit (Legacy Helper) — split_pass_credit","text":"","code":"split_pass_credit(pass_value, xpass)  split_pass_credit(pass_value, xpass)"},{"path":"https://peteowen1.github.io/panna/reference/split_pass_credit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Split Pass Credit (Legacy Helper) — split_pass_credit","text":"pass_value Total EPV value pass xpass Predicted pass completion probability","code":""},{"path":"https://peteowen1.github.io/panna/reference/split_pass_credit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Split Pass Credit (Legacy Helper) — split_pass_credit","text":"List passer_credit receiver_credit vectors List passer_credit receiver_credit","code":""},{"path":"https://peteowen1.github.io/panna/reference/split_pass_credit.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Split Pass Credit (Legacy Helper) — split_pass_credit","text":"","code":"# Easy pass (80% completion): receiver gets most credit split_pass_credit(0.1, 0.8) #> $passer_credit #> [1] 0.02 #>  #> $receiver_credit #> [1] 0.08 #>   # Difficult pass (30% completion): passer gets most credit split_pass_credit(0.1, 0.3) #> $passer_credit #> [1] 0.07 #>  #> $receiver_credit #> [1] 0.03 #>"},{"path":"https://peteowen1.github.io/panna/reference/standardize_data_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Standardize data frame column names using a mapping — standardize_data_columns","title":"Standardize data frame column names using a mapping — standardize_data_columns","text":"Renames columns data frame data.table alternative names exist. handles common variations column naming across different data sources. data.table objects, uses setnames() efficient -place renaming.","code":""},{"path":"https://peteowen1.github.io/panna/reference/standardize_data_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Standardize data frame column names using a mapping — standardize_data_columns","text":"","code":"standardize_data_columns(data, col_map)"},{"path":"https://peteowen1.github.io/panna/reference/standardize_data_columns.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Standardize data frame column names using a mapping — standardize_data_columns","text":"data Data frame data.table standardize col_map Named list names canonical column names values character vectors alternative names look .","code":""},{"path":"https://peteowen1.github.io/panna/reference/standardize_data_columns.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Standardize data frame column names using a mapping — standardize_data_columns","text":"Data frame/data.table standardized column names","code":""},{"path":"https://peteowen1.github.io/panna/reference/standardize_player_names.html","id":null,"dir":"Reference","previous_headings":"","what":"Standardize player names — standardize_player_names","title":"Standardize player names — standardize_player_names","text":"Cleans standardizes player names consistent matching across datasets. Uses memoization cache unique names O(1) lookup repeated values.","code":""},{"path":"https://peteowen1.github.io/panna/reference/standardize_player_names.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Standardize player names — standardize_player_names","text":"","code":"standardize_player_names(names)"},{"path":"https://peteowen1.github.io/panna/reference/standardize_player_names.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Standardize player names — standardize_player_names","text":"names Character vector player names","code":""},{"path":"https://peteowen1.github.io/panna/reference/standardize_player_names.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Standardize player names — standardize_player_names","text":"Character vector standardized names","code":""},{"path":"https://peteowen1.github.io/panna/reference/standardize_team_names.html","id":null,"dir":"Reference","previous_headings":"","what":"Standardize team names — standardize_team_names","title":"Standardize team names — standardize_team_names","text":"Cleans standardizes team names consistent matching. Uses vectorized lookup speed large datasets.","code":""},{"path":"https://peteowen1.github.io/panna/reference/standardize_team_names.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Standardize team names — standardize_team_names","text":"","code":"standardize_team_names(names)"},{"path":"https://peteowen1.github.io/panna/reference/standardize_team_names.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Standardize team names — standardize_team_names","text":"names Character vector team names","code":""},{"path":"https://peteowen1.github.io/panna/reference/standardize_team_names.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Standardize team names — standardize_team_names","text":"Character vector standardized names","code":""},{"path":"https://peteowen1.github.io/panna/reference/suggest_opta_seasons.html","id":null,"dir":"Reference","previous_headings":"","what":"Suggest Available Seasons for an Opta League — suggest_opta_seasons","title":"Suggest Available Seasons for an Opta League — suggest_opta_seasons","text":"Returns available seasons league, checking local data catalog. Useful discovering season format competition uses (e.g., \"2024-2025\" leagues vs \"2018 Russia\" World Cup).","code":""},{"path":"https://peteowen1.github.io/panna/reference/suggest_opta_seasons.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Suggest Available Seasons for an Opta League — suggest_opta_seasons","text":"","code":"suggest_opta_seasons(league, table_type = \"match_events\", base_dir = NULL)"},{"path":"https://peteowen1.github.io/panna/reference/suggest_opta_seasons.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Suggest Available Seasons for an Opta League — suggest_opta_seasons","text":"league League code (e.g., \"World_Cup\", \"EPL\", \"AFCON\"). Accepts panna aliases (e.g., \"ENG\") Opta codes. table_type Table type check (default: \"match_events\"). base_dir Opta data directory. NULL, auto-detected.","code":""},{"path":"https://peteowen1.github.io/panna/reference/suggest_opta_seasons.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Suggest Available Seasons for an Opta League — suggest_opta_seasons","text":"Character vector available seasons (recent first), empty.","code":""},{"path":"https://peteowen1.github.io/panna/reference/suggest_opta_seasons.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Suggest Available Seasons for an Opta League — suggest_opta_seasons","text":"","code":"if (FALSE) { # \\dontrun{ suggest_opta_seasons(\"World_Cup\") # [1] \"2022 Qatar\" \"2018 Russia\" \"2014 Brazil\" ...  suggest_opta_seasons(\"EPL\") # [1] \"2025-2026\" \"2024-2025\" \"2023-2024\" ... } # }"},{"path":"https://peteowen1.github.io/panna/reference/to_opta_league.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert League Code to Opta Format — to_opta_league","title":"Convert League Code to Opta Format — to_opta_league","text":"Converts panna league codes (ENG, ESP, etc.) Opta format (EPL, La_Liga, etc.). Matching case-insensitive convenience (e.g., \"epl\", \"eng\", \"Eng\" work). Falls back catalog lookup, pass-valid-looking codes.","code":""},{"path":"https://peteowen1.github.io/panna/reference/to_opta_league.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert League Code to Opta Format — to_opta_league","text":"","code":"to_opta_league(league)"},{"path":"https://peteowen1.github.io/panna/reference/to_opta_league.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert League Code to Opta Format — to_opta_league","text":"league Panna league code Opta league code (case-insensitive).","code":""},{"path":"https://peteowen1.github.io/panna/reference/to_opta_league.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert League Code to Opta Format — to_opta_league","text":"Opta league code.","code":""},{"path":"https://peteowen1.github.io/panna/reference/understat_competitions.html","id":null,"dir":"Reference","previous_headings":"","what":"Understat competition metadata — understat_competitions","title":"Understat competition metadata — understat_competitions","text":"data frame containing Understat competition slugs metadata supported competitions. Understat covers Big 5 European leagues plus Russia.","code":""},{"path":"https://peteowen1.github.io/panna/reference/understat_competitions.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Understat competition metadata — understat_competitions","text":"","code":"understat_competitions"},{"path":"https://peteowen1.github.io/panna/reference/understat_competitions.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Understat competition metadata — understat_competitions","text":"data frame columns: code Short code used file paths (e.g., \"ENG\", \"RUS\") name Full competition name understat_slug URL slug Understat URLs (e.g., \"EPL\", \"La_liga\") season_format seasons formatted: \"YYYY\" (Understat uses single year)","code":""},{"path":"https://peteowen1.github.io/panna/reference/understat_competitions.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Understat competition metadata — understat_competitions","text":"","code":"understat_competitions #>   code                   name understat_slug season_format #> 1  ENG         Premier League            EPL          YYYY #> 2  ESP                La Liga        La_liga          YYYY #> 3  GER             Bundesliga     Bundesliga          YYYY #> 4  ITA                Serie A        Serie_A          YYYY #> 5  FRA                Ligue 1        Ligue_1          YYYY #> 6  RUS Russian Premier League           RFPL          YYYY understat_competitions[understat_competitions$code == \"ENG\", ] #>   code           name understat_slug season_format #> 1  ENG Premier League            EPL          YYYY"},{"path":"https://peteowen1.github.io/panna/reference/understat_league_to_code.html","id":null,"dir":"Reference","previous_headings":"","what":"Map Understat league name to our code — understat_league_to_code","title":"Map Understat league name to our code — understat_league_to_code","text":"Converts Understat's league name (e.g., \"EPL\", \"La liga\") standardized code (e.g., \"ENG\", \"ESP\").","code":""},{"path":"https://peteowen1.github.io/panna/reference/understat_league_to_code.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Map Understat league name to our code — understat_league_to_code","text":"","code":"understat_league_to_code(understat_league)"},{"path":"https://peteowen1.github.io/panna/reference/understat_league_to_code.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Map Understat league name to our code — understat_league_to_code","text":"understat_league Character, league name Understat metadata","code":""},{"path":"https://peteowen1.github.io/panna/reference/understat_league_to_code.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Map Understat league name to our code — understat_league_to_code","text":"Character, league code, NA found","code":""},{"path":"https://peteowen1.github.io/panna/reference/understat_league_to_code.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Map Understat league name to our code — understat_league_to_code","text":"","code":"if (FALSE) { # \\dontrun{ understat_league_to_code(\"La liga\")  # \"ESP\" understat_league_to_code(\"Serie A\")  # \"ITA\" } # }"},{"path":"https://peteowen1.github.io/panna/reference/understat_to_fbref_season.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert Understat season to FBref season — understat_to_fbref_season","title":"Convert Understat season to FBref season — understat_to_fbref_season","text":"Converts Understat's YYYY format FBref's YYYY-YYYY format.","code":""},{"path":"https://peteowen1.github.io/panna/reference/understat_to_fbref_season.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert Understat season to FBref season — understat_to_fbref_season","text":"","code":"understat_to_fbref_season(understat_season)"},{"path":"https://peteowen1.github.io/panna/reference/understat_to_fbref_season.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert Understat season to FBref season — understat_to_fbref_season","text":"understat_season Character numeric, season Understat format (e.g., \"2023\" 2023)","code":""},{"path":"https://peteowen1.github.io/panna/reference/understat_to_fbref_season.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert Understat season to FBref season — understat_to_fbref_season","text":"Character, season FBref format (e.g., \"2023-2024\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/understat_to_fbref_season.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert Understat season to FBref season — understat_to_fbref_season","text":"","code":"if (FALSE) { # \\dontrun{ understat_to_fbref_season(\"2024\")  # \"2024-2025\" } # }"},{"path":"https://peteowen1.github.io/panna/reference/update_elo.html","id":null,"dir":"Reference","previous_headings":"","what":"Update Elo Ratings After a Match — update_elo","title":"Update Elo Ratings After a Match — update_elo","text":"Updates Elo ratings home away teams based match result. Uses standard Elo formula configurable K-factor home advantage.","code":""},{"path":"https://peteowen1.github.io/panna/reference/update_elo.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Update Elo Ratings After a Match — update_elo","text":"","code":"update_elo(   home_elo,   away_elo,   home_goals,   away_goals,   k = 20,   home_advantage = 65 )"},{"path":"https://peteowen1.github.io/panna/reference/update_elo.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Update Elo Ratings After a Match — update_elo","text":"home_elo Current home team Elo away_elo Current away team Elo home_goals Goals scored home team away_goals Goals scored away team k K-factor controlling update magnitude (default 20) home_advantage Home advantage Elo points (default 65)","code":""},{"path":"https://peteowen1.github.io/panna/reference/update_elo.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Update Elo Ratings After a Match — update_elo","text":"Named list new_home_elo, new_away_elo","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_data_completeness.html","id":null,"dir":"Reference","previous_headings":"","what":"Check and report data completeness — validate_data_completeness","title":"Check and report data completeness — validate_data_completeness","text":"Validates data quality reports missing values.","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_data_completeness.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check and report data completeness — validate_data_completeness","text":"","code":"validate_data_completeness(data, required_cols = NULL, warn = TRUE)"},{"path":"https://peteowen1.github.io/panna/reference/validate_data_completeness.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check and report data completeness — validate_data_completeness","text":"data Data frame validate required_cols Character vector required column names warn Logical, whether print warnings missing data","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_data_completeness.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check and report data completeness — validate_data_completeness","text":"List validation results","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_dataframe.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate data frame input — validate_dataframe","title":"Validate data frame input — validate_dataframe","text":"Validates input non-empty data frame required columns. Throws informative errors using cli package validation fails.","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_dataframe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate data frame input — validate_dataframe","text":"","code":"validate_dataframe(data, required_cols = NULL, arg_name = \"data\", min_rows = 1)"},{"path":"https://peteowen1.github.io/panna/reference/validate_dataframe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate data frame input — validate_dataframe","text":"data Data frame validate required_cols Character vector required column names arg_name Name argument (error messages) min_rows Minimum number rows required (default 1)","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_dataframe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate data frame input — validate_dataframe","text":"TRUE invisibly valid, otherwise throws error","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_dataframe.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Validate data frame input — validate_dataframe","text":"","code":"df <- data.frame(player_name = \"Messi\", minutes = 90) validate_dataframe(df, c(\"player_name\", \"minutes\")) # Returns TRUE  if (FALSE) { # \\dontrun{ # These will throw errors: validate_dataframe(NULL, c(\"player_name\")) validate_dataframe(data.frame(), c(\"player_name\")) validate_dataframe(df, c(\"nonexistent_col\")) } # }"},{"path":"https://peteowen1.github.io/panna/reference/validate_epv_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate EPV Model — validate_epv_model","title":"Validate EPV Model — validate_epv_model","text":"Checks model calibration EPV values bounded.","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_epv_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate EPV Model — validate_epv_model","text":"","code":"validate_epv_model(spadl_with_epv)"},{"path":"https://peteowen1.github.io/panna/reference/validate_epv_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate EPV Model — validate_epv_model","text":"spadl_with_epv SPADL actions EPV values","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_epv_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate EPV Model — validate_epv_model","text":"List validation statistics","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_min_minutes.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate min_minutes parameter — validate_min_minutes","title":"Validate min_minutes parameter — validate_min_minutes","text":"Checks min_minutes single non-negative number.","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_min_minutes.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate min_minutes parameter — validate_min_minutes","text":"","code":"validate_min_minutes(min_minutes)"},{"path":"https://peteowen1.github.io/panna/reference/validate_min_minutes.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate min_minutes parameter — validate_min_minutes","text":"min_minutes Value validate","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_panna_ratings.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate panna ratings — validate_panna_ratings","title":"Validate panna ratings — validate_panna_ratings","text":"Calculates validation metrics panna ratings.","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_panna_ratings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate panna ratings — validate_panna_ratings","text":"","code":"validate_panna_ratings(panna_ratings, rapm_ratings, spm_ratings)"},{"path":"https://peteowen1.github.io/panna/reference/validate_panna_ratings.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate panna ratings — validate_panna_ratings","text":"panna_ratings Panna ratings rapm_ratings RAPM ratings spm_ratings SPM ratings","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_panna_ratings.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate panna ratings — validate_panna_ratings","text":"List validation metrics","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_panna_ratings.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Validate panna ratings — validate_panna_ratings","text":"","code":"if (FALSE) { # \\dontrun{ validation <- validate_panna_ratings(panna_ratings, rapm_ratings, spm_ratings) validation$panna_rapm_cor validation$panna_spm_cor } # }"},{"path":"https://peteowen1.github.io/panna/reference/validate_parquet_file.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate a parquet file by checking magic bytes — validate_parquet_file","title":"Validate a parquet file by checking magic bytes — validate_parquet_file","text":"Parquet files must start end 4-byte magic number \"PAR1\". Interrupted downloads produce truncated files missing footer.","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_parquet_file.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate a parquet file by checking magic bytes — validate_parquet_file","text":"","code":"validate_parquet_file(path)"},{"path":"https://peteowen1.github.io/panna/reference/validate_parquet_file.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate a parquet file by checking magic bytes — validate_parquet_file","text":"path Path parquet file.","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_parquet_file.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate a parquet file by checking magic bytes — validate_parquet_file","text":"TRUE valid parquet file, FALSE corrupt, NA validation performed (e.g., permission denied).","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_predictive_power.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate predictive power — validate_predictive_power","title":"Validate predictive power — validate_predictive_power","text":"Tests panna ratings next season performance.","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_predictive_power.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate predictive power — validate_predictive_power","text":"","code":"validate_predictive_power(panna_ratings, next_season_rapm)"},{"path":"https://peteowen1.github.io/panna/reference/validate_predictive_power.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate predictive power — validate_predictive_power","text":"panna_ratings Panna ratings season N next_season_rapm RAPM season N+1","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_predictive_power.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate predictive power — validate_predictive_power","text":"Validation metrics","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_predictive_power.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Validate predictive power — validate_predictive_power","text":"","code":"if (FALSE) { # \\dontrun{ metrics <- validate_predictive_power(panna_ratings_2023, rapm_ratings_2024) metrics$correlation metrics$rmse } # }"},{"path":"https://peteowen1.github.io/panna/reference/validate_seasons.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate season input — validate_seasons","title":"Validate season input — validate_seasons","text":"Checks seasons valid \"YYYY-YYYY\" format within available data range. minimum year depends data source: FBref starts 2017, Opta 2013.","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_seasons.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate season input — validate_seasons","text":"","code":"validate_seasons(seasons, min_year = 2017, source_name = \"FBref\")"},{"path":"https://peteowen1.github.io/panna/reference/validate_seasons.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate season input — validate_seasons","text":"seasons Character vector seasons format \"YYYY-YYYY\" (e.g., \"2023-2024\") min_year Minimum start year allowed (default 2017 FBref) source_name Name data source error messages (default \"FBref\")","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_seasons.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate season input — validate_seasons","text":"TRUE valid, otherwise throws error","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_seasons.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Validate season input — validate_seasons","text":"","code":"validate_seasons(\"2023-2024\") #> [1] TRUE validate_seasons(c(\"2022-2023\", \"2023-2024\")) #> [1] TRUE validate_seasons(\"2013-2014\", min_year = 2013, source_name = \"Opta\") #> [1] TRUE"},{"path":"https://peteowen1.github.io/panna/reference/validate_spm_prediction.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate SPM prediction accuracy — validate_spm_prediction","title":"Validate SPM prediction accuracy — validate_spm_prediction","text":"Assesses well SPM predicts RAPM. Supports weighted metrics match weighted model fitting - care accuracy high-minute players whose RAPM estimates reliable.","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_spm_prediction.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate SPM prediction accuracy — validate_spm_prediction","text":"","code":"validate_spm_prediction(   spm_ratings,   rapm_ratings,   weight_by_minutes = TRUE,   weight_transform = \"sqrt\" )"},{"path":"https://peteowen1.github.io/panna/reference/validate_spm_prediction.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate SPM prediction accuracy — validate_spm_prediction","text":"spm_ratings Data frame SPM predictions (must include total_minutes weighting) rapm_ratings Data frame actual RAPM weight_by_minutes Whether weight metrics minutes (default TRUE) weight_transform Transform weights: \"sqrt\" (default), \"linear\", \"log\"","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_spm_prediction.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate SPM prediction accuracy — validate_spm_prediction","text":"List validation metrics (weighted unweighted)","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_sql_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate SQL column names — validate_sql_columns","title":"Validate SQL column names — validate_sql_columns","text":"Checks column names contain safe characters prevent SQL injection.","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_sql_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate SQL column names — validate_sql_columns","text":"","code":"validate_sql_columns(columns)"},{"path":"https://peteowen1.github.io/panna/reference/validate_sql_columns.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate SQL column names — validate_sql_columns","text":"columns Character vector column names","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_sql_columns.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate SQL column names — validate_sql_columns","text":"validated column names (unchanged valid)","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_xg_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate xG Model Performance — validate_xg_model","title":"Validate xG Model Performance — validate_xg_model","text":"Evaluates xG model held-test data.","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_xg_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate xG Model Performance — validate_xg_model","text":"","code":"validate_xg_model(xg_model, test_shots)"},{"path":"https://peteowen1.github.io/panna/reference/validate_xg_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate xG Model Performance — validate_xg_model","text":"xg_model Fitted xG model test_shots Shot features validation","code":""},{"path":"https://peteowen1.github.io/panna/reference/validate_xg_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate xG Model Performance — validate_xg_model","text":"List validation metrics","code":""},{"path":"https://peteowen1.github.io/panna/reference/visualize_od_scatter.html","id":null,"dir":"Reference","previous_headings":"","what":"Visualize O/D scatter — visualize_od_scatter","title":"Visualize O/D scatter — visualize_od_scatter","text":"Creates scatter plot offensive vs defensive ratings. Requires ggplot2.","code":""},{"path":"https://peteowen1.github.io/panna/reference/visualize_od_scatter.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Visualize O/D scatter — visualize_od_scatter","text":"","code":"visualize_od_scatter(ratings, highlight_top = 10)"},{"path":"https://peteowen1.github.io/panna/reference/visualize_od_scatter.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Visualize O/D scatter — visualize_od_scatter","text":"ratings O/D ratings data frame highlight_top Number top players label","code":""},{"path":"https://peteowen1.github.io/panna/reference/visualize_od_scatter.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Visualize O/D scatter — visualize_od_scatter","text":"ggplot object","code":""},{"path":"https://peteowen1.github.io/panna/reference/visualize_od_scatter.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Visualize O/D scatter — visualize_od_scatter","text":"","code":"if (FALSE) { # \\dontrun{ od_result <- calculate_od_panna(rapm_data, spm_ratings) visualize_od_scatter(od_result$ratings, highlight_top = 15) } # }"},{"path":"https://peteowen1.github.io/panna/news/index.html","id":"panna-020","dir":"Changelog","previous_headings":"","what":"panna 0.2.0","title":"panna 0.2.0","text":"Major expansion: Opta now primary data source full pipeline support across 15 leagues.","code":""},{"path":"https://peteowen1.github.io/panna/news/index.html","id":"breaking-changes-0-2-0","dir":"Changelog","previous_headings":"","what":"Breaking Changes","title":"panna 0.2.0","text":"load_opta_*() functions now default source = \"remote\" instead \"local\". Existing code relied default loading local files now download GitHub. Add source = \"local\" explicitly restore old behavior. (#11) player_skill_profile() now errors (name suggestions) player found, instead returning NULL warning. Code checking .null(result) use tryCatch() instead. (#13) player_skill_profile() return columns changed: weighted_90s confidence removed; new columns type, raw_avg, n90, w90, attempts, w_attempts added. (#13) to_opta_league() now errors unknown league codes catalog available (previously warned passed ). Typos like \"EPLL\" now fail fast. (#11) suggest_opta_seasons() longer exported (now internal). Use list_opta_seasons() instead. (#11)","code":""},{"path":"https://peteowen1.github.io/panna/news/index.html","id":"user-experience-improvements-0-2-0","dir":"Changelog","previous_headings":"","what":"User Experience Improvements","title":"panna 0.2.0","text":"load_opta_*() functions now default source = \"remote\", data loads directly GitHub without requiring pb_download_opta() first (#11) to_opta_league() now accepts case-insensitive input: “epl”, “eng”, “Eng” work (#11) list_opta_seasons() list_opta_leagues() now accept source = \"remote\" alias \"catalog\" consistency load_opta_*() functions (#11) Local-error messages now suggest source = 'remote' alternative (#11) player_skill_profile() auto-loads pre-computed skills match stats GitHub releases called data, instead downloading ~200 MB raw stats (#13) New load_opta_skills() function loading pre-computed skill estimates GitHub releases (#13) Corrupt parquet files interrupted downloads now detected re-downloaded automatically (#12) DuckDB “magic bytes” errors now give clear message auto-remove corrupt cache (#12) Fixed .exit() calls use add = TRUE prevent DuckDB connection leaks (#12)","code":""},{"path":"https://peteowen1.github.io/panna/news/index.html","id":"opta-rapmspm-pipeline-0-2-0","dir":"Changelog","previous_headings":"","what":"Opta RAPM/SPM Pipeline","title":"panna 0.2.0","text":"Full RAPM/SPM/Panna rating pipeline Opta data (15 leagues, 42K+ matches) Opta SPM uses 80+ features including xMetrics enrichment Parallel pipeline scripts data-raw/player-ratings-opta/ 15 leagues: Big 5 + NED/POR/TUR/ENG2/SCO + UCL/UEL/UECL + WC/EURO","code":""},{"path":"https://peteowen1.github.io/panna/news/index.html","id":"epv-expected-possession-value-0-2-0","dir":"Changelog","previous_headings":"","what":"EPV (Expected Possession Value)","title":"panna 0.2.0","text":"Action-level player valuation Opta event data x/y coordinates SPADL conversion Opta events (convert_opta_to_spadl()) XGBoost models xG, xPass, P(scoring), P(conceding) EPV credit assignment pass credit splitting Pre-trained models stored GitHub Releases","code":""},{"path":"https://peteowen1.github.io/panna/news/index.html","id":"xmetrics-pipeline-0-2-0","dir":"Changelog","previous_headings":"","what":"xMetrics Pipeline","title":"panna 0.2.0","text":"Pre-computed xG/xA/xPass metrics 15 Opta leagues Uses pre-trained SPADL + XGBoost models (penalty xG overridden 0.76) Output parquet files per league/season Loaded via load_opta_xmetrics()","code":""},{"path":"https://peteowen1.github.io/panna/news/index.html","id":"estimated-skills-0-2-0","dir":"Changelog","previous_headings":"","what":"Estimated Skills","title":"panna 0.2.0","text":"Bayesian decay-weighted skill estimation exponential recency weighting Position-specific prior multipliers (GK/DEF/MID/FWD) 3-pass optimization prior strength, lambda, quantile Context adjustments opponent quality, venue, league level Player skill profiles percentiles confidence intervals Backtest framework evaluating prediction accuracy New functions: estimate_player_skills(), player_skill_profile(), backtest_skill_predictions(), optimize_all_priors()","code":""},{"path":"https://peteowen1.github.io/panna/news/index.html","id":"match-predictions-0-2-0","dir":"Changelog","previous_headings":"","what":"Match Predictions","title":"panna 0.2.0","text":"XGBoost Poisson model home/away goal counts XGBoost multinomial model W/D/L probabilities Elo rating system init_team_elos(), compute_match_elos() Rolling team form features (5/10/20 match windows) Team-level skill feature aggregation estimated skills Calibration logloss evaluation tools","code":""},{"path":"https://peteowen1.github.io/panna/news/index.html","id":"new-opta-data-loaders-0-2-0","dir":"Changelog","previous_headings":"","what":"New Opta Data Loaders","title":"panna 0.2.0","text":"load_opta_match_events() - events x/y coordinates load_opta_lineups() - Lineup data load_opta_fixtures() - Fixture/results data match status filtering load_opta_xmetrics() - Pre-computed xG/xA/xPass metrics load_opta_shot_events() - Individual shots coordinates load_opta_events() - Goals, cards, substitutions list_opta_leagues() - Automatic league discovery data catalog load_opta_match_stats() - Load pre-computed match-level statistics","code":""},{"path":"https://peteowen1.github.io/panna/news/index.html","id":"other-improvements-0-2-0","dir":"Changelog","previous_headings":"","what":"Other Improvements","title":"panna 0.2.0","text":"Opta column count corrected 263 (incorrectly documented 271) Opta xG model documented SPADL + XGBoost (incorrectly shown “None”) Opta history starts 2013+ (incorrectly shown 2010+)","code":""},{"path":"https://peteowen1.github.io/panna/news/index.html","id":"panna-010","dir":"Changelog","previous_headings":"","what":"panna 0.1.0","title":"panna 0.1.0","text":"Initial release panna player rating system.","code":""},{"path":"https://peteowen1.github.io/panna/news/index.html","id":"rating-system-0-1-0","dir":"Changelog","previous_headings":"","what":"Rating System","title":"panna 0.1.0","text":"RAPM (Regularized Adjusted Plus-Minus) implementation using splint-based analysis SPM (Statistical Plus-Minus) box score prediction RAPM Combined Panna ratings SPM Bayesian prior Offensive defensive rating decomposition","code":""},{"path":"https://peteowen1.github.io/panna/news/index.html","id":"data-sources-0-1-0","dir":"Changelog","previous_headings":"","what":"Data Sources","title":"panna 0.1.0","text":"FBref support StatsBomb xG (Big 5 leagues, cups, international) Opta support 263 columns per player (15 leagues, 2013+) Understat support xGChain xGBuildup (Big 5 + Russia)","code":""},{"path":"https://peteowen1.github.io/panna/news/index.html","id":"data-loading-0-1-0","dir":"Changelog","previous_headings":"","what":"Data Loading","title":"panna 0.1.0","text":"DuckDB-based efficient parquet loading load_summary(), load_passing(), load_defense(), load_possession(), load_shots(), load_metadata() FBref load_opta_stats(), load_opta_shots(), load_opta_big5() Opta load_understat_roster(), load_understat_shots() Understat","code":""},{"path":"https://peteowen1.github.io/panna/news/index.html","id":"player-statistics-0-1-0","dir":"Changelog","previous_headings":"","what":"Player Statistics","title":"panna 0.1.0","text":"Aggregated player statistics player_fbref_*(), player_opta_*(), player_understat_*() functions Filtering minimum minutes, leagues, seasons","code":""},{"path":"https://peteowen1.github.io/panna/news/index.html","id":"data-distribution-0-1-0","dir":"Changelog","previous_headings":"","what":"Data Distribution","title":"panna 0.1.0","text":"GitHub Releases integration via piggyback pb_download_source() data download pb_upload_parquet() data upload","code":""}]
